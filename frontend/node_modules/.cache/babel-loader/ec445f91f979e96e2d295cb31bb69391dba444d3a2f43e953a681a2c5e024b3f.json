{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios';\nconst requirements = ref([]);\nconst newRequirement = ref('');\nconst showModal = ref(false);\nconst editing = ref(false);\nconst editingId = ref(null);\nconst fetchRequirements = async () => {\n  try {\n    const response = await axios.get('http://127.0.0.1:5000/api/requirements');\n    requirements.value = response.data;\n  } catch (error) {\n    console.error('Error fetching requirements:', error);\n  }\n};\n\n// const showModalForAdd = () => {\n//     newRequirement.value = '';\n//     editing.value = false;\n//     showModal.value = true;\n// };\n\nconst editRequirement = requirement => {\n  newRequirement.value = requirement.content;\n  editing.value = true;\n  editingId.value = requirement.id;\n  showModal.value = true;\n};\n\n// const closeModal = () => {\n//     showModal.value = false;\n// };\n\n// const saveRequirement = async () => {\n//     try {\n//         if (editing.value) {\n//             await axios.put(`/api/requirements/${editingId.value}`, { content: newRequirement.value });\n//         } else {\n//             await axios.post('/api/requirements', { content: newRequirement.value });\n//         }\n//         await fetchRequirements();\n//         closeModal();\n//     } catch (error) {\n//         console.error('Error saving requirement:', error);\n//     }\n// };\n\n// const deleteRequirement = async (id) => {\n//     try {\n//         await axios.delete(`/api/requirements/${id}`);\n//         await fetchRequirements();\n//     } catch (error) {\n//         console.error('Error deleting requirement:', error);\n//     }\n// };\n\nonMounted(() => {\n  fetchRequirements();\n});\n// export default {\n//     setup() {\n//         const requirements = ref([]);\n\n//         onMounted(() => {\n//             axios.get('http://127.0.0.1:5000/api/requirements')\n//                 .then(response => {\n//                     requirements.value = response.data;\n//                 })\n//                 .catch(error => {\n//                     console.error('There was an error!', error);\n//                 });\n//         });\n\n//         return {\n//             requirements\n//         };\n//     }\n\n// };","map":{"version":3,"names":["ref","onMounted","axios","requirements","newRequirement","showModal","editing","editingId","fetchRequirements","response","get","value","data","error","console","editRequirement","requirement","content","id"],"sources":["C:\\Users\\ASUS\\Desktop\\autochat\\frontend\\src\\views\\RequirementPage.vue"],"sourcesContent":["<template>\r\n    <div class=\"p-8\">\r\n        <div class=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n            <div class=\"flex justify-between items-center mb-6\">\r\n                <h2 class=\"text-lg font-medium\">需求列表</h2>\r\n                <button class=\"bg-primary text-white px-4 py-2 !rounded-button flex items-center\">\r\n                    <i class=\"fas fa-plus mr-2\"></i>新建需求\r\n                </button>\r\n            </div>\r\n            <div class=\"overflow-x-auto\">\r\n                <table class=\"w-full\">\r\n                    <!-- <thead>\r\n                                <tr class=\"bg-gray-50\">\r\n                                    <th class=\"px-4 py-3 text-left text-sm font-medium text-gray-500\">需求名称</th>\r\n                                    <th class=\"px-4 py-3 text-left text-sm font-medium text-gray-500\">优先级</th>\r\n                                    <th class=\"px-4 py-3 text-left text-sm font-medium text-gray-500\">状态</th>\r\n                                    <th class=\"px-4 py-3 text-left text-sm font-medium text-gray-500\">创建时间</th>\r\n                                    <th class=\"px-4 py-3 text-left text-sm font-medium text-gray-500\">操作</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr class=\"border-t\">\r\n                                    <td class=\"px-4 py-4 text-sm\">设计一个医院系统</td>\r\n                                    <td class=\"px-4 py-4\"><span\r\n                                            class=\"px-2 py-1 bg-red-100 text-red-800 rounded text-sm\">高</span></td>\r\n                                    <td class=\"px-4 py-4\"><span\r\n                                            class=\"px-2 py-1 bg-green-100 text-green-800 rounded text-sm\">进行中</span>\r\n                                    </td>\r\n                                    <td class=\"px-4 py-4 text-sm\">2024-01-15</td>\r\n                                    <td class=\"px-4 py-4\">\r\n                                        <button class=\"text-primary hover:text-primary-dark mr-2\"><i\r\n                                                class=\"fas fa-edit\"></i></button>\r\n                                        <button class=\"text-red-500 hover:text-red-600\"><i\r\n                                                class=\"fas fa-trash\"></i></button>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr class=\"border-t\">\r\n                                    <td class=\"px-4 py-4 text-sm\">设计一个商城系统</td>\r\n                                    <td class=\"px-4 py-4\"><span\r\n                                            class=\"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm\">中</span>\r\n                                    </td>\r\n                                    <td class=\"px-4 py-4\"><span\r\n                                            class=\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm\">待审核</span></td>\r\n                                    <td class=\"px-4 py-4 text-sm\">2024-01-14</td>\r\n                                    <td class=\"px-4 py-4\">\r\n                                        <button class=\"text-primary hover:text-primary-dark mr-2\"><i\r\n                                                class=\"fas fa-edit\"></i></button>\r\n                                        <button class=\"text-red-500 hover:text-red-600\"><i\r\n                                                class=\"fas fa-trash\"></i></button>\r\n                                    </td>\r\n                                </tr>\r\n                                <tr class=\"border-t\">\r\n                                    <td class=\"px-4 py-4 text-sm\">设计一个某某系统</td>\r\n                                    <td class=\"px-4 py-4\"><span\r\n                                            class=\"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-sm\">中</span>\r\n                                    </td>\r\n                                    <td class=\"px-4 py-4\"><span\r\n                                            class=\"px-2 py-1 bg-gray-100 text-gray-800 rounded text-sm\">已完成</span></td>\r\n                                    <td class=\"px-4 py-4 text-sm\">2024-01-13</td>\r\n                                    <td class=\"px-4 py-4\">\r\n                                        <button class=\"text-primary hover:text-primary-dark mr-2\"><i\r\n                                                class=\"fas fa-edit\"></i></button>\r\n                                        <button class=\"text-red-500 hover:text-red-600\"><i\r\n                                                class=\"fas fa-trash\"></i></button>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody> -->\r\n                    <thead>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>User ID</th>\r\n                            <th>Name</th>\r\n                            <th>Version</th>\r\n                            <!-- <th>Content</th> -->\r\n                            <th>Created At</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-for=\"requirement in requirements\" :key=\"requirement.id\">\r\n                            <td>{{ requirement.id }}</td>\r\n                            <td>{{ requirement.user_id }}</td>\r\n                            <td>{{ requirement.name }}</td>\r\n                            <td>{{ requirement.version }}</td>\r\n                            <!-- <td>{{ requirement.content }}</td> -->\r\n                            <td>{{ requirement.created_at }}</td>\r\n                            <td class=\"px-4 py-4\">\r\n\r\n                                <button class=\"btn btn-primary btn-sm\"\r\n                                    @click=\"editRequirement(requirement.content)\">Edit</button>\r\n                                <button class=\"btn btn-danger btn-sm\"\r\n                                    @click=\"deleteRequirement(requirement.id)\">Delete</button>\r\n                                    \r\n\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n\r\n            </div>\r\n            <div class=\"modal-backdrop\" v-if=\"isEditModalVisible\">\r\n                <div class=\"modal-content\">\r\n                    <h2>Edit Requirement</h2>\r\n                    <div class=\"mb-3\">\r\n                        <label for=\"editContent\" class=\"form-label\">Content</label>\r\n                        <textarea class=\"form-control\" id=\"editContent\" v-model=\"currentRequirement.content\"></textarea>\r\n                    </div>\r\n                    <div class=\"d-flex justify-content-end\">\r\n                        <button class=\"btn btn-secondary me-2\" @click=\"closeEditModal\">Cancel</button>\r\n                        <button class=\"btn btn-primary\" @click=\"saveRequirement\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"bg-white rounded-lg shadow p-6\">\r\n            <h2 class=\"text-lg font-medium mb-6\">需求统计</h2>\r\n            <div class=\"grid grid-cols-4 gap-6\">\r\n                <div class=\"p-4 bg-blue-50 rounded-lg\">\r\n                    <div class=\"text-blue-600 mb-2\">\r\n                        <i class=\"fas fa-clipboard-list text-xl\"></i>\r\n                    </div>\r\n                    <div class=\"text-2xl font-semibold text-gray-800\">24</div>\r\n                    <div class=\"text-sm text-gray-500\">总需求数</div>\r\n                </div>\r\n                <div class=\"p-4 bg-green-50 rounded-lg\">\r\n                    <div class=\"text-green-600 mb-2\">\r\n                        <i class=\"fas fa-check-circle text-xl\"></i>\r\n                    </div>\r\n                    <div class=\"text-2xl font-semibold text-gray-800\">18</div>\r\n                    <div class=\"text-sm text-gray-500\">已完成</div>\r\n                </div>\r\n                <div class=\"p-4 bg-yellow-50 rounded-lg\">\r\n                    <div class=\"text-yellow-600 mb-2\">\r\n                        <i class=\"fas fa-clock text-xl\"></i>\r\n                    </div>\r\n                    <div class=\"text-2xl font-semibold text-gray-800\">4</div>\r\n                    <div class=\"text-sm text-gray-500\">进行中</div>\r\n                </div>\r\n                <div class=\"p-4 bg-red-50 rounded-lg\">\r\n                    <div class=\"text-red-600 mb-2\">\r\n                        <i class=\"fas fa-exclamation-circle text-xl\"></i>\r\n                    </div>\r\n                    <div class=\"text-2xl font-semibold text-gray-800\">2</div>\r\n                    <div class=\"text-sm text-gray-500\">待处理</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\n\r\n\r\nconst requirements = ref([]);\r\nconst newRequirement = ref('');\r\nconst showModal = ref(false);\r\nconst editing = ref(false);\r\nconst editingId = ref(null);\r\n\r\nconst fetchRequirements = async () => {\r\n    try {\r\n        const response = await axios.get('http://127.0.0.1:5000/api/requirements');\r\n        requirements.value = response.data;\r\n    } catch (error) {\r\n        console.error('Error fetching requirements:', error);\r\n    }\r\n};\r\n\r\n// const showModalForAdd = () => {\r\n//     newRequirement.value = '';\r\n//     editing.value = false;\r\n//     showModal.value = true;\r\n// };\r\n\r\nconst editRequirement = (requirement) => {\r\n    newRequirement.value = requirement.content;\r\n    editing.value = true;\r\n    editingId.value = requirement.id;\r\n    showModal.value = true;\r\n};\r\n\r\n// const closeModal = () => {\r\n//     showModal.value = false;\r\n// };\r\n\r\n// const saveRequirement = async () => {\r\n//     try {\r\n//         if (editing.value) {\r\n//             await axios.put(`/api/requirements/${editingId.value}`, { content: newRequirement.value });\r\n//         } else {\r\n//             await axios.post('/api/requirements', { content: newRequirement.value });\r\n//         }\r\n//         await fetchRequirements();\r\n//         closeModal();\r\n//     } catch (error) {\r\n//         console.error('Error saving requirement:', error);\r\n//     }\r\n// };\r\n\r\n// const deleteRequirement = async (id) => {\r\n//     try {\r\n//         await axios.delete(`/api/requirements/${id}`);\r\n//         await fetchRequirements();\r\n//     } catch (error) {\r\n//         console.error('Error deleting requirement:', error);\r\n//     }\r\n// };\r\n\r\nonMounted(() => {\r\n    fetchRequirements();\r\n});\r\n// export default {\r\n//     setup() {\r\n//         const requirements = ref([]);\r\n\r\n//         onMounted(() => {\r\n//             axios.get('http://127.0.0.1:5000/api/requirements')\r\n//                 .then(response => {\r\n//                     requirements.value = response.data;\r\n//                 })\r\n//                 .catch(error => {\r\n//                     console.error('There was an error!', error);\r\n//                 });\r\n//         });\r\n\r\n//         return {\r\n//             requirements\r\n//         };\r\n//     }\r\n    \r\n// };\r\n</script>\r\n\r\n<style>\r\n.modal-backdrop {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n    background-color: white;\r\n    padding: 20px;\r\n    border-radius: 5px;\r\n    width: 50%;\r\n    max-width: 600px;\r\n}\r\n\r\n.hidden {\r\n    display: none;\r\n}\r\n</style>"],"mappings":"AAuJA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAK;AACpC,OAAOC,KAAI,MAAO,OAAO;AAGzB,MAAMC,YAAW,GAAIH,GAAG,CAAC,EAAE,CAAC;AAC5B,MAAMI,cAAa,GAAIJ,GAAG,CAAC,EAAE,CAAC;AAC9B,MAAMK,SAAQ,GAAIL,GAAG,CAAC,KAAK,CAAC;AAC5B,MAAMM,OAAM,GAAIN,GAAG,CAAC,KAAK,CAAC;AAC1B,MAAMO,SAAQ,GAAIP,GAAG,CAAC,IAAI,CAAC;AAE3B,MAAMQ,iBAAgB,GAAI,MAAAA,CAAA,KAAY;EAClC,IAAI;IACA,MAAMC,QAAO,GAAI,MAAMP,KAAK,CAACQ,GAAG,CAAC,wCAAwC,CAAC;IAC1EP,YAAY,CAACQ,KAAI,GAAIF,QAAQ,CAACG,IAAI;EACtC,EAAE,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;EACxD;AACJ,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA,MAAME,eAAc,GAAKC,WAAW,IAAK;EACrCZ,cAAc,CAACO,KAAI,GAAIK,WAAW,CAACC,OAAO;EAC1CX,OAAO,CAACK,KAAI,GAAI,IAAI;EACpBJ,SAAS,CAACI,KAAI,GAAIK,WAAW,CAACE,EAAE;EAChCb,SAAS,CAACM,KAAI,GAAI,IAAI;AAC1B,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAV,SAAS,CAAC,MAAM;EACZO,iBAAiB,CAAC,CAAC;AACvB,CAAC,CAAC;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}