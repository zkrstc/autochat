{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as _ from 'lodash-es';\nimport { Graph } from '../graphlib/index.js';\nimport { addBorderSegments } from './add-border-segments.js';\nimport * as coordinateSystem from './coordinate-system.js';\nimport * as acyclic from './acyclic.js';\nimport * as normalize from './normalize.js';\nimport { rank } from './rank/index.js';\nimport * as nestingGraph from './nesting-graph.js';\nimport { order } from './order/index.js';\nimport { parentDummyChains } from './parent-dummy-chains.js';\nimport { position } from './position/index.js';\nimport * as util from './util.js';\nexport { layout };\nfunction layout(g, opts) {\n  var time = opts && opts.debugTiming ? util.time : util.notime;\n  time('layout', () => {\n    var layoutGraph = time('  buildLayoutGraph', () => buildLayoutGraph(g));\n    time('  runLayout', () => runLayout(layoutGraph, time));\n    time('  updateInputGraph', () => updateInputGraph(g, layoutGraph));\n  });\n}\nfunction runLayout(g, time) {\n  time('    makeSpaceForEdgeLabels', () => makeSpaceForEdgeLabels(g));\n  time('    removeSelfEdges', () => removeSelfEdges(g));\n  time('    acyclic', () => acyclic.run(g));\n  time('    nestingGraph.run', () => nestingGraph.run(g));\n  time('    rank', () => rank(util.asNonCompoundGraph(g)));\n  time('    injectEdgeLabelProxies', () => injectEdgeLabelProxies(g));\n  time('    removeEmptyRanks', () => util.removeEmptyRanks(g));\n  time('    nestingGraph.cleanup', () => nestingGraph.cleanup(g));\n  time('    normalizeRanks', () => util.normalizeRanks(g));\n  time('    assignRankMinMax', () => assignRankMinMax(g));\n  time('    removeEdgeLabelProxies', () => removeEdgeLabelProxies(g));\n  time('    normalize.run', () => normalize.run(g));\n  time('    parentDummyChains', () => parentDummyChains(g));\n  time('    addBorderSegments', () => addBorderSegments(g));\n  time('    order', () => order(g));\n  time('    insertSelfEdges', () => insertSelfEdges(g));\n  time('    adjustCoordinateSystem', () => coordinateSystem.adjust(g));\n  time('    position', () => position(g));\n  time('    positionSelfEdges', () => positionSelfEdges(g));\n  time('    removeBorderNodes', () => removeBorderNodes(g));\n  time('    normalize.undo', () => normalize.undo(g));\n  time('    fixupEdgeLabelCoords', () => fixupEdgeLabelCoords(g));\n  time('    undoCoordinateSystem', () => coordinateSystem.undo(g));\n  time('    translateGraph', () => translateGraph(g));\n  time('    assignNodeIntersects', () => assignNodeIntersects(g));\n  time('    reversePoints', () => reversePointsForReversedEdges(g));\n  time('    acyclic.undo', () => acyclic.undo(g));\n}\n\n/*\n * Copies final layout information from the layout graph back to the input\n * graph. This process only copies whitelisted attributes from the layout graph\n * to the input graph, so it serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction updateInputGraph(inputGraph, layoutGraph) {\n  _.forEach(inputGraph.nodes(), function (v) {\n    var inputLabel = inputGraph.node(v);\n    var layoutLabel = layoutGraph.node(v);\n    if (inputLabel) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n      if (layoutGraph.children(v).length) {\n        inputLabel.width = layoutLabel.width;\n        inputLabel.height = layoutLabel.height;\n      }\n    }\n  });\n  _.forEach(inputGraph.edges(), function (e) {\n    var inputLabel = inputGraph.edge(e);\n    var layoutLabel = layoutGraph.edge(e);\n    inputLabel.points = layoutLabel.points;\n    if (Object.prototype.hasOwnProperty.call(layoutLabel, 'x')) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n    }\n  });\n  inputGraph.graph().width = layoutGraph.graph().width;\n  inputGraph.graph().height = layoutGraph.graph().height;\n}\nvar graphNumAttrs = ['nodesep', 'edgesep', 'ranksep', 'marginx', 'marginy'];\nvar graphDefaults = {\n  ranksep: 50,\n  edgesep: 20,\n  nodesep: 50,\n  rankdir: 'tb'\n};\nvar graphAttrs = ['acyclicer', 'ranker', 'rankdir', 'align'];\nvar nodeNumAttrs = ['width', 'height'];\nvar nodeDefaults = {\n  width: 0,\n  height: 0\n};\nvar edgeNumAttrs = ['minlen', 'weight', 'width', 'height', 'labeloffset'];\nvar edgeDefaults = {\n  minlen: 1,\n  weight: 1,\n  width: 0,\n  height: 0,\n  labeloffset: 10,\n  labelpos: 'r'\n};\nvar edgeAttrs = ['labelpos'];\n\n/*\n * Constructs a new graph from the input graph, which can be used for layout.\n * This process copies only whitelisted attributes from the input graph to the\n * layout graph. Thus this function serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction buildLayoutGraph(inputGraph) {\n  var g = new Graph({\n    multigraph: true,\n    compound: true\n  });\n  var graph = canonicalize(inputGraph.graph());\n  g.setGraph(_.merge({}, graphDefaults, selectNumberAttrs(graph, graphNumAttrs), _.pick(graph, graphAttrs)));\n  _.forEach(inputGraph.nodes(), function (v) {\n    var node = canonicalize(inputGraph.node(v));\n    g.setNode(v, _.defaults(selectNumberAttrs(node, nodeNumAttrs), nodeDefaults));\n    g.setParent(v, inputGraph.parent(v));\n  });\n  _.forEach(inputGraph.edges(), function (e) {\n    var edge = canonicalize(inputGraph.edge(e));\n    g.setEdge(e, _.merge({}, edgeDefaults, selectNumberAttrs(edge, edgeNumAttrs), _.pick(edge, edgeAttrs)));\n  });\n  return g;\n}\n\n/*\n * This idea comes from the Gansner paper: to account for edge labels in our\n * layout we split each rank in half by doubling minlen and halving ranksep.\n * Then we can place labels at these mid-points between nodes.\n *\n * We also add some minimal padding to the width to push the label for the edge\n * away from the edge itself a bit.\n */\nfunction makeSpaceForEdgeLabels(g) {\n  var graph = g.graph();\n  graph.ranksep /= 2;\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    edge.minlen *= 2;\n    if (edge.labelpos.toLowerCase() !== 'c') {\n      if (graph.rankdir === 'TB' || graph.rankdir === 'BT') {\n        edge.width += edge.labeloffset;\n      } else {\n        edge.height += edge.labeloffset;\n      }\n    }\n  });\n}\n\n/*\n * Creates temporary dummy nodes that capture the rank in which each edge's\n * label is going to, if it has one of non-zero width and height. We do this\n * so that we can safely remove empty ranks while preserving balance for the\n * label's position.\n */\nfunction injectEdgeLabelProxies(g) {\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    if (edge.width && edge.height) {\n      var v = g.node(e.v);\n      var w = g.node(e.w);\n      var label = {\n        rank: (w.rank - v.rank) / 2 + v.rank,\n        e: e\n      };\n      util.addDummyNode(g, 'edge-proxy', label, '_ep');\n    }\n  });\n}\nfunction assignRankMinMax(g) {\n  var maxRank = 0;\n  _.forEach(g.nodes(), function (v) {\n    var node = g.node(v);\n    if (node.borderTop) {\n      node.minRank = g.node(node.borderTop).rank;\n      node.maxRank = g.node(node.borderBottom).rank;\n      // @ts-expect-error\n      maxRank = _.max(maxRank, node.maxRank);\n    }\n  });\n  g.graph().maxRank = maxRank;\n}\nfunction removeEdgeLabelProxies(g) {\n  _.forEach(g.nodes(), function (v) {\n    var node = g.node(v);\n    if (node.dummy === 'edge-proxy') {\n      g.edge(node.e).labelRank = node.rank;\n      g.removeNode(v);\n    }\n  });\n}\nfunction translateGraph(g) {\n  var minX = Number.POSITIVE_INFINITY;\n  var maxX = 0;\n  var minY = Number.POSITIVE_INFINITY;\n  var maxY = 0;\n  var graphLabel = g.graph();\n  var marginX = graphLabel.marginx || 0;\n  var marginY = graphLabel.marginy || 0;\n  function getExtremes(attrs) {\n    var x = attrs.x;\n    var y = attrs.y;\n    var w = attrs.width;\n    var h = attrs.height;\n    minX = Math.min(minX, x - w / 2);\n    maxX = Math.max(maxX, x + w / 2);\n    minY = Math.min(minY, y - h / 2);\n    maxY = Math.max(maxY, y + h / 2);\n  }\n  _.forEach(g.nodes(), function (v) {\n    getExtremes(g.node(v));\n  });\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    if (Object.prototype.hasOwnProperty.call(edge, 'x')) {\n      getExtremes(edge);\n    }\n  });\n  minX -= marginX;\n  minY -= marginY;\n  _.forEach(g.nodes(), function (v) {\n    var node = g.node(v);\n    node.x -= minX;\n    node.y -= minY;\n  });\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    _.forEach(edge.points, function (p) {\n      p.x -= minX;\n      p.y -= minY;\n    });\n    if (Object.prototype.hasOwnProperty.call(edge, 'x')) {\n      edge.x -= minX;\n    }\n    if (Object.prototype.hasOwnProperty.call(edge, 'y')) {\n      edge.y -= minY;\n    }\n  });\n  graphLabel.width = maxX - minX + marginX;\n  graphLabel.height = maxY - minY + marginY;\n}\nfunction assignNodeIntersects(g) {\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    var nodeV = g.node(e.v);\n    var nodeW = g.node(e.w);\n    var p1, p2;\n    if (!edge.points) {\n      edge.points = [];\n      p1 = nodeW;\n      p2 = nodeV;\n    } else {\n      p1 = edge.points[0];\n      p2 = edge.points[edge.points.length - 1];\n    }\n    edge.points.unshift(util.intersectRect(nodeV, p1));\n    edge.points.push(util.intersectRect(nodeW, p2));\n  });\n}\nfunction fixupEdgeLabelCoords(g) {\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    if (Object.prototype.hasOwnProperty.call(edge, 'x')) {\n      if (edge.labelpos === 'l' || edge.labelpos === 'r') {\n        edge.width -= edge.labeloffset;\n      }\n      switch (edge.labelpos) {\n        case 'l':\n          edge.x -= edge.width / 2 + edge.labeloffset;\n          break;\n        case 'r':\n          edge.x += edge.width / 2 + edge.labeloffset;\n          break;\n      }\n    }\n  });\n}\nfunction reversePointsForReversedEdges(g) {\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    if (edge.reversed) {\n      edge.points.reverse();\n    }\n  });\n}\nfunction removeBorderNodes(g) {\n  _.forEach(g.nodes(), function (v) {\n    if (g.children(v).length) {\n      var node = g.node(v);\n      var t = g.node(node.borderTop);\n      var b = g.node(node.borderBottom);\n      var l = g.node(_.last(node.borderLeft));\n      var r = g.node(_.last(node.borderRight));\n      node.width = Math.abs(r.x - l.x);\n      node.height = Math.abs(b.y - t.y);\n      node.x = l.x + node.width / 2;\n      node.y = t.y + node.height / 2;\n    }\n  });\n  _.forEach(g.nodes(), function (v) {\n    if (g.node(v).dummy === 'border') {\n      g.removeNode(v);\n    }\n  });\n}\nfunction removeSelfEdges(g) {\n  _.forEach(g.edges(), function (e) {\n    if (e.v === e.w) {\n      var node = g.node(e.v);\n      if (!node.selfEdges) {\n        node.selfEdges = [];\n      }\n      node.selfEdges.push({\n        e: e,\n        label: g.edge(e)\n      });\n      g.removeEdge(e);\n    }\n  });\n}\nfunction insertSelfEdges(g) {\n  var layers = util.buildLayerMatrix(g);\n  _.forEach(layers, function (layer) {\n    var orderShift = 0;\n    _.forEach(layer, function (v, i) {\n      var node = g.node(v);\n      node.order = i + orderShift;\n      _.forEach(node.selfEdges, function (selfEdge) {\n        util.addDummyNode(g, 'selfedge', {\n          width: selfEdge.label.width,\n          height: selfEdge.label.height,\n          rank: node.rank,\n          order: i + ++orderShift,\n          e: selfEdge.e,\n          label: selfEdge.label\n        }, '_se');\n      });\n      delete node.selfEdges;\n    });\n  });\n}\nfunction positionSelfEdges(g) {\n  _.forEach(g.nodes(), function (v) {\n    var node = g.node(v);\n    if (node.dummy === 'selfedge') {\n      var selfNode = g.node(node.e.v);\n      var x = selfNode.x + selfNode.width / 2;\n      var y = selfNode.y;\n      var dx = node.x - x;\n      var dy = selfNode.height / 2;\n      g.setEdge(node.e, node.label);\n      g.removeNode(v);\n      node.label.points = [{\n        x: x + 2 * dx / 3,\n        y: y - dy\n      }, {\n        x: x + 5 * dx / 6,\n        y: y - dy\n      }, {\n        x: x + dx,\n        y: y\n      }, {\n        x: x + 5 * dx / 6,\n        y: y + dy\n      }, {\n        x: x + 2 * dx / 3,\n        y: y + dy\n      }];\n      node.label.x = node.x;\n      node.label.y = node.y;\n    }\n  });\n}\nfunction selectNumberAttrs(obj, attrs) {\n  return _.mapValues(_.pick(obj, attrs), Number);\n}\nfunction canonicalize(attrs) {\n  var newAttrs = {};\n  _.forEach(attrs, function (v, k) {\n    newAttrs[k.toLowerCase()] = v;\n  });\n  return newAttrs;\n}","map":{"version":3,"names":["_","Graph","addBorderSegments","coordinateSystem","acyclic","normalize","rank","nestingGraph","order","parentDummyChains","position","util","layout","g","opts","time","debugTiming","notime","layoutGraph","buildLayoutGraph","runLayout","updateInputGraph","makeSpaceForEdgeLabels","removeSelfEdges","run","asNonCompoundGraph","injectEdgeLabelProxies","removeEmptyRanks","cleanup","normalizeRanks","assignRankMinMax","removeEdgeLabelProxies","insertSelfEdges","adjust","positionSelfEdges","removeBorderNodes","undo","fixupEdgeLabelCoords","translateGraph","assignNodeIntersects","reversePointsForReversedEdges","inputGraph","forEach","nodes","v","inputLabel","node","layoutLabel","x","y","children","length","width","height","edges","e","edge","points","Object","prototype","hasOwnProperty","call","graph","graphNumAttrs","graphDefaults","ranksep","edgesep","nodesep","rankdir","graphAttrs","nodeNumAttrs","nodeDefaults","edgeNumAttrs","edgeDefaults","minlen","weight","labeloffset","labelpos","edgeAttrs","multigraph","compound","canonicalize","setGraph","merge","selectNumberAttrs","pick","setNode","defaults","setParent","parent","setEdge","toLowerCase","w","label","addDummyNode","maxRank","borderTop","minRank","borderBottom","max","dummy","labelRank","removeNode","minX","Number","POSITIVE_INFINITY","maxX","minY","maxY","graphLabel","marginX","marginx","marginY","marginy","getExtremes","attrs","h","Math","min","p","nodeV","nodeW","p1","p2","unshift","intersectRect","push","reversed","reverse","t","b","l","last","borderLeft","r","borderRight","abs","selfEdges","removeEdge","layers","buildLayerMatrix","layer","orderShift","i","selfEdge","selfNode","dx","dy","obj","mapValues","newAttrs","k"],"sources":["C:/Users/ASUS/Desktop/autochat/frontend/node_modules/dagre-d3-es/src/dagre/layout.js"],"sourcesContent":["import * as _ from 'lodash-es';\nimport { Graph } from '../graphlib/index.js';\nimport { addBorderSegments } from './add-border-segments.js';\nimport * as coordinateSystem from './coordinate-system.js';\nimport * as acyclic from './acyclic.js';\nimport * as normalize from './normalize.js';\nimport { rank } from './rank/index.js';\nimport * as nestingGraph from './nesting-graph.js';\nimport { order } from './order/index.js';\nimport { parentDummyChains } from './parent-dummy-chains.js';\nimport { position } from './position/index.js';\nimport * as util from './util.js';\n\nexport { layout };\n\nfunction layout(g, opts) {\n  var time = opts && opts.debugTiming ? util.time : util.notime;\n  time('layout', () => {\n    var layoutGraph = time('  buildLayoutGraph', () => buildLayoutGraph(g));\n    time('  runLayout', () => runLayout(layoutGraph, time));\n    time('  updateInputGraph', () => updateInputGraph(g, layoutGraph));\n  });\n}\n\nfunction runLayout(g, time) {\n  time('    makeSpaceForEdgeLabels', () => makeSpaceForEdgeLabels(g));\n  time('    removeSelfEdges', () => removeSelfEdges(g));\n  time('    acyclic', () => acyclic.run(g));\n  time('    nestingGraph.run', () => nestingGraph.run(g));\n  time('    rank', () => rank(util.asNonCompoundGraph(g)));\n  time('    injectEdgeLabelProxies', () => injectEdgeLabelProxies(g));\n  time('    removeEmptyRanks', () => util.removeEmptyRanks(g));\n  time('    nestingGraph.cleanup', () => nestingGraph.cleanup(g));\n  time('    normalizeRanks', () => util.normalizeRanks(g));\n  time('    assignRankMinMax', () => assignRankMinMax(g));\n  time('    removeEdgeLabelProxies', () => removeEdgeLabelProxies(g));\n  time('    normalize.run', () => normalize.run(g));\n  time('    parentDummyChains', () => parentDummyChains(g));\n  time('    addBorderSegments', () => addBorderSegments(g));\n  time('    order', () => order(g));\n  time('    insertSelfEdges', () => insertSelfEdges(g));\n  time('    adjustCoordinateSystem', () => coordinateSystem.adjust(g));\n  time('    position', () => position(g));\n  time('    positionSelfEdges', () => positionSelfEdges(g));\n  time('    removeBorderNodes', () => removeBorderNodes(g));\n  time('    normalize.undo', () => normalize.undo(g));\n  time('    fixupEdgeLabelCoords', () => fixupEdgeLabelCoords(g));\n  time('    undoCoordinateSystem', () => coordinateSystem.undo(g));\n  time('    translateGraph', () => translateGraph(g));\n  time('    assignNodeIntersects', () => assignNodeIntersects(g));\n  time('    reversePoints', () => reversePointsForReversedEdges(g));\n  time('    acyclic.undo', () => acyclic.undo(g));\n}\n\n/*\n * Copies final layout information from the layout graph back to the input\n * graph. This process only copies whitelisted attributes from the layout graph\n * to the input graph, so it serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction updateInputGraph(inputGraph, layoutGraph) {\n  _.forEach(inputGraph.nodes(), function (v) {\n    var inputLabel = inputGraph.node(v);\n    var layoutLabel = layoutGraph.node(v);\n\n    if (inputLabel) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n\n      if (layoutGraph.children(v).length) {\n        inputLabel.width = layoutLabel.width;\n        inputLabel.height = layoutLabel.height;\n      }\n    }\n  });\n\n  _.forEach(inputGraph.edges(), function (e) {\n    var inputLabel = inputGraph.edge(e);\n    var layoutLabel = layoutGraph.edge(e);\n\n    inputLabel.points = layoutLabel.points;\n    if (Object.prototype.hasOwnProperty.call(layoutLabel, 'x')) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n    }\n  });\n\n  inputGraph.graph().width = layoutGraph.graph().width;\n  inputGraph.graph().height = layoutGraph.graph().height;\n}\n\nvar graphNumAttrs = ['nodesep', 'edgesep', 'ranksep', 'marginx', 'marginy'];\nvar graphDefaults = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: 'tb' };\nvar graphAttrs = ['acyclicer', 'ranker', 'rankdir', 'align'];\nvar nodeNumAttrs = ['width', 'height'];\nvar nodeDefaults = { width: 0, height: 0 };\nvar edgeNumAttrs = ['minlen', 'weight', 'width', 'height', 'labeloffset'];\nvar edgeDefaults = {\n  minlen: 1,\n  weight: 1,\n  width: 0,\n  height: 0,\n  labeloffset: 10,\n  labelpos: 'r',\n};\nvar edgeAttrs = ['labelpos'];\n\n/*\n * Constructs a new graph from the input graph, which can be used for layout.\n * This process copies only whitelisted attributes from the input graph to the\n * layout graph. Thus this function serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction buildLayoutGraph(inputGraph) {\n  var g = new Graph({ multigraph: true, compound: true });\n  var graph = canonicalize(inputGraph.graph());\n\n  g.setGraph(\n    _.merge({}, graphDefaults, selectNumberAttrs(graph, graphNumAttrs), _.pick(graph, graphAttrs)),\n  );\n\n  _.forEach(inputGraph.nodes(), function (v) {\n    var node = canonicalize(inputGraph.node(v));\n    g.setNode(v, _.defaults(selectNumberAttrs(node, nodeNumAttrs), nodeDefaults));\n    g.setParent(v, inputGraph.parent(v));\n  });\n\n  _.forEach(inputGraph.edges(), function (e) {\n    var edge = canonicalize(inputGraph.edge(e));\n    g.setEdge(\n      e,\n      _.merge({}, edgeDefaults, selectNumberAttrs(edge, edgeNumAttrs), _.pick(edge, edgeAttrs)),\n    );\n  });\n\n  return g;\n}\n\n/*\n * This idea comes from the Gansner paper: to account for edge labels in our\n * layout we split each rank in half by doubling minlen and halving ranksep.\n * Then we can place labels at these mid-points between nodes.\n *\n * We also add some minimal padding to the width to push the label for the edge\n * away from the edge itself a bit.\n */\nfunction makeSpaceForEdgeLabels(g) {\n  var graph = g.graph();\n  graph.ranksep /= 2;\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    edge.minlen *= 2;\n    if (edge.labelpos.toLowerCase() !== 'c') {\n      if (graph.rankdir === 'TB' || graph.rankdir === 'BT') {\n        edge.width += edge.labeloffset;\n      } else {\n        edge.height += edge.labeloffset;\n      }\n    }\n  });\n}\n\n/*\n * Creates temporary dummy nodes that capture the rank in which each edge's\n * label is going to, if it has one of non-zero width and height. We do this\n * so that we can safely remove empty ranks while preserving balance for the\n * label's position.\n */\nfunction injectEdgeLabelProxies(g) {\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    if (edge.width && edge.height) {\n      var v = g.node(e.v);\n      var w = g.node(e.w);\n      var label = { rank: (w.rank - v.rank) / 2 + v.rank, e: e };\n      util.addDummyNode(g, 'edge-proxy', label, '_ep');\n    }\n  });\n}\n\nfunction assignRankMinMax(g) {\n  var maxRank = 0;\n  _.forEach(g.nodes(), function (v) {\n    var node = g.node(v);\n    if (node.borderTop) {\n      node.minRank = g.node(node.borderTop).rank;\n      node.maxRank = g.node(node.borderBottom).rank;\n      // @ts-expect-error\n      maxRank = _.max(maxRank, node.maxRank);\n    }\n  });\n  g.graph().maxRank = maxRank;\n}\n\nfunction removeEdgeLabelProxies(g) {\n  _.forEach(g.nodes(), function (v) {\n    var node = g.node(v);\n    if (node.dummy === 'edge-proxy') {\n      g.edge(node.e).labelRank = node.rank;\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction translateGraph(g) {\n  var minX = Number.POSITIVE_INFINITY;\n  var maxX = 0;\n  var minY = Number.POSITIVE_INFINITY;\n  var maxY = 0;\n  var graphLabel = g.graph();\n  var marginX = graphLabel.marginx || 0;\n  var marginY = graphLabel.marginy || 0;\n\n  function getExtremes(attrs) {\n    var x = attrs.x;\n    var y = attrs.y;\n    var w = attrs.width;\n    var h = attrs.height;\n    minX = Math.min(minX, x - w / 2);\n    maxX = Math.max(maxX, x + w / 2);\n    minY = Math.min(minY, y - h / 2);\n    maxY = Math.max(maxY, y + h / 2);\n  }\n\n  _.forEach(g.nodes(), function (v) {\n    getExtremes(g.node(v));\n  });\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    if (Object.prototype.hasOwnProperty.call(edge, 'x')) {\n      getExtremes(edge);\n    }\n  });\n\n  minX -= marginX;\n  minY -= marginY;\n\n  _.forEach(g.nodes(), function (v) {\n    var node = g.node(v);\n    node.x -= minX;\n    node.y -= minY;\n  });\n\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    _.forEach(edge.points, function (p) {\n      p.x -= minX;\n      p.y -= minY;\n    });\n    if (Object.prototype.hasOwnProperty.call(edge, 'x')) {\n      edge.x -= minX;\n    }\n    if (Object.prototype.hasOwnProperty.call(edge, 'y')) {\n      edge.y -= minY;\n    }\n  });\n\n  graphLabel.width = maxX - minX + marginX;\n  graphLabel.height = maxY - minY + marginY;\n}\n\nfunction assignNodeIntersects(g) {\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    var nodeV = g.node(e.v);\n    var nodeW = g.node(e.w);\n    var p1, p2;\n    if (!edge.points) {\n      edge.points = [];\n      p1 = nodeW;\n      p2 = nodeV;\n    } else {\n      p1 = edge.points[0];\n      p2 = edge.points[edge.points.length - 1];\n    }\n    edge.points.unshift(util.intersectRect(nodeV, p1));\n    edge.points.push(util.intersectRect(nodeW, p2));\n  });\n}\n\nfunction fixupEdgeLabelCoords(g) {\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    if (Object.prototype.hasOwnProperty.call(edge, 'x')) {\n      if (edge.labelpos === 'l' || edge.labelpos === 'r') {\n        edge.width -= edge.labeloffset;\n      }\n      switch (edge.labelpos) {\n        case 'l':\n          edge.x -= edge.width / 2 + edge.labeloffset;\n          break;\n        case 'r':\n          edge.x += edge.width / 2 + edge.labeloffset;\n          break;\n      }\n    }\n  });\n}\n\nfunction reversePointsForReversedEdges(g) {\n  _.forEach(g.edges(), function (e) {\n    var edge = g.edge(e);\n    if (edge.reversed) {\n      edge.points.reverse();\n    }\n  });\n}\n\nfunction removeBorderNodes(g) {\n  _.forEach(g.nodes(), function (v) {\n    if (g.children(v).length) {\n      var node = g.node(v);\n      var t = g.node(node.borderTop);\n      var b = g.node(node.borderBottom);\n      var l = g.node(_.last(node.borderLeft));\n      var r = g.node(_.last(node.borderRight));\n\n      node.width = Math.abs(r.x - l.x);\n      node.height = Math.abs(b.y - t.y);\n      node.x = l.x + node.width / 2;\n      node.y = t.y + node.height / 2;\n    }\n  });\n\n  _.forEach(g.nodes(), function (v) {\n    if (g.node(v).dummy === 'border') {\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction removeSelfEdges(g) {\n  _.forEach(g.edges(), function (e) {\n    if (e.v === e.w) {\n      var node = g.node(e.v);\n      if (!node.selfEdges) {\n        node.selfEdges = [];\n      }\n      node.selfEdges.push({ e: e, label: g.edge(e) });\n      g.removeEdge(e);\n    }\n  });\n}\n\nfunction insertSelfEdges(g) {\n  var layers = util.buildLayerMatrix(g);\n  _.forEach(layers, function (layer) {\n    var orderShift = 0;\n    _.forEach(layer, function (v, i) {\n      var node = g.node(v);\n      node.order = i + orderShift;\n      _.forEach(node.selfEdges, function (selfEdge) {\n        util.addDummyNode(\n          g,\n          'selfedge',\n          {\n            width: selfEdge.label.width,\n            height: selfEdge.label.height,\n            rank: node.rank,\n            order: i + ++orderShift,\n            e: selfEdge.e,\n            label: selfEdge.label,\n          },\n          '_se',\n        );\n      });\n      delete node.selfEdges;\n    });\n  });\n}\n\nfunction positionSelfEdges(g) {\n  _.forEach(g.nodes(), function (v) {\n    var node = g.node(v);\n    if (node.dummy === 'selfedge') {\n      var selfNode = g.node(node.e.v);\n      var x = selfNode.x + selfNode.width / 2;\n      var y = selfNode.y;\n      var dx = node.x - x;\n      var dy = selfNode.height / 2;\n      g.setEdge(node.e, node.label);\n      g.removeNode(v);\n      node.label.points = [\n        { x: x + (2 * dx) / 3, y: y - dy },\n        { x: x + (5 * dx) / 6, y: y - dy },\n        { x: x + dx, y: y },\n        { x: x + (5 * dx) / 6, y: y + dy },\n        { x: x + (2 * dx) / 3, y: y + dy },\n      ];\n      node.label.x = node.x;\n      node.label.y = node.y;\n    }\n  });\n}\n\nfunction selectNumberAttrs(obj, attrs) {\n  return _.mapValues(_.pick(obj, attrs), Number);\n}\n\nfunction canonicalize(attrs) {\n  var newAttrs = {};\n  _.forEach(attrs, function (v, k) {\n    newAttrs[k.toLowerCase()] = v;\n  });\n  return newAttrs;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}