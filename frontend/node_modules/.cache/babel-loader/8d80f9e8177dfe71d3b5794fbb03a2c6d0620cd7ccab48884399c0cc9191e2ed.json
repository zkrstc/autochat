{"ast":null,"code":"import { TinyColor } from '@ctrl/tinycolor';\nimport { hasOwn } from '@vue/shared';\nclass Color {\n  constructor(options = {}) {\n    this._hue = 0;\n    this._saturation = 100;\n    this._value = 100;\n    this._alpha = 100;\n    this._tiny = new TinyColor();\n    this._isValid = false;\n    this.enableAlpha = false;\n    this.format = \"\";\n    this.value = \"\";\n    for (const option in options) {\n      if (hasOwn(options, option)) {\n        this[option] = options[option];\n      }\n    }\n    if (options.value) {\n      this.fromString(options.value);\n    } else {\n      this.doOnChange();\n    }\n  }\n  set(prop, value) {\n    if (arguments.length === 1 && typeof prop === \"object\") {\n      for (const p in prop) {\n        if (hasOwn(prop, p)) {\n          this.set(p, prop[p]);\n        }\n      }\n      return;\n    }\n    this[`_${prop}`] = value;\n    this._isValid = true;\n    this.doOnChange();\n  }\n  get(prop) {\n    if ([\"hue\", \"saturation\", \"value\", \"alpha\"].includes(prop)) {\n      return Math.round(this[`_${prop}`]);\n    }\n    return this[`_${prop}`];\n  }\n  toRgb() {\n    return this._isValid ? this._tiny.toRgb() : {\n      r: 255,\n      g: 255,\n      b: 255,\n      a: 0\n    };\n  }\n  fromString(value) {\n    const color = new TinyColor(value);\n    this._isValid = color.isValid;\n    if (color.isValid) {\n      const {\n        h,\n        s,\n        v,\n        a\n      } = color.toHsv();\n      this._hue = h;\n      this._saturation = s * 100;\n      this._value = v * 100;\n      this._alpha = a * 100;\n    } else {\n      this._hue = 0;\n      this._saturation = 100;\n      this._value = 100;\n      this._alpha = 100;\n    }\n    this.doOnChange();\n  }\n  compare(color) {\n    const compareColor = new TinyColor({\n      h: color._hue,\n      s: color._saturation / 100,\n      v: color._value / 100,\n      a: color._alpha / 100\n    });\n    return this._tiny.equals(compareColor);\n  }\n  doOnChange() {\n    const {\n      _hue,\n      _saturation,\n      _value,\n      _alpha,\n      format,\n      enableAlpha\n    } = this;\n    let _format = format || (enableAlpha ? \"rgb\" : \"hex\");\n    if (format === \"hex\" && enableAlpha) {\n      _format = \"hex8\";\n    }\n    this._tiny = new TinyColor({\n      h: _hue,\n      s: _saturation / 100,\n      v: _value / 100,\n      a: _alpha / 100\n    });\n    this.value = this._isValid ? this._tiny.toString(_format) : \"\";\n  }\n}\nexport { Color as default };","map":{"version":3,"names":["Color","constructor","options","_hue","_saturation","_value","_alpha","_tiny","TinyColor","_isValid","enableAlpha","format","value","option","hasOwn","fromString","doOnChange","set","prop","arguments","length","p","get","includes","Math","round","toRgb","r","g","b","a","color","isValid","h","s","v","toHsv","compare","compareColor","equals","_format","toString"],"sources":["../../../../../../../packages/components/color-picker/src/utils/color.ts"],"sourcesContent":["import { TinyColor } from '@ctrl/tinycolor'\nimport { hasOwn } from '@element-plus/utils'\nimport type { ColorFormats } from '@ctrl/tinycolor'\n\ninterface ColorOptions {\n  enableAlpha: boolean\n  format: string\n  value?: string\n}\n\nexport default class Color {\n  private _hue = 0\n  private _saturation = 100\n  private _value = 100\n  private _alpha = 100\n  private _tiny = new TinyColor()\n  private _isValid = false\n  public enableAlpha = false\n  public format = ''\n  public value = ''\n  public selected?: boolean\n\n  constructor(options: Partial<ColorOptions> = {}) {\n    for (const option in options) {\n      if (hasOwn(options, option)) {\n        this[option] = options[option]\n      }\n    }\n    if (options.value) {\n      this.fromString(options.value)\n    } else {\n      this.doOnChange()\n    }\n  }\n\n  set(prop: { [key: string]: any } | any, value?: number) {\n    if (arguments.length === 1 && typeof prop === 'object') {\n      for (const p in prop) {\n        if (hasOwn(prop, p)) {\n          this.set(p, prop[p])\n        }\n      }\n\n      return\n    }\n    ;(this as any)[`_${prop}`] = value\n    this._isValid = true\n    this.doOnChange()\n  }\n\n  get(prop: string) {\n    if (['hue', 'saturation', 'value', 'alpha'].includes(prop)) {\n      return Math.round((this as any)[`_${prop}`])\n    }\n    return (this as any)[`_${prop}`]\n  }\n\n  toRgb() {\n    return this._isValid ? this._tiny.toRgb() : { r: 255, g: 255, b: 255, a: 0 }\n  }\n\n  fromString(value: string) {\n    const color = new TinyColor(value)\n    this._isValid = color.isValid\n    if (color.isValid) {\n      const { h, s, v, a } = color.toHsv()\n      this._hue = h\n      this._saturation = s * 100\n      this._value = v * 100\n      this._alpha = a * 100\n    } else {\n      this._hue = 0\n      this._saturation = 100\n      this._value = 100\n      this._alpha = 100\n    }\n    this.doOnChange()\n  }\n\n  compare(color: this) {\n    const compareColor = new TinyColor({\n      h: color._hue,\n      s: color._saturation / 100,\n      v: color._value / 100,\n      a: color._alpha / 100,\n    })\n    return this._tiny.equals(compareColor)\n  }\n\n  doOnChange() {\n    const { _hue, _saturation, _value, _alpha, format, enableAlpha } = this\n    let _format = format || (enableAlpha ? 'rgb' : 'hex')\n    if (format === 'hex' && enableAlpha) {\n      _format = 'hex8'\n    }\n    this._tiny = new TinyColor({\n      h: _hue,\n      s: _saturation / 100,\n      v: _value / 100,\n      a: _alpha / 100,\n    })\n    this.value = this._isValid\n      ? this._tiny.toString(_format as ColorFormats)\n      : ''\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}