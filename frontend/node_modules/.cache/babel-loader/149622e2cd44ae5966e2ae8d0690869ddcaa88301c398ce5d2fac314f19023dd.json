{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, vModelDynamic as _vModelDynamic, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen w-full bg-gray-50 flex items-center justify-center bg-image\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white p-8 rounded-lg shadow-xl w-[420px] relative\"\n};\nconst _hoisted_3 = {\n  class: \"space-y-6\"\n};\nconst _hoisted_4 = {\n  class: \"relative\"\n};\nconst _hoisted_5 = {\n  class: \"relative\"\n};\nconst _hoisted_6 = [\"type\"];\nconst _hoisted_7 = {\n  class: \"flex items-center justify-between text-sm\"\n};\nconst _hoisted_8 = {\n  class: \"flex items-center space-x-2 cursor-pointer\"\n};\nconst _hoisted_9 = {\n  class: \"text-center\"\n};\nconst _hoisted_10 = {\n  class: \"text-gray-500 text-sm\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\"\n};\nconst _hoisted_12 = {\n  class: \"bg-white rounded-lg p-6 w-96 shadow-lg relative\"\n};\nconst _hoisted_13 = {\n  class: \"flex justify-end space-x-3\"\n};\nconst _hoisted_14 = {\n  key: 0,\n  class: \"text-sm text-red-500 mt-2\"\n};\nconst _hoisted_15 = {\n  key: 1,\n  class: \"text-sm text-green-500 mt-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"text-center mb-8\"\n  }, [_createCommentVNode(\" <img src=\\\"https://ai-public.mastergo.com/ai/img_res/726384cc65a0f97c97beb2433acac92d.jpg\\\" alt=\\\"公司标志\\\"\\r\\n                      class=\\\"w-16 h-16 mx-auto mb-4 object-cover\\\"> \"), _createElementVNode(\"h2\", {\n    class: \"text-2xl font-bold text-gray-800\"\n  }, \"欢迎登录\"), _createElementVNode(\"p\", {\n    class: \"text-gray-500 mt-2\"\n  }, \"登录后开启您的专属服务\")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n    placeholder: \"用户名/手机号\",\n    class: \"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-primary text-sm\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.username]]), _createElementVNode(\"i\", {\n    class: _normalizeClass([\"fas fa-times-circle absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer\", {\n      hidden: !$setup.username\n    }]),\n    onClick: $setup.clearUsername\n  }, null, 2 /* CLASS */)]), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n    type: $setup.showPassword ? 'text' : 'password',\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n    placeholder: \"请输入密码\",\n    class: \"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-primary text-sm\"\n  }, null, 8 /* PROPS */, _hoisted_6), [[_vModelDynamic, $setup.password]]), _createElementVNode(\"i\", {\n    class: _normalizeClass([\"fas cursor-pointer absolute right-3 top-1/2 -translate-y-1/2 text-gray-400\", $setup.showPassword ? 'fa-eye-slash' : 'fa-eye']),\n    onClick: $setup.togglePassword\n  }, null, 2 /* CLASS */)]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"label\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    id: \"rememberPassword\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.rememberPassword = $event),\n    class: \"rounded text-primary\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.rememberPassword]]), _cache[7] || (_cache[7] = _createElementVNode(\"span\", {\n    class: \"text-gray-600\"\n  }, \"记住密码\", -1 /* HOISTED */))]), _cache[8] || (_cache[8] = _createElementVNode(\"a\", {\n    href: \"#\",\n    class: \"text-primary hover:text-blue-600\"\n  }, \"忘记密码？\", -1 /* HOISTED */))]), _createElementVNode(\"button\", {\n    onClick: $setup.handleLogin,\n    class: \"w-full bg-primary text-white py-3 rounded-lg hover:bg-blue-600 transition-colors !rounded-button whitespace-nowrap\"\n  }, \" 登录 \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", _hoisted_10, [_cache[9] || (_cache[9] = _createTextVNode(\" 还没有账号？ \")), _createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers($event => $setup.showRegister = true, [\"prevent\"])),\n    class: \"text-primary hover:text-blue-600\"\n  }, \"立即注册\")])])])])]), _createCommentVNode(\" 注册弹窗 \"), $setup.showRegister ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_cache[11] || (_cache[11] = _createElementVNode(\"h2\", {\n    class: \"text-xl font-semibold text-gray-800 mb-4\"\n  }, \"注册新账号\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.registerUsername = $event),\n    type: \"text\",\n    placeholder: \"请输入用户名\",\n    class: \"w-full mb-3 p-2 border rounded\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.registerUsername]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.registerPassword = $event),\n    type: \"password\",\n    placeholder: \"请输入密码\",\n    class: \"w-full mb-4 p-2 border rounded\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.registerPassword]]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = $event => $setup.showRegister = false),\n    class: \"px-4 py-2 text-gray-600 border rounded\"\n  }, \"取消\"), _createElementVNode(\"button\", {\n    onClick: $setup.submitRegister,\n    class: \"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\"\n  }, \"注册\")]), $setup.registerError ? (_openBlock(), _createElementBlock(\"p\", _hoisted_14, _toDisplayString($setup.registerError), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.registerSuccess ? (_openBlock(), _createElementBlock(\"p\", _hoisted_15, _toDisplayString($setup.registerSuccess), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","_hoisted_4","type","id","_cache","$event","$setup","username","placeholder","_normalizeClass","hidden","onClick","clearUsername","_hoisted_5","showPassword","password","_hoisted_6","togglePassword","_hoisted_7","_hoisted_8","rememberPassword","href","handleLogin","_hoisted_9","_hoisted_10","_createTextVNode","_withModifiers","showRegister","_hoisted_11","_hoisted_12","registerUsername","registerPassword","_hoisted_13","submitRegister","registerError","_hoisted_14","_toDisplayString","registerSuccess","_hoisted_15"],"sources":["C:\\Users\\ASUS\\Desktop\\autochat\\frontend\\src\\views\\LoginPage.vue"],"sourcesContent":["<template>\r\n    <div class=\"min-h-screen w-full bg-gray-50 flex items-center justify-center bg-image\">\r\n          <div class=\"bg-white p-8 rounded-lg shadow-xl w-[420px] relative\">\r\n              <div class=\"text-center mb-8\">\r\n                  <!-- <img src=\"https://ai-public.mastergo.com/ai/img_res/726384cc65a0f97c97beb2433acac92d.jpg\" alt=\"公司标志\"\r\n                      class=\"w-16 h-16 mx-auto mb-4 object-cover\"> -->\r\n                  <h2 class=\"text-2xl font-bold text-gray-800\">欢迎登录</h2>\r\n                  <p class=\"text-gray-500 mt-2\">登录后开启您的专属服务</p>\r\n              </div>\r\n      <div class=\"space-y-6\">\r\n        <div class=\"relative\">\r\n          <input\r\n            type=\"text\"\r\n            id=\"username\"\r\n            v-model=\"username\"\r\n            placeholder=\"用户名/手机号\"\r\n            class=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-primary text-sm\"\r\n          />\r\n          <i\r\n            class=\"fas fa-times-circle absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 cursor-pointer\"\r\n            :class=\"{ hidden: !username }\"\r\n            @click=\"clearUsername\"\r\n          ></i>\r\n        </div>\r\n    \r\n        <div class=\"relative\">\r\n          <input\r\n            :type=\"showPassword ? 'text' : 'password'\"\r\n            id=\"password\"\r\n            v-model=\"password\"\r\n            placeholder=\"请输入密码\"\r\n            class=\"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:border-primary text-sm\"\r\n          />\r\n          <i\r\n            class=\"fas cursor-pointer absolute right-3 top-1/2 -translate-y-1/2 text-gray-400\"\r\n            :class=\"showPassword ? 'fa-eye-slash' : 'fa-eye'\"\r\n            @click=\"togglePassword\"\r\n          ></i>\r\n        </div>\r\n    \r\n        <div class=\"flex items-center justify-between text-sm\">\r\n          <label class=\"flex items-center space-x-2 cursor-pointer\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"rememberPassword\"\r\n              v-model=\"rememberPassword\"\r\n              class=\"rounded text-primary\"\r\n            />\r\n            <span class=\"text-gray-600\">记住密码</span>\r\n          </label>\r\n          <a href=\"#\" class=\"text-primary hover:text-blue-600\">忘记密码？</a>\r\n        </div>\r\n    \r\n        <button\r\n          @click=\"handleLogin\"\r\n          class=\"w-full bg-primary text-white py-3 rounded-lg hover:bg-blue-600 transition-colors !rounded-button whitespace-nowrap\"\r\n        >\r\n          登录\r\n        </button>\r\n    \r\n        <div class=\"text-center\">\r\n          <p class=\"text-gray-500 text-sm\">\r\n            还没有账号？\r\n            <a href=\"#\" @click.prevent=\"showRegister = true\" class=\"text-primary hover:text-blue-600\">立即注册</a>\r\n  \r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n    <!-- 注册弹窗 -->\r\n  <div\r\n    v-if=\"showRegister\"\r\n    class=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\"\r\n  >\r\n    <div class=\"bg-white rounded-lg p-6 w-96 shadow-lg relative\">\r\n      <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">注册新账号</h2>\r\n  \r\n      <input\r\n        v-model=\"registerUsername\"\r\n        type=\"text\"\r\n        placeholder=\"请输入用户名\"\r\n        class=\"w-full mb-3 p-2 border rounded\"\r\n      />\r\n      <input\r\n        v-model=\"registerPassword\"\r\n        type=\"password\"\r\n        placeholder=\"请输入密码\"\r\n        class=\"w-full mb-4 p-2 border rounded\"\r\n      />\r\n  \r\n      <div class=\"flex justify-end space-x-3\">\r\n        <button @click=\"showRegister = false\" class=\"px-4 py-2 text-gray-600 border rounded\">取消</button>\r\n        <button @click=\"submitRegister\" class=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\">注册</button>\r\n      </div>\r\n  \r\n      <p class=\"text-sm text-red-500 mt-2\" v-if=\"registerError\">{{ registerError }}</p>\r\n      <p class=\"text-sm text-green-500 mt-2\" v-if=\"registerSuccess\">{{ registerSuccess }}</p>\r\n    </div>\r\n  </div>\r\n  \r\n    </template>\r\n    \r\n    <script setup>\r\n    import { ref } from \"vue\";\r\n    import axios from \"axios\";\r\n    import { useRouter } from 'vue-router'\r\n  \r\n  const router = useRouter()\r\n    const username = ref(\"\");\r\n    const password = ref(\"\");\r\n    const rememberPassword = ref(false);\r\n    const showPassword = ref(false);\r\n    \r\n    const clearUsername = () => {\r\n      username.value = \"\";\r\n    };\r\n    \r\n    const togglePassword = () => {\r\n      showPassword.value = !showPassword.value;\r\n    };\r\n    \r\n    const handleLogin = async () => {\r\n      if (!username.value || !password.value) {\r\n        alert(\"请输入用户名和密码\");\r\n        return;\r\n      }\r\n    \r\n      try {\r\n        const response = await axios.post(\"http://127.0.0.1:5000/api/login\", {\r\n          username: username.value,\r\n          password: password.value,\r\n          rememberPassword: rememberPassword.value,\r\n        });\r\n\r\n        // 存储到 localStorage\r\n        localStorage.setItem('user', JSON.stringify({\r\n          id: response.data.user_id,\r\n          username: response.data.username\r\n        }));\r\n        // 立即检查\r\n        console.log('已存储:', JSON.parse(localStorage.getItem('user')));\r\n        console.log('用户ID:', localStorage.getItem('user_id'))\r\n        if (response.data.message === \"Login successful\") {\r\n          router.push('/requirements')\r\n  \r\n          // 登录成功后的处理\r\n          console.log(\"Login successful\");\r\n        } else {\r\n          // 登录失败的处理\r\n          console.log(\"登录失败\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"登录请求失败:\", error);\r\n      }\r\n    };\r\n    const showRegister = ref(false)\r\n  const registerUsername = ref('')\r\n  const registerPassword = ref('')\r\n  const registerError = ref('')\r\n  const registerSuccess = ref('')\r\n  \r\n  const submitRegister = async () => {\r\n    registerError.value = ''\r\n    registerSuccess.value = ''\r\n  \r\n    if (!registerUsername.value || !registerPassword.value) {\r\n      registerError.value = '请输入用户名和密码'\r\n      return\r\n    }\r\n  \r\n    try {\r\n      const response = await axios.post('/api/register', {\r\n        username: registerUsername.value,\r\n        password: registerPassword.value\r\n      })\r\n  \r\n      if (response.data.message === 'Register successful') {\r\n        registerSuccess.value = '注册成功！请返回登录'\r\n        setTimeout(() => {\r\n          showRegister.value = false\r\n          registerUsername.value = ''\r\n          registerPassword.value = ''\r\n        }, 1500)\r\n      }\r\n    } catch (err) {\r\n      registerError.value = err.response?.data?.error || '注册失败'\r\n    }\r\n  }\r\n  \r\n    </script>"],"mappings":";;EACSA,KAAK,EAAC;AAA0E;;EAC1EA,KAAK,EAAC;AAAsD;;EAOhEA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAU;;EAehBA,KAAK,EAAC;AAAU;mBAzB7B;;EAwCaA,KAAK,EAAC;AAA2C;;EAC7CA,KAAK,EAAC;AAA4C;;EAmBtDA,KAAK,EAAC;AAAa;;EACnBA,KAAK,EAAC;AAAuB;;EA7D1CC,GAAA;EAyEID,KAAK,EAAC;;;EAEDA,KAAK,EAAC;AAAiD;;EAgBrDA,KAAK,EAAC;AAA4B;;EA3F7CC,GAAA;EAgGSD,KAAK,EAAC;;;EAhGfC,GAAA;EAiGSD,KAAK,EAAC;;;uBAjGfE,mBAAA,CAAAC,SAAA,SACIC,mBAAA,CAoEI,OApEJC,UAoEI,GAnEED,mBAAA,CAkEA,OAlEAE,UAkEA,G,4BAjEIF,mBAAA,CAKM;IALDJ,KAAK,EAAC;EAAkB,IACzBO,mBAAA,sLACoD,EACpDH,mBAAA,CAAsD;IAAlDJ,KAAK,EAAC;EAAkC,GAAC,MAAI,GACjDI,mBAAA,CAA6C;IAA1CJ,KAAK,EAAC;EAAoB,GAAC,aAAW,E,sBAErDI,mBAAA,CA0DM,OA1DNI,UA0DM,GAzDJJ,mBAAA,CAaM,OAbNK,UAaM,G,gBAZJL,mBAAA,CAME;IALAM,IAAI,EAAC,MAAM;IACXC,EAAE,EAAC,UAAU;IAbzB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAcqBC,MAAA,CAAAC,QAAQ,GAAAF,MAAA;IACjBG,WAAW,EAAC,SAAS;IACrBhB,KAAK,EAAC;iDAFGc,MAAA,CAAAC,QAAQ,E,GAInBX,mBAAA,CAIK;IAHHJ,KAAK,EAnBjBiB,eAAA,EAmBkB,4FAA4F;MAAAC,MAAA,GAC/EJ,MAAA,CAAAC;IAAQ;IAC1BI,OAAK,EAAEL,MAAA,CAAAM;6BAIZhB,mBAAA,CAaM,OAbNiB,UAaM,G,gBAZJjB,mBAAA,CAME;IALCM,IAAI,EAAEI,MAAA,CAAAQ,YAAY;IACnBX,EAAE,EAAC,UAAU;IA5BzB,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA6BqBC,MAAA,CAAAS,QAAQ,GAAAV,MAAA;IACjBG,WAAW,EAAC,OAAO;IACnBhB,KAAK,EAAC;0BA/BlBwB,UAAA,I,iBA6BqBV,MAAA,CAAAS,QAAQ,E,GAInBnB,mBAAA,CAIK;IAHHJ,KAAK,EAlCjBiB,eAAA,EAkCkB,4EAA4E,EAC1EH,MAAA,CAAAQ,YAAY;IACnBH,OAAK,EAAEL,MAAA,CAAAW;6BAIZrB,mBAAA,CAWM,OAXNsB,UAWM,GAVJtB,mBAAA,CAQQ,SARRuB,UAQQ,G,gBAPNvB,mBAAA,CAKE;IAJAM,IAAI,EAAC,UAAU;IACfC,EAAE,EAAC,kBAAkB;IA5CnC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA6CuBC,MAAA,CAAAc,gBAAgB,GAAAf,MAAA;IACzBb,KAAK,EAAC;qDADGc,MAAA,CAAAc,gBAAgB,E,6BAG3BxB,mBAAA,CAAuC;IAAjCJ,KAAK,EAAC;EAAe,GAAC,MAAI,qB,6BAElCI,mBAAA,CAA8D;IAA3DyB,IAAI,EAAC,GAAG;IAAC7B,KAAK,EAAC;KAAmC,OAAK,qB,GAG5DI,mBAAA,CAKS;IAJNe,OAAK,EAAEL,MAAA,CAAAgB,WAAW;IACnB9B,KAAK,EAAC;KACP,MAED,GAEAI,mBAAA,CAMM,OANN2B,UAMM,GALJ3B,mBAAA,CAII,KAJJ4B,WAII,G,0BAjEdC,gBAAA,CA6D2C,UAE/B,IAAA7B,mBAAA,CAAkG;IAA/FyB,IAAI,EAAC,GAAG;IAAEV,OAAK,EAAAP,MAAA,QAAAA,MAAA,MA/D9BsB,cAAA,CAAArB,MAAA,IA+DwCC,MAAA,CAAAqB,YAAY;IAASnC,KAAK,EAAC;KAAmC,MAAI,E,WAOtGO,mBAAA,UAAa,EAEPO,MAAA,CAAAqB,YAAY,I,cADpBjC,mBAAA,CA4BM,OA5BNkC,WA4BM,GAxBJhC,mBAAA,CAuBM,OAvBNiC,WAuBM,G,4BAtBJjC,mBAAA,CAA+D;IAA3DJ,KAAK,EAAC;EAA0C,GAAC,OAAK,sB,gBAE1DI,mBAAA,CAKE;IAnFR,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA+EiBC,MAAA,CAAAwB,gBAAgB,GAAAzB,MAAA;IACzBH,IAAI,EAAC,MAAM;IACXM,WAAW,EAAC,QAAQ;IACpBhB,KAAK,EAAC;iDAHGc,MAAA,CAAAwB,gBAAgB,E,mBAK3BlC,mBAAA,CAKE;IAzFR,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAqFiBC,MAAA,CAAAyB,gBAAgB,GAAA1B,MAAA;IACzBH,IAAI,EAAC,UAAU;IACfM,WAAW,EAAC,OAAO;IACnBhB,KAAK,EAAC;iDAHGc,MAAA,CAAAyB,gBAAgB,E,GAM3BnC,mBAAA,CAGM,OAHNoC,WAGM,GAFJpC,mBAAA,CAAgG;IAAvFe,OAAK,EAAAP,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAqB,YAAY;IAAUnC,KAAK,EAAC;KAAyC,IAAE,GACvFI,mBAAA,CAA8G;IAArGe,OAAK,EAAEL,MAAA,CAAA2B,cAAc;IAAEzC,KAAK,EAAC;KAA6D,IAAE,E,GAG5Dc,MAAA,CAAA4B,aAAa,I,cAAxDxC,mBAAA,CAAiF,KAAjFyC,WAAiF,EAAAC,gBAAA,CAApB9B,MAAA,CAAA4B,aAAa,oBAhGhFnC,mBAAA,gBAiGmDO,MAAA,CAAA+B,eAAe,I,cAA5D3C,mBAAA,CAAuF,KAAvF4C,WAAuF,EAAAF,gBAAA,CAAtB9B,MAAA,CAAA+B,eAAe,oBAjGtFtC,mBAAA,e,OAAAA,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}