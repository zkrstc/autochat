{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { getSubGraphTitleMargins } from \"./chunk-K557N5IZ.mjs\";\nimport { getIconSVG } from \"./chunk-H2D2JQ3I.mjs\";\nimport { createText } from \"./chunk-C3MQ5ANM.mjs\";\nimport { calculateTextWidth, decodeEntities, handleUndefinedAttr, parseFontSize } from \"./chunk-O4NI6UNU.mjs\";\nimport { __name, common_default, defaultConfig_default, evaluate, getConfig, getConfig2, hasKatex, log, parseGenericTypes, renderKatex, sanitizeText, sanitizeText2 } from \"./chunk-YTJNT7DU.mjs\";\n\n// src/rendering-util/rendering-elements/shapes/util.ts\nimport { select } from \"d3\";\nvar labelHelper = /* @__PURE__ */__name(async (parent, node, _classes) => {\n  let cssClasses;\n  const useHtmlLabels = node.useHtmlLabels || evaluate(getConfig2()?.htmlLabels);\n  if (!_classes) {\n    cssClasses = \"node default\";\n  } else {\n    cssClasses = _classes;\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", handleUndefinedAttr(node.labelStyle));\n  let label;\n  if (node.label === void 0) {\n    label = \"\";\n  } else {\n    label = typeof node.label === \"string\" ? node.label : node.label[0];\n  }\n  const text2 = await createText(labelEl, sanitizeText(decodeEntities(label), getConfig2()), {\n    useHtmlLabels,\n    width: node.width || getConfig2().flowchart?.wrappingWidth,\n    // @ts-expect-error -- This is currently not used. Should this be `classes` instead?\n    cssClasses: \"markdown-node-label\",\n    style: node.labelStyle,\n    addSvgBackground: !!node.icon || !!node.img\n  });\n  let bbox = text2.getBBox();\n  const halfPadding = (node?.padding ?? 0) / 2;\n  if (useHtmlLabels) {\n    const div = text2.children[0];\n    const dv = select(text2);\n    const images = div.getElementsByTagName(\"img\");\n    if (images) {\n      const noImgText = label.replace(/<img[^>]*>/g, \"\").trim() === \"\";\n      await Promise.all([...images].map(img => new Promise(res => {\n        function setupImage() {\n          img.style.display = \"flex\";\n          img.style.flexDirection = \"column\";\n          if (noImgText) {\n            const bodyFontSize = getConfig2().fontSize ? getConfig2().fontSize : window.getComputedStyle(document.body).fontSize;\n            const enlargingFactor = 5;\n            const [parsedBodyFontSize = defaultConfig_default.fontSize] = parseFontSize(bodyFontSize);\n            const width = parsedBodyFontSize * enlargingFactor + \"px\";\n            img.style.minWidth = width;\n            img.style.maxWidth = width;\n          } else {\n            img.style.width = \"100%\";\n          }\n          res(img);\n        }\n        __name(setupImage, \"setupImage\");\n        setTimeout(() => {\n          if (img.complete) {\n            setupImage();\n          }\n        });\n        img.addEventListener(\"error\", setupImage);\n        img.addEventListener(\"load\", setupImage);\n      })));\n    }\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  if (useHtmlLabels) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  } else {\n    labelEl.attr(\"transform\", \"translate(0, \" + -bbox.height / 2 + \")\");\n  }\n  if (node.centerLabel) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  }\n  labelEl.insert(\"rect\", \":first-child\");\n  return {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label: labelEl\n  };\n}, \"labelHelper\");\nvar insertLabel = /* @__PURE__ */__name(async (parent, label, options) => {\n  const useHtmlLabels = options.useHtmlLabels || evaluate(getConfig2()?.flowchart?.htmlLabels);\n  const labelEl = parent.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", options.labelStyle || \"\");\n  const text2 = await createText(labelEl, sanitizeText(decodeEntities(label), getConfig2()), {\n    useHtmlLabels,\n    width: options.width || getConfig2()?.flowchart?.wrappingWidth,\n    style: options.labelStyle,\n    addSvgBackground: !!options.icon || !!options.img\n  });\n  let bbox = text2.getBBox();\n  const halfPadding = options.padding / 2;\n  if (evaluate(getConfig2()?.flowchart?.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  if (useHtmlLabels) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  } else {\n    labelEl.attr(\"transform\", \"translate(0, \" + -bbox.height / 2 + \")\");\n  }\n  if (options.centerLabel) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  }\n  labelEl.insert(\"rect\", \":first-child\");\n  return {\n    shapeSvg: parent,\n    bbox,\n    halfPadding,\n    label: labelEl\n  };\n}, \"insertLabel\");\nvar updateNodeBounds = /* @__PURE__ */__name((node, element) => {\n  const bbox = element.node().getBBox();\n  node.width = bbox.width;\n  node.height = bbox.height;\n}, \"updateNodeBounds\");\nvar getNodeClasses = /* @__PURE__ */__name((node, extra) => (node.look === \"handDrawn\" ? \"rough-node\" : \"node\") + \" \" + node.cssClasses + \" \" + (extra || \"\"), \"getNodeClasses\");\nfunction createPathFromPoints(points) {\n  const pointStrings = points.map((p, i) => `${i === 0 ? \"M\" : \"L\"}${p.x},${p.y}`);\n  pointStrings.push(\"Z\");\n  return pointStrings.join(\" \");\n}\n__name(createPathFromPoints, \"createPathFromPoints\");\nfunction generateFullSineWavePoints(x1, y1, x2, y2, amplitude, numCycles) {\n  const points = [];\n  const steps = 50;\n  const deltaX = x2 - x1;\n  const deltaY = y2 - y1;\n  const cycleLength = deltaX / numCycles;\n  const frequency = 2 * Math.PI / cycleLength;\n  const midY = y1 + deltaY / 2;\n  for (let i = 0; i <= steps; i++) {\n    const t = i / steps;\n    const x = x1 + t * deltaX;\n    const y = midY + amplitude * Math.sin(frequency * (x - x1));\n    points.push({\n      x,\n      y\n    });\n  }\n  return points;\n}\n__name(generateFullSineWavePoints, \"generateFullSineWavePoints\");\nfunction generateCirclePoints(centerX, centerY, radius, numPoints, startAngle, endAngle) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({\n      x: -x,\n      y: -y\n    });\n  }\n  return points;\n}\n__name(generateCirclePoints, \"generateCirclePoints\");\n\n// src/rendering-util/rendering-elements/clusters.js\nimport { select as select3 } from \"d3\";\nimport rough from \"roughjs\";\n\n// src/rendering-util/rendering-elements/intersect/intersect-rect.js\nvar intersectRect = /* @__PURE__ */__name((node, point) => {\n  var x = node.x;\n  var y = node.y;\n  var dx = point.x - x;\n  var dy = point.y - y;\n  var w = node.width / 2;\n  var h = node.height / 2;\n  var sx, sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = dy === 0 ? 0 : h * dx / dy;\n    sy = h;\n  } else {\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = dx === 0 ? 0 : w * dy / dx;\n  }\n  return {\n    x: x + sx,\n    y: y + sy\n  };\n}, \"intersectRect\");\nvar intersect_rect_default = intersectRect;\n\n// src/rendering-util/rendering-elements/createLabel.js\nimport { select as select2 } from \"d3\";\nfunction applyStyle(dom, styleFn) {\n  if (styleFn) {\n    dom.attr(\"style\", styleFn);\n  }\n}\n__name(applyStyle, \"applyStyle\");\nasync function addHtmlLabel(node) {\n  const fo = select2(document.createElementNS(\"http://www.w3.org/2000/svg\", \"foreignObject\"));\n  const div = fo.append(\"xhtml:div\");\n  let label = node.label;\n  if (node.label && hasKatex(node.label)) {\n    label = await renderKatex(node.label.replace(common_default.lineBreakRegex, \"\\n\"), getConfig2());\n  }\n  const labelClass = node.isNode ? \"nodeLabel\" : \"edgeLabel\";\n  div.html('<span class=\"' + labelClass + '\" ' + (node.labelStyle ? 'style=\"' + node.labelStyle + '\"' : \"\") +\n  // codeql [js/html-constructed-from-input] : false positive\n  \">\" + label + \"</span>\");\n  applyStyle(div, node.labelStyle);\n  div.style(\"display\", \"inline-block\");\n  div.style(\"padding-right\", \"1px\");\n  div.style(\"white-space\", \"nowrap\");\n  div.attr(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  return fo.node();\n}\n__name(addHtmlLabel, \"addHtmlLabel\");\nvar createLabel = /* @__PURE__ */__name(async (_vertexText, style, isTitle, isNode) => {\n  let vertexText = _vertexText || \"\";\n  if (typeof vertexText === \"object\") {\n    vertexText = vertexText[0];\n  }\n  if (evaluate(getConfig2().flowchart.htmlLabels)) {\n    vertexText = vertexText.replace(/\\\\n|\\n/g, \"<br />\");\n    log.info(\"vertexText\" + vertexText);\n    const node = {\n      isNode,\n      label: decodeEntities(vertexText).replace(/fa[blrs]?:fa-[\\w-]+/g, s => `<i class='${s.replace(\":\", \" \")}'></i>`),\n      labelStyle: style ? style.replace(\"fill:\", \"color:\") : style\n    };\n    let vertexNode = await addHtmlLabel(node);\n    return vertexNode;\n  } else {\n    const svgLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    svgLabel.setAttribute(\"style\", style.replace(\"color:\", \"fill:\"));\n    let rows = [];\n    if (typeof vertexText === \"string\") {\n      rows = vertexText.split(/\\\\n|\\n|<br\\s*\\/?>/gi);\n    } else if (Array.isArray(vertexText)) {\n      rows = vertexText;\n    } else {\n      rows = [];\n    }\n    for (const row of rows) {\n      const tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n      tspan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n      tspan.setAttribute(\"dy\", \"1em\");\n      tspan.setAttribute(\"x\", \"0\");\n      if (isTitle) {\n        tspan.setAttribute(\"class\", \"title-row\");\n      } else {\n        tspan.setAttribute(\"class\", \"row\");\n      }\n      tspan.textContent = row.trim();\n      svgLabel.appendChild(tspan);\n    }\n    return svgLabel;\n  }\n}, \"createLabel\");\nvar createLabel_default = createLabel;\n\n// src/rendering-util/rendering-elements/shapes/roundedRectPath.ts\nvar createRoundedRectPathD = /* @__PURE__ */__name((x, y, totalWidth, totalHeight, radius) => [\"M\", x + radius, y,\n// Move to the first point\n\"H\", x + totalWidth - radius,\n// Draw horizontal line to the beginning of the right corner\n\"A\", radius, radius, 0, 0, 1, x + totalWidth, y + radius,\n// Draw arc to the right top corner\n\"V\", y + totalHeight - radius,\n// Draw vertical line down to the beginning of the right bottom corner\n\"A\", radius, radius, 0, 0, 1, x + totalWidth - radius, y + totalHeight,\n// Draw arc to the right bottom corner\n\"H\", x + radius,\n// Draw horizontal line to the beginning of the left bottom corner\n\"A\", radius, radius, 0, 0, 1, x, y + totalHeight - radius,\n// Draw arc to the left bottom corner\n\"V\", y + radius,\n// Draw vertical line up to the beginning of the left top corner\n\"A\", radius, radius, 0, 0, 1, x + radius, y,\n// Draw arc to the left top corner\n\"Z\"\n// Close the path\n].join(\" \"), \"createRoundedRectPathD\");\n\n// src/rendering-util/rendering-elements/shapes/handDrawnShapeStyles.ts\nvar solidStateFill = /* @__PURE__ */__name(color => {\n  const {\n    handDrawnSeed\n  } = getConfig2();\n  return {\n    fill: color,\n    hachureAngle: 120,\n    // angle of hachure,\n    hachureGap: 4,\n    fillWeight: 2,\n    roughness: 0.7,\n    stroke: color,\n    seed: handDrawnSeed\n  };\n}, \"solidStateFill\");\nvar compileStyles = /* @__PURE__ */__name(node => {\n  const stylesMap = styles2Map([...(node.cssCompiledStyles || []), ...(node.cssStyles || [])]);\n  return {\n    stylesMap,\n    stylesArray: [...stylesMap]\n  };\n}, \"compileStyles\");\nvar styles2Map = /* @__PURE__ */__name(styles => {\n  const styleMap = /* @__PURE__ */new Map();\n  styles.forEach(style => {\n    const [key, value] = style.split(\":\");\n    styleMap.set(key.trim(), value?.trim());\n  });\n  return styleMap;\n}, \"styles2Map\");\nvar isLabelStyle = /* @__PURE__ */__name(key => {\n  return key === \"color\" || key === \"font-size\" || key === \"font-family\" || key === \"font-weight\" || key === \"font-style\" || key === \"text-decoration\" || key === \"text-align\" || key === \"text-transform\" || key === \"line-height\" || key === \"letter-spacing\" || key === \"word-spacing\" || key === \"text-shadow\" || key === \"text-overflow\" || key === \"white-space\" || key === \"word-wrap\" || key === \"word-break\" || key === \"overflow-wrap\" || key === \"hyphens\";\n}, \"isLabelStyle\");\nvar styles2String = /* @__PURE__ */__name(node => {\n  const {\n    stylesArray\n  } = compileStyles(node);\n  const labelStyles = [];\n  const nodeStyles = [];\n  const borderStyles = [];\n  const backgroundStyles = [];\n  stylesArray.forEach(style => {\n    const key = style[0];\n    if (isLabelStyle(key)) {\n      labelStyles.push(style.join(\":\") + \" !important\");\n    } else {\n      nodeStyles.push(style.join(\":\") + \" !important\");\n      if (key.includes(\"stroke\")) {\n        borderStyles.push(style.join(\":\") + \" !important\");\n      }\n      if (key === \"fill\") {\n        backgroundStyles.push(style.join(\":\") + \" !important\");\n      }\n    }\n  });\n  return {\n    labelStyles: labelStyles.join(\";\"),\n    nodeStyles: nodeStyles.join(\";\"),\n    stylesArray,\n    borderStyles,\n    backgroundStyles\n  };\n}, \"styles2String\");\nvar userNodeOverrides = /* @__PURE__ */__name((node, options) => {\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = getConfig2();\n  const {\n    nodeBorder,\n    mainBkg\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const result = Object.assign({\n    roughness: 0.7,\n    fill: stylesMap.get(\"fill\") || mainBkg,\n    fillStyle: \"hachure\",\n    // solid fill\n    fillWeight: 4,\n    hachureGap: 5.2,\n    stroke: stylesMap.get(\"stroke\") || nodeBorder,\n    seed: handDrawnSeed,\n    strokeWidth: stylesMap.get(\"stroke-width\")?.replace(\"px\", \"\") || 1.3,\n    fillLineDash: [0, 0]\n  }, options);\n  return result;\n}, \"userNodeOverrides\");\n\n// src/rendering-util/rendering-elements/clusters.js\nvar rect = /* @__PURE__ */__name(async (parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig2();\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = siteConfig;\n  const {\n    clusterBkg,\n    clusterBorder\n  } = themeVariables;\n  const {\n    labelStyles,\n    nodeStyles,\n    borderStyles,\n    backgroundStyles\n  } = styles2String(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster \" + node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label \");\n  const text2 = await createText(labelEl, node.label, {\n    style: node.labelStyle,\n    useHtmlLabels,\n    isNode: true\n  });\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  log.trace(\"Data \", node, JSON.stringify(node));\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const options = userNodeOverrides(node, {\n      roughness: 0.7,\n      fill: clusterBkg,\n      // fill: 'red',\n      stroke: clusterBorder,\n      fillWeight: 3,\n      seed: handDrawnSeed\n    });\n    const roughNode = rc.path(createRoundedRectPathD(x, y, width, height, 0), options);\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n    rect2.select(\"path:nth-child(2)\").attr(\"style\", borderStyles.join(\";\"));\n    rect2.select(\"path\").attr(\"style\", backgroundStyles.join(\";\").replace(\"fill\", \"stroke\"));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"style\", nodeStyles).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height);\n  }\n  const {\n    subGraphTitleTopMargin\n  } = getSubGraphTitleMargins(siteConfig);\n  labelEl.attr(\"transform\",\n  // This puts the label on top of the box instead of inside it\n  `translate(${node.x - bbox.width / 2}, ${node.y - node.height / 2 + subGraphTitleTopMargin})`);\n  if (labelStyles) {\n    const span = labelEl.select(\"span\");\n    if (span) {\n      span.attr(\"style\", labelStyles);\n    }\n  }\n  const rectBox = rect2.node().getBBox();\n  node.offsetX = 0;\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: bbox\n  };\n}, \"rect\");\nvar noteGroup = /* @__PURE__ */__name((parent, node) => {\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"note-cluster\").attr(\"id\", node.id);\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  rect2.attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", node.x - node.width / 2 - halfPadding).attr(\"y\", node.y - node.height / 2 - halfPadding).attr(\"width\", node.width + padding).attr(\"height\", node.height + padding).attr(\"fill\", \"none\");\n  const rectBox = rect2.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: {\n      width: 0,\n      height: 0\n    }\n  };\n}, \"noteGroup\");\nvar roundedWithTitle = /* @__PURE__ */__name(async (parent, node) => {\n  const siteConfig = getConfig2();\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = siteConfig;\n  const {\n    altBackground,\n    compositeBackground,\n    compositeTitleBackground,\n    nodeBorder\n  } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.cssClasses).attr(\"id\", node.id).attr(\"data-id\", node.id).attr(\"data-look\", node.look);\n  const outerRectG = shapeSvg.insert(\"g\", \":first-child\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label\");\n  let innerRect = shapeSvg.append(\"rect\");\n  const text2 = label.node().appendChild(await createLabel_default(node.label, node.labelStyle, void 0, true));\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  const width = (node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width) + padding;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height + padding;\n  const innerHeight = node.height + padding - bbox.height - 6;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  node.width = width;\n  const innerY = node.y - node.height / 2 - halfPadding + bbox.height + 2;\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const isAlt = node.cssClasses.includes(\"statediagram-cluster-alt\");\n    const rc = rough.svg(shapeSvg);\n    const roughOuterNode = node.rx || node.ry ? rc.path(createRoundedRectPathD(x, y, width, height, 10), {\n      roughness: 0.7,\n      fill: compositeTitleBackground,\n      fillStyle: \"solid\",\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    }) : rc.rectangle(x, y, width, height, {\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n    const roughInnerNode = rc.rectangle(x, innerY, width, innerHeight, {\n      fill: isAlt ? altBackground : compositeBackground,\n      fillStyle: isAlt ? \"hachure\" : \"solid\",\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n    innerRect = shapeSvg.insert(() => roughInnerNode);\n  } else {\n    rect2 = outerRectG.insert(\"rect\", \":first-child\");\n    const outerRectClass = \"outer\";\n    rect2.attr(\"class\", outerRectClass).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height).attr(\"data-look\", node.look);\n    innerRect.attr(\"class\", \"inner\").attr(\"x\", x).attr(\"y\", innerY).attr(\"width\", width).attr(\"height\", innerHeight);\n  }\n  label.attr(\"transform\", `translate(${node.x - bbox.width / 2}, ${y + 1 - (evaluate(siteConfig.flowchart.htmlLabels) ? 0 : 3)})`);\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.offsetX = 0;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.labelBBox = bbox;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: bbox\n  };\n}, \"roundedWithTitle\");\nvar kanbanSection = /* @__PURE__ */__name(async (parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig2();\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = siteConfig;\n  const {\n    clusterBkg,\n    clusterBorder\n  } = themeVariables;\n  const {\n    labelStyles,\n    nodeStyles,\n    borderStyles,\n    backgroundStyles\n  } = styles2String(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster \" + node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label \");\n  const text2 = await createText(labelEl, node.label, {\n    style: node.labelStyle,\n    useHtmlLabels,\n    isNode: true,\n    width: node.width\n  });\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  log.trace(\"Data \", node, JSON.stringify(node));\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const options = userNodeOverrides(node, {\n      roughness: 0.7,\n      fill: clusterBkg,\n      // fill: 'red',\n      stroke: clusterBorder,\n      fillWeight: 4,\n      seed: handDrawnSeed\n    });\n    const roughNode = rc.path(createRoundedRectPathD(x, y, width, height, node.rx), options);\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n    rect2.select(\"path:nth-child(2)\").attr(\"style\", borderStyles.join(\";\"));\n    rect2.select(\"path\").attr(\"style\", backgroundStyles.join(\";\").replace(\"fill\", \"stroke\"));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"style\", nodeStyles).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height);\n  }\n  const {\n    subGraphTitleTopMargin\n  } = getSubGraphTitleMargins(siteConfig);\n  labelEl.attr(\"transform\",\n  // This puts the label on top of the box instead of inside it\n  `translate(${node.x - bbox.width / 2}, ${node.y - node.height / 2 + subGraphTitleTopMargin})`);\n  if (labelStyles) {\n    const span = labelEl.select(\"span\");\n    if (span) {\n      span.attr(\"style\", labelStyles);\n    }\n  }\n  const rectBox = rect2.node().getBBox();\n  node.offsetX = 0;\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: bbox\n  };\n}, \"kanbanSection\");\nvar divider = /* @__PURE__ */__name((parent, node) => {\n  const siteConfig = getConfig2();\n  const {\n    themeVariables,\n    handDrawnSeed\n  } = siteConfig;\n  const {\n    nodeBorder\n  } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const outerRectG = shapeSvg.insert(\"g\", \":first-child\");\n  const padding = 0 * node.padding;\n  const width = node.width + padding;\n  node.diff = -node.padding;\n  const height = node.height + padding;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  node.width = width;\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const roughOuterNode = rc.rectangle(x, y, width, height, {\n      fill: \"lightgrey\",\n      roughness: 0.5,\n      strokeLineDash: [5],\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n  } else {\n    rect2 = outerRectG.insert(\"rect\", \":first-child\");\n    const outerRectClass = \"divider\";\n    rect2.attr(\"class\", outerRectClass).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height).attr(\"data-look\", node.look);\n  }\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.offsetX = 0;\n  node.offsetY = 0;\n  node.intersect = function (point) {\n    return intersect_rect_default(node, point);\n  };\n  return {\n    cluster: shapeSvg,\n    labelBBox: {}\n  };\n}, \"divider\");\nvar squareRect = rect;\nvar shapes = {\n  rect,\n  squareRect,\n  roundedWithTitle,\n  noteGroup,\n  divider,\n  kanbanSection\n};\nvar clusterElems = /* @__PURE__ */new Map();\nvar insertCluster = /* @__PURE__ */__name(async (elem, node) => {\n  const shape = node.shape || \"rect\";\n  const cluster = await shapes[shape](elem, node);\n  clusterElems.set(node.id, cluster);\n  return cluster;\n}, \"insertCluster\");\nvar clear = /* @__PURE__ */__name(() => {\n  clusterElems = /* @__PURE__ */new Map();\n}, \"clear\");\n\n// src/rendering-util/rendering-elements/intersect/intersect-node.js\nfunction intersectNode(node, point) {\n  return node.intersect(point);\n}\n__name(intersectNode, \"intersectNode\");\nvar intersect_node_default = intersectNode;\n\n// src/rendering-util/rendering-elements/intersect/intersect-ellipse.js\nfunction intersectEllipse(node, rx, ry, point) {\n  var cx = node.x;\n  var cy = node.y;\n  var px = cx - point.x;\n  var py = cy - point.y;\n  var det = Math.sqrt(rx * rx * py * py + ry * ry * px * px);\n  var dx = Math.abs(rx * ry * px / det);\n  if (point.x < cx) {\n    dx = -dx;\n  }\n  var dy = Math.abs(rx * ry * py / det);\n  if (point.y < cy) {\n    dy = -dy;\n  }\n  return {\n    x: cx + dx,\n    y: cy + dy\n  };\n}\n__name(intersectEllipse, \"intersectEllipse\");\nvar intersect_ellipse_default = intersectEllipse;\n\n// src/rendering-util/rendering-elements/intersect/intersect-circle.js\nfunction intersectCircle(node, rx, point) {\n  return intersect_ellipse_default(node, rx, rx, point);\n}\n__name(intersectCircle, \"intersectCircle\");\nvar intersect_circle_default = intersectCircle;\n\n// src/rendering-util/rendering-elements/intersect/intersect-line.js\nfunction intersectLine(p1, p2, q1, q2) {\n  var a1, a2, b1, b2, c1, c2;\n  var r1, r2, r3, r4;\n  var denom, offset, num;\n  var x, y;\n  a1 = p2.y - p1.y;\n  b1 = p1.x - p2.x;\n  c1 = p2.x * p1.y - p1.x * p2.y;\n  r3 = a1 * q1.x + b1 * q1.y + c1;\n  r4 = a1 * q2.x + b1 * q2.y + c1;\n  if (r3 !== 0 && r4 !== 0 && sameSign(r3, r4)) {\n    return;\n  }\n  a2 = q2.y - q1.y;\n  b2 = q1.x - q2.x;\n  c2 = q2.x * q1.y - q1.x * q2.y;\n  r1 = a2 * p1.x + b2 * p1.y + c2;\n  r2 = a2 * p2.x + b2 * p2.y + c2;\n  if (r1 !== 0 && r2 !== 0 && sameSign(r1, r2)) {\n    return;\n  }\n  denom = a1 * b2 - a2 * b1;\n  if (denom === 0) {\n    return;\n  }\n  offset = Math.abs(denom / 2);\n  num = b1 * c2 - b2 * c1;\n  x = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n  num = a2 * c1 - a1 * c2;\n  y = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n  return {\n    x,\n    y\n  };\n}\n__name(intersectLine, \"intersectLine\");\nfunction sameSign(r1, r2) {\n  return r1 * r2 > 0;\n}\n__name(sameSign, \"sameSign\");\nvar intersect_line_default = intersectLine;\n\n// src/rendering-util/rendering-elements/intersect/intersect-polygon.js\nfunction intersectPolygon(node, polyPoints, point) {\n  let x1 = node.x;\n  let y1 = node.y;\n  let intersections = [];\n  let minX = Number.POSITIVE_INFINITY;\n  let minY = Number.POSITIVE_INFINITY;\n  if (typeof polyPoints.forEach === \"function\") {\n    polyPoints.forEach(function (entry) {\n      minX = Math.min(minX, entry.x);\n      minY = Math.min(minY, entry.y);\n    });\n  } else {\n    minX = Math.min(minX, polyPoints.x);\n    minY = Math.min(minY, polyPoints.y);\n  }\n  let left = x1 - node.width / 2 - minX;\n  let top = y1 - node.height / 2 - minY;\n  for (let i = 0; i < polyPoints.length; i++) {\n    let p1 = polyPoints[i];\n    let p2 = polyPoints[i < polyPoints.length - 1 ? i + 1 : 0];\n    let intersect = intersect_line_default(node, point, {\n      x: left + p1.x,\n      y: top + p1.y\n    }, {\n      x: left + p2.x,\n      y: top + p2.y\n    });\n    if (intersect) {\n      intersections.push(intersect);\n    }\n  }\n  if (!intersections.length) {\n    return node;\n  }\n  if (intersections.length > 1) {\n    intersections.sort(function (p, q) {\n      let pdx = p.x - point.x;\n      let pdy = p.y - point.y;\n      let distp = Math.sqrt(pdx * pdx + pdy * pdy);\n      let qdx = q.x - point.x;\n      let qdy = q.y - point.y;\n      let distq = Math.sqrt(qdx * qdx + qdy * qdy);\n      return distp < distq ? -1 : distp === distq ? 0 : 1;\n    });\n  }\n  return intersections[0];\n}\n__name(intersectPolygon, \"intersectPolygon\");\nvar intersect_polygon_default = intersectPolygon;\n\n// src/rendering-util/rendering-elements/intersect/index.js\nvar intersect_default = {\n  node: intersect_node_default,\n  circle: intersect_circle_default,\n  ellipse: intersect_ellipse_default,\n  polygon: intersect_polygon_default,\n  rect: intersect_rect_default\n};\n\n// src/rendering-util/rendering-elements/shapes/anchor.ts\nimport rough2 from \"roughjs\";\nfunction anchor(parent, node) {\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const classes = getNodeClasses(node);\n  let cssClasses = classes;\n  if (!classes) {\n    cssClasses = \"anchor\";\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const radius = 1;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough2.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: \"black\",\n    stroke: \"none\",\n    fillStyle: \"solid\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n  }\n  const roughNode = rc.circle(0, 0, radius * 2, options);\n  const circleElem = shapeSvg.insert(() => roughNode, \":first-child\");\n  circleElem.attr(\"class\", \"anchor\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  updateNodeBounds(node, circleElem);\n  node.intersect = function (point) {\n    log.info(\"Circle intersect\", node, radius, point);\n    return intersect_default.circle(node, radius, point);\n  };\n  return shapeSvg;\n}\n__name(anchor, \"anchor\");\n\n// src/rendering-util/rendering-elements/shapes/bowTieRect.ts\nimport rough3 from \"roughjs\";\nfunction generateArcPoints(x1, y1, x2, y2, rx, ry, clockwise) {\n  const numPoints = 20;\n  const midX = (x1 + x2) / 2;\n  const midY = (y1 + y2) / 2;\n  const angle = Math.atan2(y2 - y1, x2 - x1);\n  const dx = (x2 - x1) / 2;\n  const dy = (y2 - y1) / 2;\n  const transformedX = dx / rx;\n  const transformedY = dy / ry;\n  const distance = Math.sqrt(transformedX ** 2 + transformedY ** 2);\n  if (distance > 1) {\n    throw new Error(\"The given radii are too small to create an arc between the points.\");\n  }\n  const scaledCenterDistance = Math.sqrt(1 - distance ** 2);\n  const centerX = midX + scaledCenterDistance * ry * Math.sin(angle) * (clockwise ? -1 : 1);\n  const centerY = midY - scaledCenterDistance * rx * Math.cos(angle) * (clockwise ? -1 : 1);\n  const startAngle = Math.atan2((y1 - centerY) / ry, (x1 - centerX) / rx);\n  const endAngle = Math.atan2((y2 - centerY) / ry, (x2 - centerX) / rx);\n  let angleRange = endAngle - startAngle;\n  if (clockwise && angleRange < 0) {\n    angleRange += 2 * Math.PI;\n  }\n  if (!clockwise && angleRange > 0) {\n    angleRange -= 2 * Math.PI;\n  }\n  const points = [];\n  for (let i = 0; i < numPoints; i++) {\n    const t = i / (numPoints - 1);\n    const angle2 = startAngle + t * angleRange;\n    const x = centerX + rx * Math.cos(angle2);\n    const y = centerY + ry * Math.sin(angle2);\n    points.push({\n      x,\n      y\n    });\n  }\n  return points;\n}\n__name(generateArcPoints, \"generateArcPoints\");\nasync function bowTieRect(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding + 20;\n  const h = bbox.height + node.padding;\n  const ry = h / 2;\n  const rx = ry / (2.5 + h / 50);\n  const {\n    cssStyles\n  } = node;\n  const points = [{\n    x: w / 2,\n    y: -h / 2\n  }, {\n    x: -w / 2,\n    y: -h / 2\n  }, ...generateArcPoints(-w / 2, -h / 2, -w / 2, h / 2, rx, ry, false), {\n    x: w / 2,\n    y: h / 2\n  }, ...generateArcPoints(w / 2, h / 2, w / 2, -h / 2, rx, ry, true)];\n  const rc = rough3.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const bowTieRectPath = createPathFromPoints(points);\n  const bowTieRectShapePath = rc.path(bowTieRectPath, options);\n  const bowTieRectShape = shapeSvg.insert(() => bowTieRectShapePath, \":first-child\");\n  bowTieRectShape.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    bowTieRectShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    bowTieRectShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  bowTieRectShape.attr(\"transform\", `translate(${rx / 2}, 0)`);\n  updateNodeBounds(node, bowTieRectShape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(bowTieRect, \"bowTieRect\");\n\n// src/rendering-util/rendering-elements/shapes/card.ts\nimport rough4 from \"roughjs\";\n\n// src/rendering-util/rendering-elements/shapes/insertPolygonShape.ts\nfunction insertPolygonShape(parent, w, h, points) {\n  return parent.insert(\"polygon\", \":first-child\").attr(\"points\", points.map(function (d) {\n    return d.x + \",\" + d.y;\n  }).join(\" \")).attr(\"class\", \"label-container\").attr(\"transform\", \"translate(\" + -w / 2 + \",\" + h / 2 + \")\");\n}\n__name(insertPolygonShape, \"insertPolygonShape\");\n\n// src/rendering-util/rendering-elements/shapes/card.ts\nasync function card(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + node.padding;\n  const padding = 12;\n  const w = bbox.width + node.padding + padding;\n  const left = 0;\n  const right = w;\n  const top = -h;\n  const bottom = 0;\n  const points = [{\n    x: left + padding,\n    y: top\n  }, {\n    x: right,\n    y: top\n  }, {\n    x: right,\n    y: bottom\n  }, {\n    x: left,\n    y: bottom\n  }, {\n    x: left,\n    y: top + padding\n  }, {\n    x: left + padding,\n    y: top\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough4.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(card, \"card\");\n\n// src/rendering-util/rendering-elements/shapes/choice.ts\nimport rough5 from \"roughjs\";\nfunction choice(parent, node) {\n  const {\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const {\n    cssStyles\n  } = node;\n  const s = Math.max(28, node.width ?? 0);\n  const points = [{\n    x: 0,\n    y: s / 2\n  }, {\n    x: s / 2,\n    y: 0\n  }, {\n    x: 0,\n    y: -s / 2\n  }, {\n    x: -s / 2,\n    y: 0\n  }];\n  const rc = rough5.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const choicePath = createPathFromPoints(points);\n  const roughNode = rc.path(choicePath, options);\n  const choiceShape = shapeSvg.insert(() => roughNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    choiceShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    choiceShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = 28;\n  node.height = 28;\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(choice, \"choice\");\n\n// src/rendering-util/rendering-elements/shapes/circle.ts\nimport rough6 from \"roughjs\";\nasync function circle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const radius = bbox.width / 2 + halfPadding;\n  let circleElem;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough6.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.circle(0, 0, radius * 2, options);\n    circleElem = shapeSvg.insert(() => roughNode, \":first-child\");\n    circleElem.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    circleElem = shapeSvg.insert(\"circle\", \":first-child\").attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"r\", radius).attr(\"cx\", 0).attr(\"cy\", 0);\n  }\n  updateNodeBounds(node, circleElem);\n  node.intersect = function (point) {\n    log.info(\"Circle intersect\", node, radius, point);\n    return intersect_default.circle(node, radius, point);\n  };\n  return shapeSvg;\n}\n__name(circle, \"circle\");\n\n// src/rendering-util/rendering-elements/shapes/crossedCircle.ts\nimport rough7 from \"roughjs\";\nfunction createLine(r) {\n  const xAxis45 = Math.cos(Math.PI / 4);\n  const yAxis45 = Math.sin(Math.PI / 4);\n  const lineLength = r * 2;\n  const pointQ1 = {\n    x: lineLength / 2 * xAxis45,\n    y: lineLength / 2 * yAxis45\n  };\n  const pointQ2 = {\n    x: -(lineLength / 2) * xAxis45,\n    y: lineLength / 2 * yAxis45\n  };\n  const pointQ3 = {\n    x: -(lineLength / 2) * xAxis45,\n    y: -(lineLength / 2) * yAxis45\n  };\n  const pointQ4 = {\n    x: lineLength / 2 * xAxis45,\n    y: -(lineLength / 2) * yAxis45\n  };\n  return `M ${pointQ2.x},${pointQ2.y} L ${pointQ4.x},${pointQ4.y}\n                   M ${pointQ1.x},${pointQ1.y} L ${pointQ3.x},${pointQ3.y}`;\n}\n__name(createLine, \"createLine\");\nfunction crossedCircle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const radius = Math.max(30, node?.width ?? 0);\n  const {\n    cssStyles\n  } = node;\n  const rc = rough7.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const circleNode = rc.circle(0, 0, radius * 2, options);\n  const linePath = createLine(radius);\n  const lineNode = rc.path(linePath, options);\n  const crossedCircle2 = shapeSvg.insert(() => circleNode, \":first-child\");\n  crossedCircle2.insert(() => lineNode);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    crossedCircle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    crossedCircle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, crossedCircle2);\n  node.intersect = function (point) {\n    log.info(\"crossedCircle intersect\", node, {\n      radius,\n      point\n    });\n    const pos = intersect_default.circle(node, radius, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(crossedCircle, \"crossedCircle\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraceLeft.ts\nimport rough8 from \"roughjs\";\nfunction generateCirclePoints2(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({\n      x: -x,\n      y: -y\n    });\n  }\n  return points;\n}\n__name(generateCirclePoints2, \"generateCirclePoints\");\nasync function curlyBraceLeft(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const {\n    cssStyles\n  } = node;\n  const points = [...generateCirclePoints2(w / 2, -h / 2, radius, 30, -90, 0), {\n    x: -w / 2 - radius,\n    y: radius\n  }, ...generateCirclePoints2(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints2(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: -w / 2 - radius,\n    y: -h / 2\n  }, ...generateCirclePoints2(w / 2, h / 2, radius, 20, 0, 90)];\n  const rectPoints = [{\n    x: w / 2,\n    y: -h / 2 - radius\n  }, {\n    x: -w / 2,\n    y: -h / 2 - radius\n  }, ...generateCirclePoints2(w / 2, -h / 2, radius, 20, -90, 0), {\n    x: -w / 2 - radius,\n    y: -radius\n  }, ...generateCirclePoints2(w / 2 + w * 0.1, -radius, radius, 20, -180, -270), ...generateCirclePoints2(w / 2 + w * 0.1, radius, radius, 20, -90, -180), {\n    x: -w / 2 - radius,\n    y: h / 2\n  }, ...generateCirclePoints2(w / 2, h / 2, radius, 20, 0, 90), {\n    x: -w / 2,\n    y: h / 2 + radius\n  }, {\n    x: w / 2,\n    y: h / 2 + radius\n  }];\n  const rc = rough8.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: \"none\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const curlyBraceLeftPath = createPathFromPoints(points);\n  const newCurlyBracePath = curlyBraceLeftPath.replace(\"Z\", \"\");\n  const curlyBraceLeftNode = rc.path(newCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, {\n    ...options\n  });\n  const curlyBraceLeftShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBraceLeftShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBraceLeftShape.insert(() => curlyBraceLeftNode, \":first-child\");\n  curlyBraceLeftShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBraceLeftShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBraceLeftShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBraceLeftShape.attr(\"transform\", `translate(${radius}, 0)`);\n  label.attr(\"transform\", `translate(${-w / 2 + radius - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, curlyBraceLeftShape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraceLeft, \"curlyBraceLeft\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraceRight.ts\nimport rough9 from \"roughjs\";\nfunction generateCirclePoints3(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({\n      x,\n      y\n    });\n  }\n  return points;\n}\n__name(generateCirclePoints3, \"generateCirclePoints\");\nasync function curlyBraceRight(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const {\n    cssStyles\n  } = node;\n  const points = [...generateCirclePoints3(w / 2, -h / 2, radius, 20, -90, 0), {\n    x: w / 2 + radius,\n    y: -radius\n  }, ...generateCirclePoints3(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints3(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: w / 2 + radius,\n    y: h / 2\n  }, ...generateCirclePoints3(w / 2, h / 2, radius, 20, 0, 90)];\n  const rectPoints = [{\n    x: -w / 2,\n    y: -h / 2 - radius\n  }, {\n    x: w / 2,\n    y: -h / 2 - radius\n  }, ...generateCirclePoints3(w / 2, -h / 2, radius, 20, -90, 0), {\n    x: w / 2 + radius,\n    y: -radius\n  }, ...generateCirclePoints3(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints3(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: w / 2 + radius,\n    y: h / 2\n  }, ...generateCirclePoints3(w / 2, h / 2, radius, 20, 0, 90), {\n    x: w / 2,\n    y: h / 2 + radius\n  }, {\n    x: -w / 2,\n    y: h / 2 + radius\n  }];\n  const rc = rough9.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: \"none\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const curlyBraceRightPath = createPathFromPoints(points);\n  const newCurlyBracePath = curlyBraceRightPath.replace(\"Z\", \"\");\n  const curlyBraceRightNode = rc.path(newCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, {\n    ...options\n  });\n  const curlyBraceRightShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBraceRightShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBraceRightShape.insert(() => curlyBraceRightNode, \":first-child\");\n  curlyBraceRightShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBraceRightShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBraceRightShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBraceRightShape.attr(\"transform\", `translate(${-radius}, 0)`);\n  label.attr(\"transform\", `translate(${-w / 2 + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, curlyBraceRightShape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraceRight, \"curlyBraceRight\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraces.ts\nimport rough10 from \"roughjs\";\nfunction generateCirclePoints4(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({\n      x: -x,\n      y: -y\n    });\n  }\n  return points;\n}\n__name(generateCirclePoints4, \"generateCirclePoints\");\nasync function curlyBraces(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const {\n    cssStyles\n  } = node;\n  const leftCurlyBracePoints = [...generateCirclePoints4(w / 2, -h / 2, radius, 30, -90, 0), {\n    x: -w / 2 - radius,\n    y: radius\n  }, ...generateCirclePoints4(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints4(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: -w / 2 - radius,\n    y: -h / 2\n  }, ...generateCirclePoints4(w / 2, h / 2, radius, 20, 0, 90)];\n  const rightCurlyBracePoints = [...generateCirclePoints4(-w / 2 + radius + radius / 2, -h / 2, radius, 20, -90, -180), {\n    x: w / 2 - radius / 2,\n    y: radius\n  }, ...generateCirclePoints4(-w / 2 - radius / 2, -radius, radius, 20, 0, 90), ...generateCirclePoints4(-w / 2 - radius / 2, radius, radius, 20, -90, 0), {\n    x: w / 2 - radius / 2,\n    y: -radius\n  }, ...generateCirclePoints4(-w / 2 + radius + radius / 2, h / 2, radius, 30, -180, -270)];\n  const rectPoints = [{\n    x: w / 2,\n    y: -h / 2 - radius\n  }, {\n    x: -w / 2,\n    y: -h / 2 - radius\n  }, ...generateCirclePoints4(w / 2, -h / 2, radius, 20, -90, 0), {\n    x: -w / 2 - radius,\n    y: -radius\n  }, ...generateCirclePoints4(w / 2 + radius * 2, -radius, radius, 20, -180, -270), ...generateCirclePoints4(w / 2 + radius * 2, radius, radius, 20, -90, -180), {\n    x: -w / 2 - radius,\n    y: h / 2\n  }, ...generateCirclePoints4(w / 2, h / 2, radius, 20, 0, 90), {\n    x: -w / 2,\n    y: h / 2 + radius\n  }, {\n    x: w / 2 - radius - radius / 2,\n    y: h / 2 + radius\n  }, ...generateCirclePoints4(-w / 2 + radius + radius / 2, -h / 2, radius, 20, -90, -180), {\n    x: w / 2 - radius / 2,\n    y: radius\n  }, ...generateCirclePoints4(-w / 2 - radius / 2, -radius, radius, 20, 0, 90), ...generateCirclePoints4(-w / 2 - radius / 2, radius, radius, 20, -90, 0), {\n    x: w / 2 - radius / 2,\n    y: -radius\n  }, ...generateCirclePoints4(-w / 2 + radius + radius / 2, h / 2, radius, 30, -180, -270)];\n  const rc = rough10.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: \"none\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const leftCurlyBracePath = createPathFromPoints(leftCurlyBracePoints);\n  const newLeftCurlyBracePath = leftCurlyBracePath.replace(\"Z\", \"\");\n  const leftCurlyBraceNode = rc.path(newLeftCurlyBracePath, options);\n  const rightCurlyBracePath = createPathFromPoints(rightCurlyBracePoints);\n  const newRightCurlyBracePath = rightCurlyBracePath.replace(\"Z\", \"\");\n  const rightCurlyBraceNode = rc.path(newRightCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, {\n    ...options\n  });\n  const curlyBracesShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBracesShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBracesShape.insert(() => leftCurlyBraceNode, \":first-child\");\n  curlyBracesShape.insert(() => rightCurlyBraceNode, \":first-child\");\n  curlyBracesShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBracesShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBracesShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBracesShape.attr(\"transform\", `translate(${radius - radius / 4}, 0)`);\n  label.attr(\"transform\", `translate(${-w / 2 + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, curlyBracesShape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraces, \"curlyBraces\");\n\n// src/rendering-util/rendering-elements/shapes/curvedTrapezoid.ts\nimport rough11 from \"roughjs\";\nasync function curvedTrapezoid(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 80,\n    minHeight = 20;\n  const w = Math.max(minWidth, (bbox.width + (node.padding ?? 0) * 2) * 1.25, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const radius = h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough11.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const totalWidth = w,\n    totalHeight = h;\n  const rw = totalWidth - radius;\n  const tw = totalHeight / 4;\n  const points = [{\n    x: rw,\n    y: 0\n  }, {\n    x: tw,\n    y: 0\n  }, {\n    x: 0,\n    y: totalHeight / 2\n  }, {\n    x: tw,\n    y: totalHeight\n  }, {\n    x: rw,\n    y: totalHeight\n  }, ...generateCirclePoints(-rw, -totalHeight / 2, radius, 50, 270, 90)];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-w / 2}, ${-h / 2})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curvedTrapezoid, \"curvedTrapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/cylinder.ts\nimport rough12 from \"roughjs\";\nvar createCylinderPathD = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [`M${x},${y + ry}`, `a${rx},${ry} 0,0,0 ${width},0`, `a${rx},${ry} 0,0,0 ${-width},0`, `l0,${height}`, `a${rx},${ry} 0,0,0 ${width},0`, `l0,${-height}`].join(\" \");\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [`M${x},${y + ry}`, `M${x + width},${y + ry}`, `a${rx},${ry} 0,0,0 ${-width},0`, `l0,${height}`, `a${rx},${ry} 0,0,0 ${width},0`, `l0,${-height}`].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [`M${x - width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 ${width},0`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function cylinder(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + node.padding, node.width ?? 0);\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = Math.max(bbox.height + ry + node.padding, node.height ?? 0);\n  let cylinder2;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough12.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD(0, 0, w, h, rx, ry);\n    const innerPathData = createInnerCylinderPathD(0, ry, w, h, rx, ry);\n    const outerNode = rc.path(outerPathData, userNodeOverrides(node, {}));\n    const innerLine = rc.path(innerPathData, userNodeOverrides(node, {\n      fill: \"none\"\n    }));\n    cylinder2 = shapeSvg.insert(() => innerLine, \":first-child\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD(0, 0, w, h, rx, ry);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n  }\n  cylinder2.attr(\"label-offset-y\", ry);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${-(h / 2 + ry)})`);\n  updateNodeBounds(node, cylinder2);\n  label.attr(\"transform\", `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + (node.padding ?? 0) / 1.5 - (bbox.y - (bbox.top ?? 0))})`);\n  node.intersect = function (point) {\n    const pos = intersect_default.rect(node, point);\n    const x = pos.x - (node.x ?? 0);\n    if (rx != 0 && (Math.abs(x) < (node.width ?? 0) / 2 || Math.abs(x) == (node.width ?? 0) / 2 && Math.abs(pos.y - (node.y ?? 0)) > (node.height ?? 0) / 2 - ry)) {\n      let y = ry * ry * (1 - x * x / (rx * rx));\n      if (y > 0) {\n        y = Math.sqrt(y);\n      }\n      y = ry - y;\n      if (point.y - (node.y ?? 0) > 0) {\n        y = -y;\n      }\n      pos.y += y;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(cylinder, \"cylinder\");\n\n// src/rendering-util/rendering-elements/shapes/dividedRect.ts\nimport rough13 from \"roughjs\";\nasync function dividedRectangle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const rectOffset = h * 0.2;\n  const x = -w / 2;\n  const y = -h / 2 - rectOffset / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough13.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pts = [{\n    x,\n    y: y + rectOffset\n  }, {\n    x: -x,\n    y: y + rectOffset\n  }, {\n    x: -x,\n    y: -y\n  }, {\n    x,\n    y: -y\n  }, {\n    x,\n    y\n  }, {\n    x: -x,\n    y\n  }, {\n    x: -x,\n    y: y + rectOffset\n  }];\n  const poly = rc.polygon(pts.map(p => [p.x, p.y]), options);\n  const polygon = shapeSvg.insert(() => poly, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", `translate(${x + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))}, ${y + rectOffset + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.rect(node, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(dividedRectangle, \"dividedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/doubleCircle.ts\nimport rough14 from \"roughjs\";\nasync function doublecircle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const gap = 5;\n  const outerRadius = bbox.width / 2 + halfPadding + gap;\n  const innerRadius = bbox.width / 2 + halfPadding;\n  let circleGroup;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough14.svg(shapeSvg);\n    const outerOptions = userNodeOverrides(node, {\n      roughness: 0.2,\n      strokeWidth: 2.5\n    });\n    const innerOptions = userNodeOverrides(node, {\n      roughness: 0.2,\n      strokeWidth: 1.5\n    });\n    const outerRoughNode = rc.circle(0, 0, outerRadius * 2, outerOptions);\n    const innerRoughNode = rc.circle(0, 0, innerRadius * 2, innerOptions);\n    circleGroup = shapeSvg.insert(\"g\", \":first-child\");\n    circleGroup.attr(\"class\", handleUndefinedAttr(node.cssClasses)).attr(\"style\", handleUndefinedAttr(cssStyles));\n    circleGroup.node()?.appendChild(outerRoughNode);\n    circleGroup.node()?.appendChild(innerRoughNode);\n  } else {\n    circleGroup = shapeSvg.insert(\"g\", \":first-child\");\n    const outerCircle = circleGroup.insert(\"circle\", \":first-child\");\n    const innerCircle = circleGroup.insert(\"circle\");\n    circleGroup.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles);\n    outerCircle.attr(\"class\", \"outer-circle\").attr(\"style\", nodeStyles).attr(\"r\", outerRadius).attr(\"cx\", 0).attr(\"cy\", 0);\n    innerCircle.attr(\"class\", \"inner-circle\").attr(\"style\", nodeStyles).attr(\"r\", innerRadius).attr(\"cx\", 0).attr(\"cy\", 0);\n  }\n  updateNodeBounds(node, circleGroup);\n  node.intersect = function (point) {\n    log.info(\"DoubleCircle intersect\", node, outerRadius, point);\n    return intersect_default.circle(node, outerRadius, point);\n  };\n  return shapeSvg;\n}\n__name(doublecircle, \"doublecircle\");\n\n// src/rendering-util/rendering-elements/shapes/filledCircle.ts\nimport rough15 from \"roughjs\";\nfunction filledCircle(parent, node, {\n  config: {\n    themeVariables\n  }\n}) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const radius = 7;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough15.svg(shapeSvg);\n  const {\n    nodeBorder\n  } = themeVariables;\n  const options = userNodeOverrides(node, {\n    fillStyle: \"solid\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n  }\n  const circleNode = rc.circle(0, 0, radius * 2, options);\n  const filledCircle2 = shapeSvg.insert(() => circleNode, \":first-child\");\n  filledCircle2.selectAll(\"path\").attr(\"style\", `fill: ${nodeBorder} !important;`);\n  if (cssStyles && cssStyles.length > 0 && node.look !== \"handDrawn\") {\n    filledCircle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    filledCircle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, filledCircle2);\n  node.intersect = function (point) {\n    log.info(\"filledCircle intersect\", node, {\n      radius,\n      point\n    });\n    const pos = intersect_default.circle(node, radius, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(filledCircle, \"filledCircle\");\n\n// src/rendering-util/rendering-elements/shapes/flippedTriangle.ts\nimport rough16 from \"roughjs\";\nasync function flippedTriangle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = w + bbox.height;\n  const tw = w + bbox.height;\n  const points = [{\n    x: 0,\n    y: -h\n  }, {\n    x: tw,\n    y: -h\n  }, {\n    x: tw / 2,\n    y: 0\n  }];\n  const {\n    cssStyles\n  } = node;\n  const rc = rough16.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const flippedTriangle2 = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-h / 2}, ${h / 2})`);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    flippedTriangle2.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    flippedTriangle2.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, flippedTriangle2);\n  label.attr(\"transform\", `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${-h / 2 + (node.padding ?? 0) / 2 + (bbox.y - (bbox.top ?? 0))})`);\n  node.intersect = function (point) {\n    log.info(\"Triangle intersect\", node, points, point);\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(flippedTriangle, \"flippedTriangle\");\n\n// src/rendering-util/rendering-elements/shapes/forkJoin.ts\nimport rough17 from \"roughjs\";\nfunction forkJoin(parent, node, {\n  dir,\n  config: {\n    state: state2,\n    themeVariables\n  }\n}) {\n  const {\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const {\n    cssStyles\n  } = node;\n  let width = Math.max(70, node?.width ?? 0);\n  let height = Math.max(10, node?.height ?? 0);\n  if (dir === \"LR\") {\n    width = Math.max(10, node?.width ?? 0);\n    height = Math.max(70, node?.height ?? 0);\n  }\n  const x = -1 * width / 2;\n  const y = -1 * height / 2;\n  const rc = rough17.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    stroke: themeVariables.lineColor,\n    fill: themeVariables.lineColor\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughNode = rc.rectangle(x, y, width, height, options);\n  const shape = shapeSvg.insert(() => roughNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, shape);\n  const padding = state2?.padding ?? 0;\n  if (node.width && node.height) {\n    node.width += padding / 2 || 0;\n    node.height += padding / 2 || 0;\n  }\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(forkJoin, \"forkJoin\");\n\n// src/rendering-util/rendering-elements/shapes/halfRoundedRectangle.ts\nimport rough18 from \"roughjs\";\nasync function halfRoundedRectangle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const minWidth = 80,\n    minHeight = 50;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(minWidth, bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const radius = h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough18.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2,\n    y: -h / 2\n  }, {\n    x: w / 2 - radius,\n    y: -h / 2\n  }, ...generateCirclePoints(-w / 2 + radius, 0, radius, 50, 90, 270), {\n    x: w / 2 - radius,\n    y: h / 2\n  }, {\n    x: -w / 2,\n    y: h / 2\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    log.info(\"Pill intersect\", node, {\n      radius,\n      point\n    });\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(halfRoundedRectangle, \"halfRoundedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/hexagon.ts\nimport rough19 from \"roughjs\";\nvar createHexagonPathD = /* @__PURE__ */__name((x, y, width, height, m) => {\n  return [`M${x + m},${y}`, `L${x + width - m},${y}`, `L${x + width},${y - height / 2}`, `L${x + width - m},${y - height}`, `L${x + m},${y - height}`, `L${x},${y - height / 2}`, \"Z\"].join(\" \");\n}, \"createHexagonPathD\");\nasync function hexagon(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const f = 4;\n  const h = bbox.height + node.padding;\n  const m = h / f;\n  const w = bbox.width + 2 * m + node.padding;\n  const points = [{\n    x: m,\n    y: 0\n  }, {\n    x: w - m,\n    y: 0\n  }, {\n    x: w,\n    y: -h / 2\n  }, {\n    x: w - m,\n    y: -h\n  }, {\n    x: m,\n    y: -h\n  }, {\n    x: 0,\n    y: -h / 2\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough19.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createHexagonPathD(0, 0, w, h, m);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(hexagon, \"hexagon\");\n\n// src/rendering-util/rendering-elements/shapes/hourglass.ts\nimport rough20 from \"roughjs\";\nasync function hourglass(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(30, node?.width ?? 0);\n  const h = Math.max(30, node?.height ?? 0);\n  const {\n    cssStyles\n  } = node;\n  const rc = rough20.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: w,\n    y: 0\n  }, {\n    x: 0,\n    y: h\n  }, {\n    x: w,\n    y: h\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-w / 2}, ${-h / 2})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    log.info(\"Pill intersect\", node, {\n      points\n    });\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(hourglass, \"hourglass\");\n\n// src/rendering-util/rendering-elements/shapes/icon.ts\nimport rough21 from \"roughjs\";\nasync function icon(parent, node, {\n  config: {\n    themeVariables,\n    flowchart\n  }\n}) {\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, \"icon-shape default\");\n  const topLabel = node.pos === \"t\";\n  const height = iconSize;\n  const width = iconSize;\n  const {\n    nodeBorder\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough21.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    stroke: \"none\",\n    fill: \"none\"\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const iconNode = rc.rectangle(x, y, width, height, options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(`<g>${await getIconSVG(node.icon, {\n      height: iconSize,\n      width: iconSize,\n      fallbackPrefix: \"\"\n    })}</g>`);\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\"transform\", `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`);\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\"transform\", `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`);\n  iconShape.attr(\"transform\", `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`);\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [{\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }];\n    } else {\n      points = [{\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2 / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + height\n      }];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(icon, \"icon\");\n\n// src/rendering-util/rendering-elements/shapes/iconCircle.ts\nimport rough22 from \"roughjs\";\nasync function iconCircle(parent, node, {\n  config: {\n    themeVariables,\n    flowchart\n  }\n}) {\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, \"icon-shape default\");\n  const padding = 20;\n  const labelPadding = node.label ? 8 : 0;\n  const topLabel = node.pos === \"t\";\n  const {\n    nodeBorder,\n    mainBkg\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const rc = rough22.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconElem = shapeSvg.append(\"g\");\n  if (node.icon) {\n    iconElem.html(`<g>${await getIconSVG(node.icon, {\n      height: iconSize,\n      width: iconSize,\n      fallbackPrefix: \"\"\n    })}</g>`);\n  }\n  const iconBBox = iconElem.node().getBBox();\n  const iconWidth = iconBBox.width;\n  const iconHeight = iconBBox.height;\n  const iconX = iconBBox.x;\n  const iconY = iconBBox.y;\n  const diameter = Math.max(iconWidth, iconHeight) * Math.SQRT2 + padding * 2;\n  const iconNode = rc.circle(0, 0, diameter, options);\n  const outerWidth = Math.max(diameter, bbox.width);\n  const outerHeight = diameter + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  iconElem.attr(\"transform\", `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`);\n  iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  label.attr(\"transform\", `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`);\n  iconShape.attr(\"transform\", `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`);\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    log.info(\"iconSquare intersect\", node, point);\n    const pos = intersect_default.rect(node, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconCircle, \"iconCircle\");\n\n// src/rendering-util/rendering-elements/shapes/iconRounded.ts\nimport rough23 from \"roughjs\";\nasync function iconRounded(parent, node, {\n  config: {\n    themeVariables,\n    flowchart\n  }\n}) {\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label\n  } = await labelHelper(parent, node, \"icon-shape default\");\n  const topLabel = node.pos === \"t\";\n  const height = iconSize + halfPadding * 2;\n  const width = iconSize + halfPadding * 2;\n  const {\n    nodeBorder,\n    mainBkg\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough23.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconNode = rc.path(createRoundedRectPathD(x, y, width, height, 5), options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\").attr(\"class\", \"icon-shape2\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(`<g>${await getIconSVG(node.icon, {\n      height: iconSize,\n      width: iconSize,\n      fallbackPrefix: \"\"\n    })}</g>`);\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\"transform\", `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`);\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\"transform\", `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`);\n  iconShape.attr(\"transform\", `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`);\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [{\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }];\n    } else {\n      points = [{\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2 / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + height\n      }];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconRounded, \"iconRounded\");\n\n// src/rendering-util/rendering-elements/shapes/iconSquare.ts\nimport rough24 from \"roughjs\";\nasync function iconSquare(parent, node, {\n  config: {\n    themeVariables,\n    flowchart\n  }\n}) {\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const {\n    shapeSvg,\n    bbox,\n    halfPadding,\n    label\n  } = await labelHelper(parent, node, \"icon-shape default\");\n  const topLabel = node.pos === \"t\";\n  const height = iconSize + halfPadding * 2;\n  const width = iconSize + halfPadding * 2;\n  const {\n    nodeBorder,\n    mainBkg\n  } = themeVariables;\n  const {\n    stylesMap\n  } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough24.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconNode = rc.path(createRoundedRectPathD(x, y, width, height, 0.1), options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(`<g>${await getIconSVG(node.icon, {\n      height: iconSize,\n      width: iconSize,\n      fallbackPrefix: \"\"\n    })}</g>`);\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\"transform\", `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`);\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\"transform\", `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`);\n  iconShape.attr(\"transform\", `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`);\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [{\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }];\n    } else {\n      points = [{\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx + bbox.width / 2 / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + height\n      }, {\n        x: dx - width / 2,\n        y: dy - nodeHeight / 2 + height\n      }];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconSquare, \"iconSquare\");\n\n// src/rendering-util/rendering-elements/shapes/imageSquare.ts\nimport rough25 from \"roughjs\";\nasync function imageSquare(parent, node, {\n  config: {\n    flowchart\n  }\n}) {\n  const img = new Image();\n  img.src = node?.img ?? \"\";\n  await img.decode();\n  const imageNaturalWidth = Number(img.naturalWidth.toString().replace(\"px\", \"\"));\n  const imageNaturalHeight = Number(img.naturalHeight.toString().replace(\"px\", \"\"));\n  node.imageAspectRatio = imageNaturalWidth / imageNaturalHeight;\n  const {\n    labelStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.defaultWidth = flowchart?.wrappingWidth;\n  const imageRawWidth = Math.max(node.label ? defaultWidth ?? 0 : 0, node?.assetWidth ?? imageNaturalWidth);\n  const imageWidth = node.constraint === \"on\" ? node?.assetHeight ? node.assetHeight * node.imageAspectRatio : imageRawWidth : imageRawWidth;\n  const imageHeight = node.constraint === \"on\" ? imageWidth / node.imageAspectRatio : node?.assetHeight ?? imageNaturalHeight;\n  node.width = Math.max(imageWidth, defaultWidth ?? 0);\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, \"image-shape default\");\n  const topLabel = node.pos === \"t\";\n  const x = -imageWidth / 2;\n  const y = -imageHeight / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough25.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const imageNode = rc.rectangle(x, y, imageWidth, imageHeight, options);\n  const outerWidth = Math.max(imageWidth, bbox.width);\n  const outerHeight = imageHeight + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"none\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => imageNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.img) {\n    const image = shapeSvg.append(\"image\");\n    image.attr(\"href\", node.img);\n    image.attr(\"width\", imageWidth);\n    image.attr(\"height\", imageHeight);\n    image.attr(\"preserveAspectRatio\", \"none\");\n    image.attr(\"transform\", `translate(${-imageWidth / 2},${topLabel ? outerHeight / 2 - imageHeight : -outerHeight / 2})`);\n  }\n  label.attr(\"transform\", `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -imageHeight / 2 - bbox.height / 2 - labelPadding / 2 : imageHeight / 2 - bbox.height / 2 + labelPadding / 2})`);\n  iconShape.attr(\"transform\", `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`);\n  updateNodeBounds(node, outerShape);\n  node.intersect = function (point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [{\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + imageWidth / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx + imageWidth / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - imageWidth / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - imageWidth / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + bbox.height + labelPadding\n      }];\n    } else {\n      points = [{\n        x: dx - imageWidth / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + imageWidth / 2,\n        y: dy - nodeHeight / 2\n      }, {\n        x: dx + imageWidth / 2,\n        y: dy - nodeHeight / 2 + imageHeight\n      }, {\n        x: dx + bbox.width / 2,\n        y: dy - nodeHeight / 2 + imageHeight\n      }, {\n        x: dx + bbox.width / 2 / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy + nodeHeight / 2\n      }, {\n        x: dx - bbox.width / 2,\n        y: dy - nodeHeight / 2 + imageHeight\n      }, {\n        x: dx - imageWidth / 2,\n        y: dy - nodeHeight / 2 + imageHeight\n      }];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(imageSquare, \"imageSquare\");\n\n// src/rendering-util/rendering-elements/shapes/invertedTrapezoid.ts\nimport rough26 from \"roughjs\";\nasync function inv_trapezoid(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: w,\n    y: 0\n  }, {\n    x: w + 3 * h / 6,\n    y: -h\n  }, {\n    x: -3 * h / 6,\n    y: -h\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough26.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(inv_trapezoid, \"inv_trapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/drawRect.ts\nimport rough27 from \"roughjs\";\nasync function drawRect(parent, node, options) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + options.labelPaddingX * 2, node?.width || 0);\n  const totalHeight = Math.max(bbox.height + options.labelPaddingY * 2, node?.height || 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  let rect2;\n  let {\n    rx,\n    ry\n  } = node;\n  const {\n    cssStyles\n  } = node;\n  if (options?.rx && options.ry) {\n    rx = options.rx;\n    ry = options.ry;\n  }\n  if (node.look === \"handDrawn\") {\n    const rc = rough27.svg(shapeSvg);\n    const options2 = userNodeOverrides(node, {});\n    const roughNode = rx || ry ? rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, rx || 0), options2) : rc.rectangle(x, y, totalWidth, totalHeight, options2);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"rx\", handleUndefinedAttr(rx)).attr(\"ry\", handleUndefinedAttr(ry)).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(drawRect, \"drawRect\");\n\n// src/rendering-util/rendering-elements/shapes/labelRect.ts\nasync function labelRect(parent, node) {\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, \"label\");\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const totalWidth = 0.1;\n  const totalHeight = 0.1;\n  rect2.attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  shapeSvg.attr(\"class\", \"label edgeLabel\");\n  label.attr(\"transform\", `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(labelRect, \"labelRect\");\n\n// src/rendering-util/rendering-elements/shapes/leanLeft.ts\nimport rough28 from \"roughjs\";\nasync function lean_left(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: w + 3 * h / 6,\n    y: 0\n  }, {\n    x: w,\n    y: -h\n  }, {\n    x: -(3 * h) / 6,\n    y: -h\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough28.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(lean_left, \"lean_left\");\n\n// src/rendering-util/rendering-elements/shapes/leanRight.ts\nimport rough29 from \"roughjs\";\nasync function lean_right(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const points = [{\n    x: -3 * h / 6,\n    y: 0\n  }, {\n    x: w,\n    y: 0\n  }, {\n    x: w + 3 * h / 6,\n    y: -h\n  }, {\n    x: 0,\n    y: -h\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough29.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(lean_right, \"lean_right\");\n\n// src/rendering-util/rendering-elements/shapes/lightningBolt.ts\nimport rough30 from \"roughjs\";\nfunction lightningBolt(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const {\n    cssStyles\n  } = node;\n  const width = Math.max(35, node?.width ?? 0);\n  const height = Math.max(35, node?.height ?? 0);\n  const gap = 7;\n  const points = [{\n    x: width,\n    y: 0\n  }, {\n    x: 0,\n    y: height + gap / 2\n  }, {\n    x: width - 2 * gap,\n    y: height + gap / 2\n  }, {\n    x: 0,\n    y: 2 * height\n  }, {\n    x: width,\n    y: height - gap / 2\n  }, {\n    x: 2 * gap,\n    y: height - gap / 2\n  }];\n  const rc = rough30.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const linePath = createPathFromPoints(points);\n  const lineNode = rc.path(linePath, options);\n  const lightningBolt2 = shapeSvg.insert(() => lineNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    lightningBolt2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    lightningBolt2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  lightningBolt2.attr(\"transform\", `translate(-${width / 2},${-height})`);\n  updateNodeBounds(node, lightningBolt2);\n  node.intersect = function (point) {\n    log.info(\"lightningBolt intersect\", node, point);\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(lightningBolt, \"lightningBolt\");\n\n// src/rendering-util/rendering-elements/shapes/linedCylinder.ts\nimport rough31 from \"roughjs\";\nvar createCylinderPathD2 = /* @__PURE__ */__name((x, y, width, height, rx, ry, outerOffset) => {\n  return [`M${x},${y + ry}`, `a${rx},${ry} 0,0,0 ${width},0`, `a${rx},${ry} 0,0,0 ${-width},0`, `l0,${height}`, `a${rx},${ry} 0,0,0 ${width},0`, `l0,${-height}`, `M${x},${y + ry + outerOffset}`, `a${rx},${ry} 0,0,0 ${width},0`].join(\" \");\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD2 = /* @__PURE__ */__name((x, y, width, height, rx, ry, outerOffset) => {\n  return [`M${x},${y + ry}`, `M${x + width},${y + ry}`, `a${rx},${ry} 0,0,0 ${-width},0`, `l0,${height}`, `a${rx},${ry} 0,0,0 ${width},0`, `l0,${-height}`, `M${x},${y + ry + outerOffset}`, `a${rx},${ry} 0,0,0 ${width},0`].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD2 = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [`M${x - width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 ${width},0`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function linedCylinder(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node.width ?? 0);\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = Math.max(bbox.height + ry + (node.padding ?? 0), node.height ?? 0);\n  const outerOffset = h * 0.1;\n  let cylinder2;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough31.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD2(0, 0, w, h, rx, ry, outerOffset);\n    const innerPathData = createInnerCylinderPathD2(0, ry, w, h, rx, ry);\n    const options = userNodeOverrides(node, {});\n    const outerNode = rc.path(outerPathData, options);\n    const innerLine = rc.path(innerPathData, options);\n    const innerLineEl = shapeSvg.insert(() => innerLine, \":first-child\");\n    innerLineEl.attr(\"class\", \"line\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD2(0, 0, w, h, rx, ry, outerOffset);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n  }\n  cylinder2.attr(\"label-offset-y\", ry);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${-(h / 2 + ry)})`);\n  updateNodeBounds(node, cylinder2);\n  label.attr(\"transform\", `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + ry - (bbox.y - (bbox.top ?? 0))})`);\n  node.intersect = function (point) {\n    const pos = intersect_default.rect(node, point);\n    const x = pos.x - (node.x ?? 0);\n    if (rx != 0 && (Math.abs(x) < (node.width ?? 0) / 2 || Math.abs(x) == (node.width ?? 0) / 2 && Math.abs(pos.y - (node.y ?? 0)) > (node.height ?? 0) / 2 - ry)) {\n      let y = ry * ry * (1 - x * x / (rx * rx));\n      if (y > 0) {\n        y = Math.sqrt(y);\n      }\n      y = ry - y;\n      if (point.y - (node.y ?? 0) > 0) {\n        y = -y;\n      }\n      pos.y += y;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(linedCylinder, \"linedCylinder\");\n\n// src/rendering-util/rendering-elements/shapes/linedWaveEdgedRect.ts\nimport rough32 from \"roughjs\";\nasync function linedWaveEdgedRect(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const finalH = h + waveAmplitude;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough32.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 - w / 2 * 0.1,\n    y: -finalH / 2\n  }, {\n    x: -w / 2 - w / 2 * 0.1,\n    y: finalH / 2\n  }, ...generateFullSineWavePoints(-w / 2 - w / 2 * 0.1, finalH / 2, w / 2 + w / 2 * 0.1, finalH / 2, waveAmplitude, 0.8), {\n    x: w / 2 + w / 2 * 0.1,\n    y: -finalH / 2\n  }, {\n    x: -w / 2 - w / 2 * 0.1,\n    y: -finalH / 2\n  }, {\n    x: -w / 2,\n    y: -finalH / 2\n  }, {\n    x: -w / 2,\n    y: finalH / 2 * 1.1\n  }, {\n    x: -w / 2,\n    y: -finalH / 2\n  }];\n  const poly = rc.polygon(points.map(p => [p.x, p.y]), options);\n  const waveEdgeRect = shapeSvg.insert(() => poly, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\"transform\", `translate(${-w / 2 + (node.padding ?? 0) + w / 2 * 0.1 / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(linedWaveEdgedRect, \"linedWaveEdgedRect\");\n\n// src/rendering-util/rendering-elements/shapes/multiRect.ts\nimport rough33 from \"roughjs\";\nasync function multiRect(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const rectOffset = 5;\n  const x = -w / 2;\n  const y = -h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough33.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const outerPathPoints = [{\n    x: x - rectOffset,\n    y: y + rectOffset\n  }, {\n    x: x - rectOffset,\n    y: y + h + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + h + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h - rectOffset\n  }, {\n    x: x + w + rectOffset,\n    y: y + h - rectOffset\n  }, {\n    x: x + w + rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x + rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x + rectOffset,\n    y\n  }, {\n    x,\n    y\n  }, {\n    x,\n    y: y + rectOffset\n  }];\n  const innerPathPoints = [{\n    x,\n    y: y + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h\n  }, {\n    x: x + w,\n    y\n  }, {\n    x,\n    y\n  }];\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const outerPath = createPathFromPoints(outerPathPoints);\n  const outerNode = rc.path(outerPath, options);\n  const innerPath = createPathFromPoints(innerPathPoints);\n  const innerNode = rc.path(innerPath, {\n    ...options,\n    fill: \"none\"\n  });\n  const multiRect2 = shapeSvg.insert(() => innerNode, \":first-child\");\n  multiRect2.insert(() => outerNode, \":first-child\");\n  multiRect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    multiRect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    multiRect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", `translate(${-(bbox.width / 2) - rectOffset - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, multiRect2);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(multiRect, \"multiRect\");\n\n// src/rendering-util/rendering-elements/shapes/multiWaveEdgedRectangle.ts\nimport rough34 from \"roughjs\";\nasync function multiWaveEdgedRectangle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const finalH = h + waveAmplitude;\n  const x = -w / 2;\n  const y = -finalH / 2;\n  const rectOffset = 5;\n  const {\n    cssStyles\n  } = node;\n  const wavePoints = generateFullSineWavePoints(x - rectOffset, y + finalH + rectOffset, x + w - rectOffset, y + finalH + rectOffset, waveAmplitude, 0.8);\n  const lastWavePoint = wavePoints?.[wavePoints.length - 1];\n  const outerPathPoints = [{\n    x: x - rectOffset,\n    y: y + rectOffset\n  }, {\n    x: x - rectOffset,\n    y: y + finalH + rectOffset\n  }, ...wavePoints, {\n    x: x + w - rectOffset,\n    y: lastWavePoint.y - rectOffset\n  }, {\n    x: x + w,\n    y: lastWavePoint.y - rectOffset\n  }, {\n    x: x + w,\n    y: lastWavePoint.y - 2 * rectOffset\n  }, {\n    x: x + w + rectOffset,\n    y: lastWavePoint.y - 2 * rectOffset\n  }, {\n    x: x + w + rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x + rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x + rectOffset,\n    y\n  }, {\n    x,\n    y\n  }, {\n    x,\n    y: y + rectOffset\n  }];\n  const innerPathPoints = [{\n    x,\n    y: y + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: y + rectOffset\n  }, {\n    x: x + w - rectOffset,\n    y: lastWavePoint.y - rectOffset\n  }, {\n    x: x + w,\n    y: lastWavePoint.y - rectOffset\n  }, {\n    x: x + w,\n    y\n  }, {\n    x,\n    y\n  }];\n  const rc = rough34.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const outerPath = createPathFromPoints(outerPathPoints);\n  const outerNode = rc.path(outerPath, options);\n  const innerPath = createPathFromPoints(innerPathPoints);\n  const innerNode = rc.path(innerPath, options);\n  const shape = shapeSvg.insert(() => outerNode, \":first-child\");\n  shape.insert(() => innerNode);\n  shape.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  shape.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\"transform\", `translate(${-(bbox.width / 2) - rectOffset - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, shape);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(multiWaveEdgedRectangle, \"multiWaveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/note.ts\nimport rough35 from \"roughjs\";\nasync function note(parent, node, {\n  config: {\n    themeVariables\n  }\n}) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const useHtmlLabels = node.useHtmlLabels || getConfig().flowchart?.htmlLabels !== false;\n  if (!useHtmlLabels) {\n    node.centerLabel = true;\n  }\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const totalHeight = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough35.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: themeVariables.noteBkgColor,\n    stroke: themeVariables.noteBorderColor\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const noteShapeNode = rc.rectangle(x, y, totalWidth, totalHeight, options);\n  const rect2 = shapeSvg.insert(() => noteShapeNode, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(note, \"note\");\n\n// src/rendering-util/rendering-elements/shapes/question.ts\nimport rough36 from \"roughjs\";\nvar createDecisionBoxPathD = /* @__PURE__ */__name((x, y, size) => {\n  return [`M${x + size / 2},${y}`, `L${x + size},${y - size / 2}`, `L${x + size / 2},${y - size}`, `L${x},${y - size / 2}`, \"Z\"].join(\" \");\n}, \"createDecisionBoxPathD\");\nasync function question(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const s = w + h;\n  const points = [{\n    x: s / 2,\n    y: 0\n  }, {\n    x: s,\n    y: -s / 2\n  }, {\n    x: s / 2,\n    y: -s\n  }, {\n    x: 0,\n    y: -s / 2\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough36.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createDecisionBoxPathD(0, 0, s);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-s / 2}, ${s / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, s, s, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    log.debug(\"APA12 Intersect called SPLIT\\npoint:\", point, \"\\nnode:\\n\", node, \"\\nres:\", intersect_default.polygon(node, points, point));\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(question, \"question\");\n\n// src/rendering-util/rendering-elements/shapes/rectLeftInvArrow.ts\nimport rough37 from \"roughjs\";\nasync function rect_left_inv_arrow(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const notch = y / 2;\n  const points = [{\n    x: x + notch,\n    y\n  }, {\n    x,\n    y: 0\n  }, {\n    x: x + notch,\n    y: -y\n  }, {\n    x: -x,\n    y: -y\n  }, {\n    x: -x,\n    y\n  }];\n  const {\n    cssStyles\n  } = node;\n  const rc = rough37.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => roughNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-notch / 2},0)`);\n  label.attr(\"transform\", `translate(${-notch / 2 - bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(rect_left_inv_arrow, \"rect_left_inv_arrow\");\n\n// src/rendering-util/rendering-elements/shapes/rectWithTitle.ts\nimport { select as select4 } from \"d3\";\nimport rough38 from \"roughjs\";\nasync function rectWithTitle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  let classes;\n  if (!node.cssClasses) {\n    classes = \"node default\";\n  } else {\n    classes = \"node \" + node.cssClasses;\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", classes).attr(\"id\", node.domId || node.id);\n  const g = shapeSvg.insert(\"g\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", nodeStyles);\n  const description = node.description;\n  const title = node.label;\n  const text2 = label.node().appendChild(await createLabel_default(title, node.labelStyle, true, true));\n  let bbox = {\n    width: 0,\n    height: 0\n  };\n  if (evaluate(getConfig2()?.flowchart?.htmlLabels)) {\n    const div2 = text2.children[0];\n    const dv2 = select4(text2);\n    bbox = div2.getBoundingClientRect();\n    dv2.attr(\"width\", bbox.width);\n    dv2.attr(\"height\", bbox.height);\n  }\n  log.info(\"Text 2\", description);\n  const textRows = description || [];\n  const titleBox = text2.getBBox();\n  const descr = label.node().appendChild(await createLabel_default(textRows.join ? textRows.join(\"<br/>\") : textRows, node.labelStyle, true, true));\n  const div = descr.children[0];\n  const dv = select4(descr);\n  bbox = div.getBoundingClientRect();\n  dv.attr(\"width\", bbox.width);\n  dv.attr(\"height\", bbox.height);\n  const halfPadding = (node.padding || 0) / 2;\n  select4(descr).attr(\"transform\", \"translate( \" + (bbox.width > titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) + \", \" + (titleBox.height + halfPadding + 5) + \")\");\n  select4(text2).attr(\"transform\", \"translate( \" + (bbox.width < titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) + \", 0)\");\n  bbox = label.node().getBBox();\n  label.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + (-bbox.height / 2 - halfPadding + 3) + \")\");\n  const totalWidth = bbox.width + (node.padding || 0);\n  const totalHeight = bbox.height + (node.padding || 0);\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  let rect2;\n  let innerLine;\n  if (node.look === \"handDrawn\") {\n    const rc = rough38.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, node.rx || 0), options);\n    const roughLine = rc.line(-bbox.width / 2 - halfPadding, -bbox.height / 2 - halfPadding + titleBox.height + halfPadding, bbox.width / 2 + halfPadding, -bbox.height / 2 - halfPadding + titleBox.height + halfPadding, options);\n    innerLine = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughLine;\n    }, \":first-child\");\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n  } else {\n    rect2 = g.insert(\"rect\", \":first-child\");\n    innerLine = g.insert(\"line\");\n    rect2.attr(\"class\", \"outer title-state\").attr(\"style\", nodeStyles).attr(\"x\", -bbox.width / 2 - halfPadding).attr(\"y\", -bbox.height / 2 - halfPadding).attr(\"width\", bbox.width + (node.padding || 0)).attr(\"height\", bbox.height + (node.padding || 0));\n    innerLine.attr(\"class\", \"divider\").attr(\"x1\", -bbox.width / 2 - halfPadding).attr(\"x2\", bbox.width / 2 + halfPadding).attr(\"y1\", -bbox.height / 2 - halfPadding + titleBox.height + halfPadding).attr(\"y2\", -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(rectWithTitle, \"rectWithTitle\");\n\n// src/rendering-util/rendering-elements/shapes/roundedRect.ts\nasync function roundedRect(parent, node) {\n  const options = {\n    rx: 5,\n    ry: 5,\n    classes: \"\",\n    labelPaddingX: (node?.padding || 0) * 1,\n    labelPaddingY: (node?.padding || 0) * 1\n  };\n  return drawRect(parent, node, options);\n}\n__name(roundedRect, \"roundedRect\");\n\n// src/rendering-util/rendering-elements/shapes/shadedProcess.ts\nimport rough39 from \"roughjs\";\nasync function shadedProcess(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const halfPadding = node?.padding ?? 0;\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough39.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x,\n    y\n  }, {\n    x: x + w + 8,\n    y\n  }, {\n    x: x + w + 8,\n    y: y + h\n  }, {\n    x: x - 8,\n    y: y + h\n  }, {\n    x: x - 8,\n    y\n  }, {\n    x,\n    y\n  }, {\n    x,\n    y: y + h\n  }];\n  const roughNode = rc.polygon(points.map(p => [p.x, p.y]), options);\n  const rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  if (cssStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", `translate(${-w / 2 + 4 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(shadedProcess, \"shadedProcess\");\n\n// src/rendering-util/rendering-elements/shapes/slopedRect.ts\nimport rough40 from \"roughjs\";\nasync function slopedRect(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough40.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x,\n    y\n  }, {\n    x,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y - h / 2\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(0, ${h / 4})`);\n  label.attr(\"transform\", `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))}, ${-h / 4 + (node.padding ?? 0) - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(slopedRect, \"slopedRect\");\n\n// src/rendering-util/rendering-elements/shapes/squareRect.ts\nasync function squareRect2(parent, node) {\n  const options = {\n    rx: 0,\n    ry: 0,\n    classes: \"\",\n    labelPaddingX: (node?.padding || 0) * 2,\n    labelPaddingY: (node?.padding || 0) * 1\n  };\n  return drawRect(parent, node, options);\n}\n__name(squareRect2, \"squareRect\");\n\n// src/rendering-util/rendering-elements/shapes/stadium.ts\nimport rough41 from \"roughjs\";\nasync function stadium(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + node.padding;\n  const w = bbox.width + h / 4 + node.padding;\n  let rect2;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough41.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createRoundedRectPathD(-w / 2, -h / 2, w, h, h / 2);\n    const roughNode = rc.path(pathData, options);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"rx\", h / 2).attr(\"ry\", h / 2).attr(\"x\", -w / 2).attr(\"y\", -h / 2).attr(\"width\", w).attr(\"height\", h);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(stadium, \"stadium\");\n\n// src/rendering-util/rendering-elements/shapes/state.ts\nasync function state(parent, node) {\n  const options = {\n    rx: 5,\n    ry: 5,\n    classes: \"flowchart-node\"\n  };\n  return drawRect(parent, node, options);\n}\n__name(state, \"state\");\n\n// src/rendering-util/rendering-elements/shapes/stateEnd.ts\nimport rough42 from \"roughjs\";\nfunction stateEnd(parent, node, {\n  config: {\n    themeVariables\n  }\n}) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    cssStyles\n  } = node;\n  const {\n    lineColor,\n    stateBorder,\n    nodeBorder\n  } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"node default\").attr(\"id\", node.domId || node.id);\n  const rc = rough42.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughNode = rc.circle(0, 0, 14, {\n    ...options,\n    stroke: lineColor,\n    strokeWidth: 2\n  });\n  const innerFill = stateBorder ?? nodeBorder;\n  const roughInnerNode = rc.circle(0, 0, 5, {\n    ...options,\n    fill: innerFill,\n    stroke: innerFill,\n    strokeWidth: 2,\n    fillStyle: \"solid\"\n  });\n  const circle2 = shapeSvg.insert(() => roughNode, \":first-child\");\n  circle2.insert(() => roughInnerNode);\n  if (cssStyles) {\n    circle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles) {\n    circle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, circle2);\n  node.intersect = function (point) {\n    return intersect_default.circle(node, 7, point);\n  };\n  return shapeSvg;\n}\n__name(stateEnd, \"stateEnd\");\n\n// src/rendering-util/rendering-elements/shapes/stateStart.ts\nimport rough43 from \"roughjs\";\nfunction stateStart(parent, node, {\n  config: {\n    themeVariables\n  }\n}) {\n  const {\n    lineColor\n  } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"node default\").attr(\"id\", node.domId || node.id);\n  let circle2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough43.svg(shapeSvg);\n    const roughNode = rc.circle(0, 0, 14, solidStateFill(lineColor));\n    circle2 = shapeSvg.insert(() => roughNode);\n    circle2.attr(\"class\", \"state-start\").attr(\"r\", 7).attr(\"width\", 14).attr(\"height\", 14);\n  } else {\n    circle2 = shapeSvg.insert(\"circle\", \":first-child\");\n    circle2.attr(\"class\", \"state-start\").attr(\"r\", 7).attr(\"width\", 14).attr(\"height\", 14);\n  }\n  updateNodeBounds(node, circle2);\n  node.intersect = function (point) {\n    return intersect_default.circle(node, 7, point);\n  };\n  return shapeSvg;\n}\n__name(stateStart, \"stateStart\");\n\n// src/rendering-util/rendering-elements/shapes/subroutine.ts\nimport rough44 from \"roughjs\";\nasync function subroutine(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const halfPadding = (node?.padding || 0) / 2;\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: w,\n    y: 0\n  }, {\n    x: w,\n    y: -h\n  }, {\n    x: 0,\n    y: -h\n  }, {\n    x: 0,\n    y: 0\n  }, {\n    x: -8,\n    y: 0\n  }, {\n    x: w + 8,\n    y: 0\n  }, {\n    x: w + 8,\n    y: -h\n  }, {\n    x: -8,\n    y: -h\n  }, {\n    x: -8,\n    y: 0\n  }];\n  if (node.look === \"handDrawn\") {\n    const rc = rough44.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.rectangle(x - 8, y, w + 16, h, options);\n    const l1 = rc.line(x, y, x, y + h, options);\n    const l2 = rc.line(x + w, y, x + w, y + h, options);\n    shapeSvg.insert(() => l1, \":first-child\");\n    shapeSvg.insert(() => l2, \":first-child\");\n    const rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    const {\n      cssStyles\n    } = node;\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n    updateNodeBounds(node, rect2);\n  } else {\n    const el = insertPolygonShape(shapeSvg, w, h, points);\n    if (nodeStyles) {\n      el.attr(\"style\", nodeStyles);\n    }\n    updateNodeBounds(node, el);\n  }\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(subroutine, \"subroutine\");\n\n// src/rendering-util/rendering-elements/shapes/taggedRect.ts\nimport rough45 from \"roughjs\";\nasync function taggedRect(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const tagWidth = 0.2 * h;\n  const tagHeight = 0.2 * h;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough45.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const rectPoints = [{\n    x: x - tagWidth / 2,\n    y\n  }, {\n    x: x + w + tagWidth / 2,\n    y\n  }, {\n    x: x + w + tagWidth / 2,\n    y: y + h\n  }, {\n    x: x - tagWidth / 2,\n    y: y + h\n  }];\n  const tagPoints = [{\n    x: x + w - tagWidth / 2,\n    y: y + h\n  }, {\n    x: x + w + tagWidth / 2,\n    y: y + h\n  }, {\n    x: x + w + tagWidth / 2,\n    y: y + h - tagHeight\n  }];\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectNode = rc.path(rectPath, options);\n  const tagPath = createPathFromPoints(tagPoints);\n  const tagNode = rc.path(tagPath, {\n    ...options,\n    fillStyle: \"solid\"\n  });\n  const taggedRect2 = shapeSvg.insert(() => tagNode, \":first-child\");\n  taggedRect2.insert(() => rectNode, \":first-child\");\n  taggedRect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    taggedRect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    taggedRect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, taggedRect2);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(taggedRect, \"taggedRect\");\n\n// src/rendering-util/rendering-elements/shapes/taggedWaveEdgedRectangle.ts\nimport rough46 from \"roughjs\";\nasync function taggedWaveEdgedRectangle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const tagWidth = 0.2 * w;\n  const tagHeight = 0.2 * h;\n  const finalH = h + waveAmplitude;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough46.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 - w / 2 * 0.1,\n    y: finalH / 2\n  }, ...generateFullSineWavePoints(-w / 2 - w / 2 * 0.1, finalH / 2, w / 2 + w / 2 * 0.1, finalH / 2, waveAmplitude, 0.8), {\n    x: w / 2 + w / 2 * 0.1,\n    y: -finalH / 2\n  }, {\n    x: -w / 2 - w / 2 * 0.1,\n    y: -finalH / 2\n  }];\n  const x = -w / 2 + w / 2 * 0.1;\n  const y = -finalH / 2 - tagHeight * 0.4;\n  const tagPoints = [{\n    x: x + w - tagWidth,\n    y: (y + h) * 1.4\n  }, {\n    x: x + w,\n    y: y + h - tagHeight\n  }, {\n    x: x + w,\n    y: (y + h) * 0.9\n  }, ...generateFullSineWavePoints(x + w, (y + h) * 1.3, x + w - tagWidth, (y + h) * 1.5, -h * 0.03, 0.5)];\n  const waveEdgeRectPath = createPathFromPoints(points);\n  const waveEdgeRectNode = rc.path(waveEdgeRectPath, options);\n  const taggedWaveEdgeRectPath = createPathFromPoints(tagPoints);\n  const taggedWaveEdgeRectNode = rc.path(taggedWaveEdgeRectPath, {\n    ...options,\n    fillStyle: \"solid\"\n  });\n  const waveEdgeRect = shapeSvg.insert(() => taggedWaveEdgeRectNode, \":first-child\");\n  waveEdgeRect.insert(() => waveEdgeRectNode, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\"transform\", `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(taggedWaveEdgedRectangle, \"taggedWaveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/text.ts\nasync function text(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + node.padding, node?.width || 0);\n  const totalHeight = Math.max(bbox.height + node.padding, node?.height || 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  rect2.attr(\"class\", \"text\").attr(\"style\", nodeStyles).attr(\"rx\", 0).attr(\"ry\", 0).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(text, \"text\");\n\n// src/rendering-util/rendering-elements/shapes/tiltedCylinder.ts\nimport rough47 from \"roughjs\";\nvar createCylinderPathD3 = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return `M${x},${y}\n    a${rx},${ry} 0,0,1 ${0},${-height}\n    l${width},${0}\n    a${rx},${ry} 0,0,1 ${0},${height}\n    M${width},${-height}\n    a${rx},${ry} 0,0,0 ${0},${height}\n    l${-width},${0}`;\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD3 = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [`M${x},${y}`, `M${x + width},${y}`, `a${rx},${ry} 0,0,0 ${0},${-height}`, `l${-width},0`, `a${rx},${ry} 0,0,0 ${0},${height}`, `l${width},0`].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD3 = /* @__PURE__ */__name((x, y, width, height, rx, ry) => {\n  return [`M${x + width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 0,${height}`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function tiltedCylinder(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label,\n    halfPadding\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const labelPadding = node.look === \"neo\" ? halfPadding * 2 : halfPadding;\n  const h = bbox.height + labelPadding;\n  const ry = h / 2;\n  const rx = ry / (2.5 + h / 50);\n  const w = bbox.width + rx + labelPadding;\n  const {\n    cssStyles\n  } = node;\n  let cylinder2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough47.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD3(0, 0, w, h, rx, ry);\n    const innerPathData = createInnerCylinderPathD3(0, 0, w, h, rx, ry);\n    const outerNode = rc.path(outerPathData, userNodeOverrides(node, {}));\n    const innerLine = rc.path(innerPathData, userNodeOverrides(node, {\n      fill: \"none\"\n    }));\n    cylinder2 = shapeSvg.insert(() => innerLine, \":first-child\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD3(0, 0, w, h, rx, ry);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.selectAll(\"path\").attr(\"style\", cssStyles);\n    }\n    if (nodeStyles) {\n      cylinder2.selectAll(\"path\").attr(\"style\", nodeStyles);\n    }\n  }\n  cylinder2.attr(\"label-offset-x\", rx);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${h / 2} )`);\n  label.attr(\"transform\", `translate(${-(bbox.width / 2) - rx - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, cylinder2);\n  node.intersect = function (point) {\n    const pos = intersect_default.rect(node, point);\n    const y = pos.y - (node.y ?? 0);\n    if (ry != 0 && (Math.abs(y) < (node.height ?? 0) / 2 || Math.abs(y) == (node.height ?? 0) / 2 && Math.abs(pos.x - (node.x ?? 0)) > (node.width ?? 0) / 2 - rx)) {\n      let x = rx * rx * (1 - y * y / (ry * ry));\n      if (x != 0) {\n        x = Math.sqrt(Math.abs(x));\n      }\n      x = rx - x;\n      if (point.x - (node.x ?? 0) > 0) {\n        x = -x;\n      }\n      pos.x += x;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(tiltedCylinder, \"tiltedCylinder\");\n\n// src/rendering-util/rendering-elements/shapes/trapezoid.ts\nimport rough48 from \"roughjs\";\nasync function trapezoid(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [{\n    x: -3 * h / 6,\n    y: 0\n  }, {\n    x: w + 3 * h / 6,\n    y: 0\n  }, {\n    x: w,\n    y: -h\n  }, {\n    x: 0,\n    y: -h\n  }];\n  let polygon;\n  const {\n    cssStyles\n  } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough48.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(trapezoid, \"trapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/trapezoidalPentagon.ts\nimport rough49 from \"roughjs\";\nasync function trapezoidalPentagon(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 60,\n    minHeight = 20;\n  const w = Math.max(minWidth, bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const {\n    cssStyles\n  } = node;\n  const rc = rough49.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 * 0.8,\n    y: -h / 2\n  }, {\n    x: w / 2 * 0.8,\n    y: -h / 2\n  }, {\n    x: w / 2,\n    y: -h / 2 * 0.6\n  }, {\n    x: w / 2,\n    y: h / 2\n  }, {\n    x: -w / 2,\n    y: h / 2\n  }, {\n    x: -w / 2,\n    y: -h / 2 * 0.6\n  }];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(trapezoidalPentagon, \"trapezoidalPentagon\");\n\n// src/rendering-util/rendering-elements/shapes/triangle.ts\nimport rough50 from \"roughjs\";\nasync function triangle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const useHtmlLabels = evaluate(getConfig2().flowchart?.htmlLabels);\n  const w = bbox.width + (node.padding ?? 0);\n  const h = w + bbox.height;\n  const tw = w + bbox.height;\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: tw,\n    y: 0\n  }, {\n    x: tw / 2,\n    y: -h\n  }];\n  const {\n    cssStyles\n  } = node;\n  const rc = rough50.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-h / 2}, ${h / 2})`);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  label.attr(\"transform\", `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${h / 2 - (bbox.height + (node.padding ?? 0) / (useHtmlLabels ? 2 : 1) - (bbox.y - (bbox.top ?? 0)))})`);\n  node.intersect = function (point) {\n    log.info(\"Triangle intersect\", node, points, point);\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(triangle, \"triangle\");\n\n// src/rendering-util/rendering-elements/shapes/waveEdgedRectangle.ts\nimport rough51 from \"roughjs\";\nasync function waveEdgedRectangle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 8;\n  const finalH = h + waveAmplitude;\n  const {\n    cssStyles\n  } = node;\n  const minWidth = 70;\n  const widthDif = minWidth - w;\n  const extraW = widthDif > 0 ? widthDif / 2 : 0;\n  const rc = rough51.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2 - extraW,\n    y: finalH / 2\n  }, ...generateFullSineWavePoints(-w / 2 - extraW, finalH / 2, w / 2 + extraW, finalH / 2, waveAmplitude, 0.8), {\n    x: w / 2 + extraW,\n    y: -finalH / 2\n  }, {\n    x: -w / 2 - extraW,\n    y: -finalH / 2\n  }];\n  const waveEdgeRectPath = createPathFromPoints(points);\n  const waveEdgeRectNode = rc.path(waveEdgeRectPath, options);\n  const waveEdgeRect = shapeSvg.insert(() => waveEdgeRectNode, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\"transform\", `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(waveEdgedRectangle, \"waveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/waveRectangle.ts\nimport rough52 from \"roughjs\";\nasync function waveRectangle(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 100;\n  const minHeight = 50;\n  const baseWidth = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const baseHeight = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const aspectRatio = baseWidth / baseHeight;\n  let w = baseWidth;\n  let h = baseHeight;\n  if (w > h * aspectRatio) {\n    h = w / aspectRatio;\n  } else {\n    w = h * aspectRatio;\n  }\n  w = Math.max(w, minWidth);\n  h = Math.max(h, minHeight);\n  const waveAmplitude = Math.min(h * 0.2, h / 4);\n  const finalH = h + waveAmplitude * 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough52.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [{\n    x: -w / 2,\n    y: finalH / 2\n  }, ...generateFullSineWavePoints(-w / 2, finalH / 2, w / 2, finalH / 2, waveAmplitude, 1), {\n    x: w / 2,\n    y: -finalH / 2\n  }, ...generateFullSineWavePoints(w / 2, -finalH / 2, -w / 2, -finalH / 2, waveAmplitude, -1)];\n  const waveRectPath = createPathFromPoints(points);\n  const waveRectNode = rc.path(waveRectPath, options);\n  const waveRect = shapeSvg.insert(() => waveRectNode, \":first-child\");\n  waveRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, waveRect);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(waveRectangle, \"waveRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/windowPane.ts\nimport rough53 from \"roughjs\";\nasync function windowPane(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const {\n    shapeSvg,\n    bbox,\n    label\n  } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const rectOffset = 5;\n  const x = -w / 2;\n  const y = -h / 2;\n  const {\n    cssStyles\n  } = node;\n  const rc = rough53.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const outerPathPoints = [{\n    x: x - rectOffset,\n    y: y - rectOffset\n  }, {\n    x: x - rectOffset,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y + h\n  }, {\n    x: x + w,\n    y: y - rectOffset\n  }];\n  const path = `M${x - rectOffset},${y - rectOffset} L${x + w},${y - rectOffset} L${x + w},${y + h} L${x - rectOffset},${y + h} L${x - rectOffset},${y - rectOffset}\n                M${x - rectOffset},${y} L${x + w},${y}\n                M${x},${y - rectOffset} L${x},${y + h}`;\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const no = rc.path(path, options);\n  const windowPane2 = shapeSvg.insert(() => no, \":first-child\");\n  windowPane2.attr(\"transform\", `translate(${rectOffset / 2}, ${rectOffset / 2})`);\n  windowPane2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    windowPane2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    windowPane2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\"transform\", `translate(${-(bbox.width / 2) + rectOffset / 2 - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset / 2 - (bbox.y - (bbox.top ?? 0))})`);\n  updateNodeBounds(node, windowPane2);\n  node.intersect = function (point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(windowPane, \"windowPane\");\n\n// src/rendering-util/rendering-elements/shapes/erBox.ts\nimport rough54 from \"roughjs\";\nimport { select as select5 } from \"d3\";\nasync function erBox(parent, node) {\n  const entityNode = node;\n  if (entityNode.alias) {\n    node.label = entityNode.alias;\n  }\n  if (node.look === \"handDrawn\") {\n    const {\n      themeVariables: themeVariables2\n    } = getConfig();\n    const {\n      background\n    } = themeVariables2;\n    const backgroundNode = {\n      ...node,\n      id: node.id + \"-background\",\n      look: \"default\",\n      cssStyles: [\"stroke: none\", `fill: ${background}`]\n    };\n    await erBox(parent, backgroundNode);\n  }\n  const config = getConfig();\n  node.useHtmlLabels = config.htmlLabels;\n  let PADDING = config.er?.diagramPadding ?? 10;\n  let TEXT_PADDING = config.er?.entityPadding ?? 6;\n  const {\n    cssStyles\n  } = node;\n  const {\n    labelStyles\n  } = styles2String(node);\n  if (entityNode.attributes.length === 0 && node.label) {\n    const options2 = {\n      rx: 0,\n      ry: 0,\n      labelPaddingX: PADDING,\n      labelPaddingY: PADDING * 1.5,\n      classes: \"\"\n    };\n    if (calculateTextWidth(node.label, config) + options2.labelPaddingX * 2 < config.er.minEntityWidth) {\n      node.width = config.er.minEntityWidth;\n    }\n    const shapeSvg2 = await drawRect(parent, node, options2);\n    if (!evaluate(config.htmlLabels)) {\n      const textElement = shapeSvg2.select(\"text\");\n      const bbox = textElement.node()?.getBBox();\n      textElement.attr(\"transform\", `translate(${-bbox.width / 2}, 0)`);\n    }\n    return shapeSvg2;\n  }\n  if (!config.htmlLabels) {\n    PADDING *= 1.25;\n    TEXT_PADDING *= 1.25;\n  }\n  let cssClasses = getNodeClasses(node);\n  if (!cssClasses) {\n    cssClasses = \"node default\";\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const nameBBox = await addText(shapeSvg, node.label ?? \"\", config, 0, 0, [\"name\"], labelStyles);\n  nameBBox.height += TEXT_PADDING;\n  let yOffset = 0;\n  const yOffsets = [];\n  let maxTypeWidth = 0;\n  let maxNameWidth = 0;\n  let maxKeysWidth = 0;\n  let maxCommentWidth = 0;\n  let keysPresent = true;\n  let commentPresent = true;\n  for (const attribute of entityNode.attributes) {\n    const typeBBox = await addText(shapeSvg, attribute.type, config, 0, yOffset, [\"attribute-type\"], labelStyles);\n    maxTypeWidth = Math.max(maxTypeWidth, typeBBox.width + PADDING);\n    const nameBBox2 = await addText(shapeSvg, attribute.name, config, 0, yOffset, [\"attribute-name\"], labelStyles);\n    maxNameWidth = Math.max(maxNameWidth, nameBBox2.width + PADDING);\n    const keysBBox = await addText(shapeSvg, attribute.keys.join(), config, 0, yOffset, [\"attribute-keys\"], labelStyles);\n    maxKeysWidth = Math.max(maxKeysWidth, keysBBox.width + PADDING);\n    const commentBBox = await addText(shapeSvg, attribute.comment, config, 0, yOffset, [\"attribute-comment\"], labelStyles);\n    maxCommentWidth = Math.max(maxCommentWidth, commentBBox.width + PADDING);\n    yOffset += Math.max(typeBBox.height, nameBBox2.height, keysBBox.height, commentBBox.height) + TEXT_PADDING;\n    yOffsets.push(yOffset);\n  }\n  yOffsets.pop();\n  let totalWidthSections = 4;\n  if (maxKeysWidth <= PADDING) {\n    keysPresent = false;\n    maxKeysWidth = 0;\n    totalWidthSections--;\n  }\n  if (maxCommentWidth <= PADDING) {\n    commentPresent = false;\n    maxCommentWidth = 0;\n    totalWidthSections--;\n  }\n  const shapeBBox = shapeSvg.node().getBBox();\n  if (nameBBox.width + PADDING * 2 - (maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth) > 0) {\n    const difference = nameBBox.width + PADDING * 2 - (maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth);\n    maxTypeWidth += difference / totalWidthSections;\n    maxNameWidth += difference / totalWidthSections;\n    if (maxKeysWidth > 0) {\n      maxKeysWidth += difference / totalWidthSections;\n    }\n    if (maxCommentWidth > 0) {\n      maxCommentWidth += difference / totalWidthSections;\n    }\n  }\n  const maxWidth = maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth;\n  const rc = rough54.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const w = Math.max(shapeBBox.width + PADDING * 2, node?.width || 0, maxWidth);\n  const h = Math.max(shapeBBox.height + (yOffsets[0] || yOffset) + TEXT_PADDING, node?.height || 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  shapeSvg.selectAll(\"g:not(:first-child)\").each((_, i, nodes) => {\n    const text2 = select5(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateX = 0;\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateX = parseFloat(translate[1]);\n        translateY = parseFloat(translate[2]);\n        if (text2.attr(\"class\").includes(\"attribute-name\")) {\n          translateX += maxTypeWidth;\n        } else if (text2.attr(\"class\").includes(\"attribute-keys\")) {\n          translateX += maxTypeWidth + maxNameWidth;\n        } else if (text2.attr(\"class\").includes(\"attribute-comment\")) {\n          translateX += maxTypeWidth + maxNameWidth + maxKeysWidth;\n        }\n      }\n    }\n    text2.attr(\"transform\", `translate(${x + PADDING / 2 + translateX}, ${translateY + y + nameBBox.height + TEXT_PADDING / 2})`);\n  });\n  shapeSvg.select(\".name\").attr(\"transform\", \"translate(\" + -nameBBox.width / 2 + \", \" + (y + TEXT_PADDING / 2) + \")\");\n  const roughRect = rc.rectangle(x, y, w, h, options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\").attr(\"style\", cssStyles.join(\"\"));\n  const {\n    themeVariables\n  } = getConfig();\n  const {\n    rowEven,\n    rowOdd,\n    nodeBorder\n  } = themeVariables;\n  yOffsets.push(0);\n  for (const [i, yOffset2] of yOffsets.entries()) {\n    if (i === 0 && yOffsets.length > 1) {\n      continue;\n    }\n    const isEven = i % 2 === 0 && yOffset2 !== 0;\n    const roughRect2 = rc.rectangle(x, nameBBox.height + y + yOffset2, w, nameBBox.height, {\n      ...options,\n      fill: isEven ? rowEven : rowOdd,\n      stroke: nodeBorder\n    });\n    shapeSvg.insert(() => roughRect2, \"g.label\").attr(\"style\", cssStyles.join(\"\")).attr(\"class\", `row-rect-${i % 2 === 0 ? \"even\" : \"odd\"}`);\n  }\n  let roughLine = rc.line(x, nameBBox.height + y, w + x, nameBBox.height + y, options);\n  shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  roughLine = rc.line(maxTypeWidth + x, nameBBox.height + y, maxTypeWidth + x, h + y, options);\n  shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  if (keysPresent) {\n    roughLine = rc.line(maxTypeWidth + maxNameWidth + x, nameBBox.height + y, maxTypeWidth + maxNameWidth + x, h + y, options);\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  if (commentPresent) {\n    roughLine = rc.line(maxTypeWidth + maxNameWidth + maxKeysWidth + x, nameBBox.height + y, maxTypeWidth + maxNameWidth + maxKeysWidth + x, h + y, options);\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  for (const yOffset2 of yOffsets) {\n    roughLine = rc.line(x, nameBBox.height + y + yOffset2, w + x, nameBBox.height + y + yOffset2, options);\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(erBox, \"erBox\");\nasync function addText(shapeSvg, labelText, config, translateX = 0, translateY = 0, classes = [], style = \"\") {\n  const label = shapeSvg.insert(\"g\").attr(\"class\", `label ${classes.join(\" \")}`).attr(\"transform\", `translate(${translateX}, ${translateY})`).attr(\"style\", style);\n  if (labelText !== parseGenericTypes(labelText)) {\n    labelText = parseGenericTypes(labelText);\n    labelText = labelText.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  }\n  const text2 = label.node().appendChild(await createText(label, labelText, {\n    width: calculateTextWidth(labelText, config) + 100,\n    style,\n    useHtmlLabels: config.htmlLabels\n  }, config));\n  if (labelText.includes(\"&lt;\") || labelText.includes(\"&gt;\")) {\n    let child = text2.children[0];\n    child.textContent = child.textContent.replaceAll(\"&lt;\", \"<\").replaceAll(\"&gt;\", \">\");\n    while (child.childNodes[0]) {\n      child = child.childNodes[0];\n      child.textContent = child.textContent.replaceAll(\"&lt;\", \"<\").replaceAll(\"&gt;\", \">\");\n    }\n  }\n  let bbox = text2.getBBox();\n  if (evaluate(config.htmlLabels)) {\n    const div = text2.children[0];\n    div.style.textAlign = \"start\";\n    const dv = select5(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  return bbox;\n}\n__name(addText, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/classBox.ts\nimport { select as select7 } from \"d3\";\nimport rough55 from \"roughjs\";\n\n// src/diagrams/class/shapeUtil.ts\nimport { select as select6 } from \"d3\";\nasync function textHelper(parent, node, config, useHtmlLabels, GAP = config.class.padding ?? 12) {\n  const TEXT_PADDING = !useHtmlLabels ? 3 : 0;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId || node.id);\n  let annotationGroup = null;\n  let labelGroup = null;\n  let membersGroup = null;\n  let methodsGroup = null;\n  let annotationGroupHeight = 0;\n  let labelGroupHeight = 0;\n  let membersGroupHeight = 0;\n  annotationGroup = shapeSvg.insert(\"g\").attr(\"class\", \"annotation-group text\");\n  if (node.annotations.length > 0) {\n    const annotation = node.annotations[0];\n    await addText2(annotationGroup, {\n      text: `\\xAB${annotation}\\xBB`\n    }, 0);\n    const annotationGroupBBox = annotationGroup.node().getBBox();\n    annotationGroupHeight = annotationGroupBBox.height;\n  }\n  labelGroup = shapeSvg.insert(\"g\").attr(\"class\", \"label-group text\");\n  await addText2(labelGroup, node, 0, [\"font-weight: bolder\"]);\n  const labelGroupBBox = labelGroup.node().getBBox();\n  labelGroupHeight = labelGroupBBox.height;\n  membersGroup = shapeSvg.insert(\"g\").attr(\"class\", \"members-group text\");\n  let yOffset = 0;\n  for (const member of node.members) {\n    const height = await addText2(membersGroup, member, yOffset, [member.parseClassifier()]);\n    yOffset += height + TEXT_PADDING;\n  }\n  membersGroupHeight = membersGroup.node().getBBox().height;\n  if (membersGroupHeight <= 0) {\n    membersGroupHeight = GAP / 2;\n  }\n  methodsGroup = shapeSvg.insert(\"g\").attr(\"class\", \"methods-group text\");\n  let methodsYOffset = 0;\n  for (const method of node.methods) {\n    const height = await addText2(methodsGroup, method, methodsYOffset, [method.parseClassifier()]);\n    methodsYOffset += height + TEXT_PADDING;\n  }\n  let bbox = shapeSvg.node().getBBox();\n  if (annotationGroup !== null) {\n    const annotationGroupBBox = annotationGroup.node().getBBox();\n    annotationGroup.attr(\"transform\", `translate(${-annotationGroupBBox.width / 2})`);\n  }\n  labelGroup.attr(\"transform\", `translate(${-labelGroupBBox.width / 2}, ${annotationGroupHeight})`);\n  bbox = shapeSvg.node().getBBox();\n  membersGroup.attr(\"transform\", `translate(${0}, ${annotationGroupHeight + labelGroupHeight + GAP * 2})`);\n  bbox = shapeSvg.node().getBBox();\n  methodsGroup.attr(\"transform\", `translate(${0}, ${annotationGroupHeight + labelGroupHeight + (membersGroupHeight ? membersGroupHeight + GAP * 4 : GAP * 2)})`);\n  bbox = shapeSvg.node().getBBox();\n  return {\n    shapeSvg,\n    bbox\n  };\n}\n__name(textHelper, \"textHelper\");\nasync function addText2(parentGroup, node, yOffset, styles = []) {\n  const textEl = parentGroup.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", styles.join(\"; \"));\n  const config = getConfig();\n  let useHtmlLabels = \"useHtmlLabels\" in node ? node.useHtmlLabels : evaluate(config.htmlLabels) ?? true;\n  let textContent = \"\";\n  if (\"text\" in node) {\n    textContent = node.text;\n  } else {\n    textContent = node.label;\n  }\n  if (!useHtmlLabels && textContent.startsWith(\"\\\\\")) {\n    textContent = textContent.substring(1);\n  }\n  if (hasKatex(textContent)) {\n    useHtmlLabels = true;\n  }\n  const text2 = await createText(textEl, sanitizeText2(decodeEntities(textContent)), {\n    width: calculateTextWidth(textContent, config) + 50,\n    // Add room for error when splitting text into multiple lines\n    classes: \"markdown-node-label\",\n    useHtmlLabels\n  }, config);\n  let bbox;\n  let numberOfLines = 1;\n  if (!useHtmlLabels) {\n    if (styles.includes(\"font-weight: bolder\")) {\n      select6(text2).selectAll(\"tspan\").attr(\"font-weight\", \"\");\n    }\n    numberOfLines = text2.children.length;\n    const textChild = text2.children[0];\n    if (text2.textContent === \"\" || text2.textContent.includes(\"&gt\")) {\n      textChild.textContent = textContent[0] + textContent.substring(1).replaceAll(\"&gt;\", \">\").replaceAll(\"&lt;\", \"<\").trim();\n      const preserveSpace = textContent[1] === \" \";\n      if (preserveSpace) {\n        textChild.textContent = textChild.textContent[0] + \" \" + textChild.textContent.substring(1);\n      }\n    }\n    if (textChild.textContent === \"undefined\") {\n      textChild.textContent = \"\";\n    }\n    bbox = text2.getBBox();\n  } else {\n    const div = text2.children[0];\n    const dv = select6(text2);\n    numberOfLines = div.innerHTML.split(\"<br>\").length;\n    if (div.innerHTML.includes(\"</math>\")) {\n      numberOfLines += div.innerHTML.split(\"<mrow>\").length - 1;\n    }\n    const images = div.getElementsByTagName(\"img\");\n    if (images) {\n      const noImgText = textContent.replace(/<img[^>]*>/g, \"\").trim() === \"\";\n      await Promise.all([...images].map(img => new Promise(res => {\n        function setupImage() {\n          img.style.display = \"flex\";\n          img.style.flexDirection = \"column\";\n          if (noImgText) {\n            const bodyFontSize = config.fontSize?.toString() ?? window.getComputedStyle(document.body).fontSize;\n            const enlargingFactor = 5;\n            const width = parseInt(bodyFontSize, 10) * enlargingFactor + \"px\";\n            img.style.minWidth = width;\n            img.style.maxWidth = width;\n          } else {\n            img.style.width = \"100%\";\n          }\n          res(img);\n        }\n        __name(setupImage, \"setupImage\");\n        setTimeout(() => {\n          if (img.complete) {\n            setupImage();\n          }\n        });\n        img.addEventListener(\"error\", setupImage);\n        img.addEventListener(\"load\", setupImage);\n      })));\n    }\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  textEl.attr(\"transform\", \"translate(0,\" + (-bbox.height / (2 * numberOfLines) + yOffset) + \")\");\n  return bbox.height;\n}\n__name(addText2, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/classBox.ts\nasync function classBox(parent, node) {\n  const config = getConfig2();\n  const PADDING = config.class.padding ?? 12;\n  const GAP = PADDING;\n  const useHtmlLabels = node.useHtmlLabels ?? evaluate(config.htmlLabels) ?? true;\n  const classNode = node;\n  classNode.annotations = classNode.annotations ?? [];\n  classNode.members = classNode.members ?? [];\n  classNode.methods = classNode.methods ?? [];\n  const {\n    shapeSvg,\n    bbox\n  } = await textHelper(parent, node, config, useHtmlLabels, GAP);\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  node.cssStyles = classNode.styles || \"\";\n  const styles = classNode.styles?.join(\";\") || nodeStyles || \"\";\n  if (!node.cssStyles) {\n    node.cssStyles = styles.replaceAll(\"!important\", \"\").split(\";\");\n  }\n  const renderExtraBox = classNode.members.length === 0 && classNode.methods.length === 0 && !config.class?.hideEmptyMembersBox;\n  const rc = rough55.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const w = bbox.width;\n  let h = bbox.height;\n  if (classNode.members.length === 0 && classNode.methods.length === 0) {\n    h += GAP;\n  } else if (classNode.members.length > 0 && classNode.methods.length === 0) {\n    h += GAP * 2;\n  }\n  const x = -w / 2;\n  const y = -h / 2;\n  const roughRect = rc.rectangle(x - PADDING, y - PADDING - (renderExtraBox ? PADDING : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING / 2 : 0), w + 2 * PADDING, h + 2 * PADDING + (renderExtraBox ? PADDING * 2 : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING : 0), options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\");\n  const rectBBox = rect2.node().getBBox();\n  shapeSvg.selectAll(\".text\").each((_, i, nodes) => {\n    const text2 = select7(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateY = parseFloat(translate[2]);\n      }\n    }\n    let newTranslateY = translateY + y + PADDING - (renderExtraBox ? PADDING : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING / 2 : 0);\n    if (!useHtmlLabels) {\n      newTranslateY -= 4;\n    }\n    let newTranslateX = x;\n    if (text2.attr(\"class\").includes(\"label-group\") || text2.attr(\"class\").includes(\"annotation-group\")) {\n      newTranslateX = -text2.node()?.getBBox().width / 2 || 0;\n      shapeSvg.selectAll(\"text\").each(function (_2, i2, nodes2) {\n        if (window.getComputedStyle(nodes2[i2]).textAnchor === \"middle\") {\n          newTranslateX = 0;\n        }\n      });\n    }\n    text2.attr(\"transform\", `translate(${newTranslateX}, ${newTranslateY})`);\n  });\n  const annotationGroupHeight = shapeSvg.select(\".annotation-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  const labelGroupHeight = shapeSvg.select(\".label-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  const membersGroupHeight = shapeSvg.select(\".members-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  if (classNode.members.length > 0 || classNode.methods.length > 0 || renderExtraBox) {\n    const roughLine = rc.line(rectBBox.x, annotationGroupHeight + labelGroupHeight + y + PADDING, rectBBox.x + rectBBox.width, annotationGroupHeight + labelGroupHeight + y + PADDING, options);\n    const line = shapeSvg.insert(() => roughLine);\n    line.attr(\"class\", \"divider\").attr(\"style\", styles);\n  }\n  if (renderExtraBox || classNode.members.length > 0 || classNode.methods.length > 0) {\n    const roughLine = rc.line(rectBBox.x, annotationGroupHeight + labelGroupHeight + membersGroupHeight + y + GAP * 2 + PADDING, rectBBox.x + rectBBox.width, annotationGroupHeight + labelGroupHeight + membersGroupHeight + y + PADDING + GAP * 2, options);\n    const line = shapeSvg.insert(() => roughLine);\n    line.attr(\"class\", \"divider\").attr(\"style\", styles);\n  }\n  if (classNode.look !== \"handDrawn\") {\n    shapeSvg.selectAll(\"path\").attr(\"style\", styles);\n  }\n  rect2.select(\":nth-child(2)\").attr(\"style\", styles);\n  shapeSvg.selectAll(\".divider\").select(\"path\").attr(\"style\", styles);\n  if (node.labelStyle) {\n    shapeSvg.selectAll(\"span\").attr(\"style\", node.labelStyle);\n  } else {\n    shapeSvg.selectAll(\"span\").attr(\"style\", styles);\n  }\n  if (!useHtmlLabels) {\n    const colorRegex = RegExp(/color\\s*:\\s*([^;]*)/);\n    const match = colorRegex.exec(styles);\n    if (match) {\n      const colorStyle = match[0].replace(\"color\", \"fill\");\n      shapeSvg.selectAll(\"tspan\").attr(\"style\", colorStyle);\n    } else if (labelStyles) {\n      const match2 = colorRegex.exec(labelStyles);\n      if (match2) {\n        const colorStyle = match2[0].replace(\"color\", \"fill\");\n        shapeSvg.selectAll(\"tspan\").attr(\"style\", colorStyle);\n      }\n    }\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(classBox, \"classBox\");\n\n// src/rendering-util/rendering-elements/shapes/requirementBox.ts\nimport rough56 from \"roughjs\";\nimport { select as select8 } from \"d3\";\nasync function requirementBox(parent, node) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const requirementNode = node;\n  const elementNode = node;\n  const padding = 20;\n  const gap = 20;\n  const isRequirementNode = \"verifyMethod\" in node;\n  const classes = getNodeClasses(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", classes).attr(\"id\", node.domId ?? node.id);\n  let typeHeight;\n  if (isRequirementNode) {\n    typeHeight = await addText3(shapeSvg, `&lt;&lt;${requirementNode.type}&gt;&gt;`, 0, node.labelStyle);\n  } else {\n    typeHeight = await addText3(shapeSvg, \"&lt;&lt;Element&gt;&gt;\", 0, node.labelStyle);\n  }\n  let accumulativeHeight = typeHeight;\n  const nameHeight = await addText3(shapeSvg, requirementNode.name, accumulativeHeight, node.labelStyle + \"; font-weight: bold;\");\n  accumulativeHeight += nameHeight + gap;\n  if (isRequirementNode) {\n    const idHeight = await addText3(shapeSvg, `${requirementNode.requirementId ? `Id: ${requirementNode.requirementId}` : \"\"}`, accumulativeHeight, node.labelStyle);\n    accumulativeHeight += idHeight;\n    const textHeight = await addText3(shapeSvg, `${requirementNode.text ? `Text: ${requirementNode.text}` : \"\"}`, accumulativeHeight, node.labelStyle);\n    accumulativeHeight += textHeight;\n    const riskHeight = await addText3(shapeSvg, `${requirementNode.risk ? `Risk: ${requirementNode.risk}` : \"\"}`, accumulativeHeight, node.labelStyle);\n    accumulativeHeight += riskHeight;\n    await addText3(shapeSvg, `${requirementNode.verifyMethod ? `Verification: ${requirementNode.verifyMethod}` : \"\"}`, accumulativeHeight, node.labelStyle);\n  } else {\n    const typeHeight2 = await addText3(shapeSvg, `${elementNode.type ? `Type: ${elementNode.type}` : \"\"}`, accumulativeHeight, node.labelStyle);\n    accumulativeHeight += typeHeight2;\n    await addText3(shapeSvg, `${elementNode.docRef ? `Doc Ref: ${elementNode.docRef}` : \"\"}`, accumulativeHeight, node.labelStyle);\n  }\n  const totalWidth = (shapeSvg.node()?.getBBox().width ?? 200) + padding;\n  const totalHeight = (shapeSvg.node()?.getBBox().height ?? 200) + padding;\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const rc = rough56.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughRect = rc.rectangle(x, y, totalWidth, totalHeight, options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles);\n  shapeSvg.selectAll(\".label\").each((_, i, nodes) => {\n    const text2 = select8(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateX = 0;\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateX = parseFloat(translate[1]);\n        translateY = parseFloat(translate[2]);\n      }\n    }\n    const newTranslateY = translateY - totalHeight / 2;\n    let newTranslateX = x + padding / 2;\n    if (i === 0 || i === 1) {\n      newTranslateX = translateX;\n    }\n    text2.attr(\"transform\", `translate(${newTranslateX}, ${newTranslateY + padding})`);\n  });\n  if (accumulativeHeight > typeHeight + nameHeight + gap) {\n    const roughLine = rc.line(x, y + typeHeight + nameHeight + gap, x + totalWidth, y + typeHeight + nameHeight + gap, options);\n    const dividerLine = shapeSvg.insert(() => roughLine);\n    dividerLine.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function (point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(requirementBox, \"requirementBox\");\nasync function addText3(parentGroup, inputText, yOffset, style = \"\") {\n  if (inputText === \"\") {\n    return 0;\n  }\n  const textEl = parentGroup.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", style);\n  const config = getConfig2();\n  const useHtmlLabels = config.htmlLabels ?? true;\n  const text2 = await createText(textEl, sanitizeText2(decodeEntities(inputText)), {\n    width: calculateTextWidth(inputText, config) + 50,\n    // Add room for error when splitting text into multiple lines\n    classes: \"markdown-node-label\",\n    useHtmlLabels,\n    style\n  }, config);\n  let bbox;\n  if (!useHtmlLabels) {\n    const textChild = text2.children[0];\n    for (const child of textChild.children) {\n      child.textContent = child.textContent.replaceAll(\"&gt;\", \">\").replaceAll(\"&lt;\", \"<\");\n      if (style) {\n        child.setAttribute(\"style\", style);\n      }\n    }\n    bbox = text2.getBBox();\n    bbox.height += 6;\n  } else {\n    const div = text2.children[0];\n    const dv = select8(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  textEl.attr(\"transform\", `translate(${-bbox.width / 2},${-bbox.height / 2 + yOffset})`);\n  return bbox.height;\n}\n__name(addText3, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/kanbanItem.ts\nimport rough57 from \"roughjs\";\nvar colorFromPriority = /* @__PURE__ */__name(priority => {\n  switch (priority) {\n    case \"Very High\":\n      return \"red\";\n    case \"High\":\n      return \"orange\";\n    case \"Medium\":\n      return null;\n    // no stroke\n    case \"Low\":\n      return \"blue\";\n    case \"Very Low\":\n      return \"lightblue\";\n  }\n}, \"colorFromPriority\");\nasync function kanbanItem(parent, kanbanNode, {\n  config\n}) {\n  const {\n    labelStyles,\n    nodeStyles\n  } = styles2String(kanbanNode);\n  kanbanNode.labelStyle = labelStyles || \"\";\n  const labelPaddingX = 10;\n  const orgWidth = kanbanNode.width;\n  kanbanNode.width = (kanbanNode.width ?? 200) - 10;\n  const {\n    shapeSvg,\n    bbox,\n    label: labelElTitle\n  } = await labelHelper(parent, kanbanNode, getNodeClasses(kanbanNode));\n  const padding = kanbanNode.padding || 10;\n  let ticketUrl = \"\";\n  let link;\n  if (\"ticket\" in kanbanNode && kanbanNode.ticket && config?.kanban?.ticketBaseUrl) {\n    ticketUrl = config?.kanban?.ticketBaseUrl.replace(\"#TICKET#\", kanbanNode.ticket);\n    link = shapeSvg.insert(\"svg:a\", \":first-child\").attr(\"class\", \"kanban-ticket-link\").attr(\"xlink:href\", ticketUrl).attr(\"target\", \"_blank\");\n  }\n  const options = {\n    useHtmlLabels: kanbanNode.useHtmlLabels,\n    labelStyle: kanbanNode.labelStyle || \"\",\n    width: kanbanNode.width,\n    img: kanbanNode.img,\n    padding: kanbanNode.padding || 8,\n    centerLabel: false\n  };\n  let labelEl, bbox2;\n  if (link) {\n    ({\n      label: labelEl,\n      bbox: bbox2\n    } = await insertLabel(link, \"ticket\" in kanbanNode && kanbanNode.ticket || \"\", options));\n  } else {\n    ({\n      label: labelEl,\n      bbox: bbox2\n    } = await insertLabel(shapeSvg, \"ticket\" in kanbanNode && kanbanNode.ticket || \"\", options));\n  }\n  const {\n    label: labelElAssigned,\n    bbox: bboxAssigned\n  } = await insertLabel(shapeSvg, \"assigned\" in kanbanNode && kanbanNode.assigned || \"\", options);\n  kanbanNode.width = orgWidth;\n  const labelPaddingY = 10;\n  const totalWidth = kanbanNode?.width || 0;\n  const heightAdj = Math.max(bbox2.height, bboxAssigned.height) / 2;\n  const totalHeight = Math.max(bbox.height + labelPaddingY * 2, kanbanNode?.height || 0) + heightAdj;\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  labelElTitle.attr(\"transform\", \"translate(\" + (padding - totalWidth / 2) + \", \" + (-heightAdj - bbox.height / 2) + \")\");\n  labelEl.attr(\"transform\", \"translate(\" + (padding - totalWidth / 2) + \", \" + (-heightAdj + bbox.height / 2) + \")\");\n  labelElAssigned.attr(\"transform\", \"translate(\" + (padding + totalWidth / 2 - bboxAssigned.width - 2 * labelPaddingX) + \", \" + (-heightAdj + bbox.height / 2) + \")\");\n  let rect2;\n  const {\n    rx,\n    ry\n  } = kanbanNode;\n  const {\n    cssStyles\n  } = kanbanNode;\n  if (kanbanNode.look === \"handDrawn\") {\n    const rc = rough57.svg(shapeSvg);\n    const options2 = userNodeOverrides(kanbanNode, {});\n    const roughNode = rx || ry ? rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, rx || 0), options2) : rc.rectangle(x, y, totalWidth, totalHeight, options2);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", cssStyles ? cssStyles : null);\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container __APA__\").attr(\"style\", nodeStyles).attr(\"rx\", rx ?? 5).attr(\"ry\", ry ?? 5).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n    const priority = \"priority\" in kanbanNode && kanbanNode.priority;\n    if (priority) {\n      const line = shapeSvg.append(\"line\");\n      const lineX = x + 2;\n      const y1 = y + Math.floor((rx ?? 0) / 2);\n      const y2 = y + totalHeight - Math.floor((rx ?? 0) / 2);\n      line.attr(\"x1\", lineX).attr(\"y1\", y1).attr(\"x2\", lineX).attr(\"y2\", y2).attr(\"stroke-width\", \"4\").attr(\"stroke\", colorFromPriority(priority));\n    }\n  }\n  updateNodeBounds(kanbanNode, rect2);\n  kanbanNode.height = totalHeight;\n  kanbanNode.intersect = function (point) {\n    return intersect_default.rect(kanbanNode, point);\n  };\n  return shapeSvg;\n}\n__name(kanbanItem, \"kanbanItem\");\n\n// src/rendering-util/rendering-elements/shapes.ts\nvar shapesDefs = [{\n  semanticName: \"Process\",\n  name: \"Rectangle\",\n  shortName: \"rect\",\n  description: \"Standard process shape\",\n  aliases: [\"proc\", \"process\", \"rectangle\"],\n  internalAliases: [\"squareRect\"],\n  handler: squareRect2\n}, {\n  semanticName: \"Event\",\n  name: \"Rounded Rectangle\",\n  shortName: \"rounded\",\n  description: \"Represents an event\",\n  aliases: [\"event\"],\n  internalAliases: [\"roundedRect\"],\n  handler: roundedRect\n}, {\n  semanticName: \"Terminal Point\",\n  name: \"Stadium\",\n  shortName: \"stadium\",\n  description: \"Terminal point\",\n  aliases: [\"terminal\", \"pill\"],\n  handler: stadium\n}, {\n  semanticName: \"Subprocess\",\n  name: \"Framed Rectangle\",\n  shortName: \"fr-rect\",\n  description: \"Subprocess\",\n  aliases: [\"subprocess\", \"subproc\", \"framed-rectangle\", \"subroutine\"],\n  handler: subroutine\n}, {\n  semanticName: \"Database\",\n  name: \"Cylinder\",\n  shortName: \"cyl\",\n  description: \"Database storage\",\n  aliases: [\"db\", \"database\", \"cylinder\"],\n  handler: cylinder\n}, {\n  semanticName: \"Start\",\n  name: \"Circle\",\n  shortName: \"circle\",\n  description: \"Starting point\",\n  aliases: [\"circ\"],\n  handler: circle\n}, {\n  semanticName: \"Decision\",\n  name: \"Diamond\",\n  shortName: \"diam\",\n  description: \"Decision-making step\",\n  aliases: [\"decision\", \"diamond\", \"question\"],\n  handler: question\n}, {\n  semanticName: \"Prepare Conditional\",\n  name: \"Hexagon\",\n  shortName: \"hex\",\n  description: \"Preparation or condition step\",\n  aliases: [\"hexagon\", \"prepare\"],\n  handler: hexagon\n}, {\n  semanticName: \"Data Input/Output\",\n  name: \"Lean Right\",\n  shortName: \"lean-r\",\n  description: \"Represents input or output\",\n  aliases: [\"lean-right\", \"in-out\"],\n  internalAliases: [\"lean_right\"],\n  handler: lean_right\n}, {\n  semanticName: \"Data Input/Output\",\n  name: \"Lean Left\",\n  shortName: \"lean-l\",\n  description: \"Represents output or input\",\n  aliases: [\"lean-left\", \"out-in\"],\n  internalAliases: [\"lean_left\"],\n  handler: lean_left\n}, {\n  semanticName: \"Priority Action\",\n  name: \"Trapezoid Base Bottom\",\n  shortName: \"trap-b\",\n  description: \"Priority action\",\n  aliases: [\"priority\", \"trapezoid-bottom\", \"trapezoid\"],\n  handler: trapezoid\n}, {\n  semanticName: \"Manual Operation\",\n  name: \"Trapezoid Base Top\",\n  shortName: \"trap-t\",\n  description: \"Represents a manual task\",\n  aliases: [\"manual\", \"trapezoid-top\", \"inv-trapezoid\"],\n  internalAliases: [\"inv_trapezoid\"],\n  handler: inv_trapezoid\n}, {\n  semanticName: \"Stop\",\n  name: \"Double Circle\",\n  shortName: \"dbl-circ\",\n  description: \"Represents a stop point\",\n  aliases: [\"double-circle\"],\n  internalAliases: [\"doublecircle\"],\n  handler: doublecircle\n}, {\n  semanticName: \"Text Block\",\n  name: \"Text Block\",\n  shortName: \"text\",\n  description: \"Text block\",\n  handler: text\n}, {\n  semanticName: \"Card\",\n  name: \"Notched Rectangle\",\n  shortName: \"notch-rect\",\n  description: \"Represents a card\",\n  aliases: [\"card\", \"notched-rectangle\"],\n  handler: card\n}, {\n  semanticName: \"Lined/Shaded Process\",\n  name: \"Lined Rectangle\",\n  shortName: \"lin-rect\",\n  description: \"Lined process shape\",\n  aliases: [\"lined-rectangle\", \"lined-process\", \"lin-proc\", \"shaded-process\"],\n  handler: shadedProcess\n}, {\n  semanticName: \"Start\",\n  name: \"Small Circle\",\n  shortName: \"sm-circ\",\n  description: \"Small starting point\",\n  aliases: [\"start\", \"small-circle\"],\n  internalAliases: [\"stateStart\"],\n  handler: stateStart\n}, {\n  semanticName: \"Stop\",\n  name: \"Framed Circle\",\n  shortName: \"fr-circ\",\n  description: \"Stop point\",\n  aliases: [\"stop\", \"framed-circle\"],\n  internalAliases: [\"stateEnd\"],\n  handler: stateEnd\n}, {\n  semanticName: \"Fork/Join\",\n  name: \"Filled Rectangle\",\n  shortName: \"fork\",\n  description: \"Fork or join in process flow\",\n  aliases: [\"join\"],\n  internalAliases: [\"forkJoin\"],\n  handler: forkJoin\n}, {\n  semanticName: \"Collate\",\n  name: \"Hourglass\",\n  shortName: \"hourglass\",\n  description: \"Represents a collate operation\",\n  aliases: [\"hourglass\", \"collate\"],\n  handler: hourglass\n}, {\n  semanticName: \"Comment\",\n  name: \"Curly Brace\",\n  shortName: \"brace\",\n  description: \"Adds a comment\",\n  aliases: [\"comment\", \"brace-l\"],\n  handler: curlyBraceLeft\n}, {\n  semanticName: \"Comment Right\",\n  name: \"Curly Brace\",\n  shortName: \"brace-r\",\n  description: \"Adds a comment\",\n  handler: curlyBraceRight\n}, {\n  semanticName: \"Comment with braces on both sides\",\n  name: \"Curly Braces\",\n  shortName: \"braces\",\n  description: \"Adds a comment\",\n  handler: curlyBraces\n}, {\n  semanticName: \"Com Link\",\n  name: \"Lightning Bolt\",\n  shortName: \"bolt\",\n  description: \"Communication link\",\n  aliases: [\"com-link\", \"lightning-bolt\"],\n  handler: lightningBolt\n}, {\n  semanticName: \"Document\",\n  name: \"Document\",\n  shortName: \"doc\",\n  description: \"Represents a document\",\n  aliases: [\"doc\", \"document\"],\n  handler: waveEdgedRectangle\n}, {\n  semanticName: \"Delay\",\n  name: \"Half-Rounded Rectangle\",\n  shortName: \"delay\",\n  description: \"Represents a delay\",\n  aliases: [\"half-rounded-rectangle\"],\n  handler: halfRoundedRectangle\n}, {\n  semanticName: \"Direct Access Storage\",\n  name: \"Horizontal Cylinder\",\n  shortName: \"h-cyl\",\n  description: \"Direct access storage\",\n  aliases: [\"das\", \"horizontal-cylinder\"],\n  handler: tiltedCylinder\n}, {\n  semanticName: \"Disk Storage\",\n  name: \"Lined Cylinder\",\n  shortName: \"lin-cyl\",\n  description: \"Disk storage\",\n  aliases: [\"disk\", \"lined-cylinder\"],\n  handler: linedCylinder\n}, {\n  semanticName: \"Display\",\n  name: \"Curved Trapezoid\",\n  shortName: \"curv-trap\",\n  description: \"Represents a display\",\n  aliases: [\"curved-trapezoid\", \"display\"],\n  handler: curvedTrapezoid\n}, {\n  semanticName: \"Divided Process\",\n  name: \"Divided Rectangle\",\n  shortName: \"div-rect\",\n  description: \"Divided process shape\",\n  aliases: [\"div-proc\", \"divided-rectangle\", \"divided-process\"],\n  handler: dividedRectangle\n}, {\n  semanticName: \"Extract\",\n  name: \"Triangle\",\n  shortName: \"tri\",\n  description: \"Extraction process\",\n  aliases: [\"extract\", \"triangle\"],\n  handler: triangle\n}, {\n  semanticName: \"Internal Storage\",\n  name: \"Window Pane\",\n  shortName: \"win-pane\",\n  description: \"Internal storage\",\n  aliases: [\"internal-storage\", \"window-pane\"],\n  handler: windowPane\n}, {\n  semanticName: \"Junction\",\n  name: \"Filled Circle\",\n  shortName: \"f-circ\",\n  description: \"Junction point\",\n  aliases: [\"junction\", \"filled-circle\"],\n  handler: filledCircle\n}, {\n  semanticName: \"Loop Limit\",\n  name: \"Trapezoidal Pentagon\",\n  shortName: \"notch-pent\",\n  description: \"Loop limit step\",\n  aliases: [\"loop-limit\", \"notched-pentagon\"],\n  handler: trapezoidalPentagon\n}, {\n  semanticName: \"Manual File\",\n  name: \"Flipped Triangle\",\n  shortName: \"flip-tri\",\n  description: \"Manual file operation\",\n  aliases: [\"manual-file\", \"flipped-triangle\"],\n  handler: flippedTriangle\n}, {\n  semanticName: \"Manual Input\",\n  name: \"Sloped Rectangle\",\n  shortName: \"sl-rect\",\n  description: \"Manual input step\",\n  aliases: [\"manual-input\", \"sloped-rectangle\"],\n  handler: slopedRect\n}, {\n  semanticName: \"Multi-Document\",\n  name: \"Stacked Document\",\n  shortName: \"docs\",\n  description: \"Multiple documents\",\n  aliases: [\"documents\", \"st-doc\", \"stacked-document\"],\n  handler: multiWaveEdgedRectangle\n}, {\n  semanticName: \"Multi-Process\",\n  name: \"Stacked Rectangle\",\n  shortName: \"st-rect\",\n  description: \"Multiple processes\",\n  aliases: [\"procs\", \"processes\", \"stacked-rectangle\"],\n  handler: multiRect\n}, {\n  semanticName: \"Stored Data\",\n  name: \"Bow Tie Rectangle\",\n  shortName: \"bow-rect\",\n  description: \"Stored data\",\n  aliases: [\"stored-data\", \"bow-tie-rectangle\"],\n  handler: bowTieRect\n}, {\n  semanticName: \"Summary\",\n  name: \"Crossed Circle\",\n  shortName: \"cross-circ\",\n  description: \"Summary\",\n  aliases: [\"summary\", \"crossed-circle\"],\n  handler: crossedCircle\n}, {\n  semanticName: \"Tagged Document\",\n  name: \"Tagged Document\",\n  shortName: \"tag-doc\",\n  description: \"Tagged document\",\n  aliases: [\"tag-doc\", \"tagged-document\"],\n  handler: taggedWaveEdgedRectangle\n}, {\n  semanticName: \"Tagged Process\",\n  name: \"Tagged Rectangle\",\n  shortName: \"tag-rect\",\n  description: \"Tagged process\",\n  aliases: [\"tagged-rectangle\", \"tag-proc\", \"tagged-process\"],\n  handler: taggedRect\n}, {\n  semanticName: \"Paper Tape\",\n  name: \"Flag\",\n  shortName: \"flag\",\n  description: \"Paper tape\",\n  aliases: [\"paper-tape\"],\n  handler: waveRectangle\n}, {\n  semanticName: \"Odd\",\n  name: \"Odd\",\n  shortName: \"odd\",\n  description: \"Odd shape\",\n  internalAliases: [\"rect_left_inv_arrow\"],\n  handler: rect_left_inv_arrow\n}, {\n  semanticName: \"Lined Document\",\n  name: \"Lined Document\",\n  shortName: \"lin-doc\",\n  description: \"Lined document\",\n  aliases: [\"lined-document\"],\n  handler: linedWaveEdgedRect\n}];\nvar generateShapeMap = /* @__PURE__ */__name(() => {\n  const undocumentedShapes = {\n    // States\n    state,\n    choice,\n    note,\n    // Rectangles\n    rectWithTitle,\n    labelRect,\n    // Icons\n    iconSquare,\n    iconCircle,\n    icon,\n    iconRounded,\n    imageSquare,\n    anchor,\n    // Kanban diagram\n    kanbanItem,\n    // class diagram\n    classBox,\n    // er diagram\n    erBox,\n    // Requirement diagram\n    requirementBox\n  };\n  const entries = [...Object.entries(undocumentedShapes), ...shapesDefs.flatMap(shape => {\n    const aliases = [shape.shortName, ...(\"aliases\" in shape ? shape.aliases : []), ...(\"internalAliases\" in shape ? shape.internalAliases : [])];\n    return aliases.map(alias => [alias, shape.handler]);\n  })];\n  return Object.fromEntries(entries);\n}, \"generateShapeMap\");\nvar shapes2 = generateShapeMap();\nfunction isValidShape(shape) {\n  return shape in shapes2;\n}\n__name(isValidShape, \"isValidShape\");\n\n// src/rendering-util/rendering-elements/nodes.ts\nvar nodeElems = /* @__PURE__ */new Map();\nasync function insertNode(elem, node, renderOptions) {\n  let newEl;\n  let el;\n  if (node.shape === \"rect\") {\n    if (node.rx && node.ry) {\n      node.shape = \"roundedRect\";\n    } else {\n      node.shape = \"squareRect\";\n    }\n  }\n  const shapeHandler = node.shape ? shapes2[node.shape] : void 0;\n  if (!shapeHandler) {\n    throw new Error(`No such shape: ${node.shape}. Please check your syntax.`);\n  }\n  if (node.link) {\n    let target;\n    if (renderOptions.config.securityLevel === \"sandbox\") {\n      target = \"_top\";\n    } else if (node.linkTarget) {\n      target = node.linkTarget || \"_blank\";\n    }\n    newEl = elem.insert(\"svg:a\").attr(\"xlink:href\", node.link).attr(\"target\", target ?? null);\n    el = await shapeHandler(newEl, node, renderOptions);\n  } else {\n    el = await shapeHandler(elem, node, renderOptions);\n    newEl = el;\n  }\n  if (node.tooltip) {\n    el.attr(\"title\", node.tooltip);\n  }\n  nodeElems.set(node.id, newEl);\n  if (node.haveCallback) {\n    newEl.attr(\"class\", newEl.attr(\"class\") + \" clickable\");\n  }\n  return newEl;\n}\n__name(insertNode, \"insertNode\");\nvar setNodeElem = /* @__PURE__ */__name((elem, node) => {\n  nodeElems.set(node.id, elem);\n}, \"setNodeElem\");\nvar clear2 = /* @__PURE__ */__name(() => {\n  nodeElems.clear();\n}, \"clear\");\nvar positionNode = /* @__PURE__ */__name(node => {\n  const el = nodeElems.get(node.id);\n  log.trace(\"Transforming node\", node.diff, node, \"translate(\" + (node.x - node.width / 2 - 5) + \", \" + node.width / 2 + \")\");\n  const padding = 8;\n  const diff = node.diff || 0;\n  if (node.clusterNode) {\n    el.attr(\"transform\", \"translate(\" + (node.x + diff - node.width / 2) + \", \" + (node.y - node.height / 2 - padding) + \")\");\n  } else {\n    el.attr(\"transform\", \"translate(\" + node.x + \", \" + node.y + \")\");\n  }\n  return diff;\n}, \"positionNode\");\nexport { labelHelper, updateNodeBounds, isLabelStyle, createLabel_default, isValidShape, insertCluster, clear, insertNode, setNodeElem, clear2, positionNode };","map":{"version":3,"names":["getSubGraphTitleMargins","getIconSVG","createText","calculateTextWidth","decodeEntities","handleUndefinedAttr","parseFontSize","__name","common_default","defaultConfig_default","evaluate","getConfig","getConfig2","hasKatex","log","parseGenericTypes","renderKatex","sanitizeText","sanitizeText2","select","labelHelper","parent","node","_classes","cssClasses","useHtmlLabels","htmlLabels","shapeSvg","insert","attr","domId","id","labelEl","labelStyle","label","text2","width","flowchart","wrappingWidth","style","addSvgBackground","icon","img","bbox","getBBox","halfPadding","padding","div","children","dv","images","getElementsByTagName","noImgText","replace","trim","Promise","all","map","res","setupImage","display","flexDirection","bodyFontSize","fontSize","window","getComputedStyle","document","body","enlargingFactor","parsedBodyFontSize","minWidth","maxWidth","setTimeout","complete","addEventListener","getBoundingClientRect","height","centerLabel","insertLabel","options","updateNodeBounds","element","getNodeClasses","extra","look","createPathFromPoints","points","pointStrings","p","i","x","y","push","join","generateFullSineWavePoints","x1","y1","x2","y2","amplitude","numCycles","steps","deltaX","deltaY","cycleLength","frequency","Math","PI","midY","t","sin","generateCirclePoints","centerX","centerY","radius","numPoints","startAngle","endAngle","startAngleRad","endAngleRad","angleRange","angleStep","angle","cos","select3","rough","intersectRect","point","dx","dy","w","h","sx","sy","abs","intersect_rect_default","select2","applyStyle","dom","styleFn","addHtmlLabel","fo","createElementNS","append","lineBreakRegex","labelClass","isNode","html","createLabel","_vertexText","isTitle","vertexText","info","s","vertexNode","svgLabel","setAttribute","rows","split","Array","isArray","row","tspan","setAttributeNS","textContent","appendChild","createLabel_default","createRoundedRectPathD","totalWidth","totalHeight","solidStateFill","color","handDrawnSeed","fill","hachureAngle","hachureGap","fillWeight","roughness","stroke","seed","compileStyles","stylesMap","styles2Map","cssCompiledStyles","cssStyles","stylesArray","styles","styleMap","Map","forEach","key","value","set","isLabelStyle","styles2String","labelStyles","nodeStyles","borderStyles","backgroundStyles","includes","userNodeOverrides","themeVariables","nodeBorder","mainBkg","result","Object","assign","get","fillStyle","strokeWidth","fillLineDash","rect","siteConfig","clusterBkg","clusterBorder","diff","trace","JSON","stringify","rect2","rc","svg","roughNode","path","debug","rx","ry","subGraphTitleTopMargin","span","rectBox","offsetX","offsetY","intersect","cluster","labelBBox","noteGroup","roundedWithTitle","altBackground","compositeBackground","compositeTitleBackground","outerRectG","innerRect","innerHeight","innerY","isAlt","roughOuterNode","rectangle","roughInnerNode","outerRectClass","kanbanSection","divider","strokeLineDash","squareRect","shapes","clusterElems","insertCluster","elem","shape","clear","intersectNode","intersect_node_default","intersectEllipse","cx","cy","px","py","det","sqrt","intersect_ellipse_default","intersectCircle","intersect_circle_default","intersectLine","p1","p2","q1","q2","a1","a2","b1","b2","c1","c2","r1","r2","r3","r4","denom","offset","num","sameSign","intersect_line_default","intersectPolygon","polyPoints","intersections","minX","Number","POSITIVE_INFINITY","minY","entry","min","left","top","length","sort","q","pdx","pdy","distp","qdx","qdy","distq","intersect_polygon_default","intersect_default","circle","ellipse","polygon","rough2","anchor","classes","circleElem","rough3","generateArcPoints","clockwise","midX","atan2","transformedX","transformedY","distance","Error","scaledCenterDistance","angle2","bowTieRect","bowTieRectPath","bowTieRectShapePath","bowTieRectShape","selectAll","pos","rough4","insertPolygonShape","d","card","right","bottom","pathData","rough5","choice","max","choicePath","choiceShape","rough6","rough7","createLine","r","xAxis45","yAxis45","lineLength","pointQ1","pointQ2","pointQ3","pointQ4","crossedCircle","circleNode","linePath","lineNode","crossedCircle2","rough8","generateCirclePoints2","curlyBraceLeft","rectPoints","curlyBraceLeftPath","newCurlyBracePath","curlyBraceLeftNode","rectPath","rectShape","curlyBraceLeftShape","rough9","generateCirclePoints3","curlyBraceRight","curlyBraceRightPath","curlyBraceRightNode","curlyBraceRightShape","rough10","generateCirclePoints4","curlyBraces","leftCurlyBracePoints","rightCurlyBracePoints","leftCurlyBracePath","newLeftCurlyBracePath","leftCurlyBraceNode","rightCurlyBracePath","newRightCurlyBracePath","rightCurlyBraceNode","curlyBracesShape","rough11","curvedTrapezoid","minHeight","rw","tw","shapeNode","selectChildren","rough12","createCylinderPathD","createOuterCylinderPathD","createInnerCylinderPathD","cylinder","cylinder2","outerPathData","innerPathData","outerNode","innerLine","rough13","dividedRectangle","rectOffset","pts","poly","rough14","doublecircle","gap","outerRadius","innerRadius","circleGroup","outerOptions","innerOptions","outerRoughNode","innerRoughNode","outerCircle","innerCircle","rough15","filledCircle","config","filledCircle2","rough16","flippedTriangle","flippedTriangle2","rough17","forkJoin","dir","state","state2","lineColor","rough18","halfRoundedRectangle","rough19","createHexagonPathD","m","hexagon","f","rough20","hourglass","rough21","assetHeight","assetWidth","iconSize","defaultWidth","topLabel","labelPadding","iconNode","outerWidth","outerHeight","iconShape","outerShape","iconElem","fallbackPrefix","iconBBox","iconWidth","iconHeight","iconX","iconY","nodeHeight","rough22","iconCircle","diameter","SQRT2","rough23","iconRounded","rough24","iconSquare","rough25","imageSquare","Image","src","decode","imageNaturalWidth","naturalWidth","toString","imageNaturalHeight","naturalHeight","imageAspectRatio","imageRawWidth","imageWidth","constraint","imageHeight","imageNode","image","rough26","inv_trapezoid","rough27","drawRect","labelPaddingX","labelPaddingY","options2","labelRect","rough28","lean_left","rough29","lean_right","rough30","lightningBolt","lightningBolt2","rough31","createCylinderPathD2","outerOffset","createOuterCylinderPathD2","createInnerCylinderPathD2","linedCylinder","innerLineEl","rough32","linedWaveEdgedRect","waveAmplitude","finalH","waveEdgeRect","rough33","multiRect","outerPathPoints","innerPathPoints","outerPath","innerPath","innerNode","multiRect2","rough34","multiWaveEdgedRectangle","wavePoints","lastWavePoint","rough35","note","noteBkgColor","noteBorderColor","noteShapeNode","rough36","createDecisionBoxPathD","size","question","rough37","rect_left_inv_arrow","notch","select4","rough38","rectWithTitle","g","description","title","div2","dv2","textRows","titleBox","descr","roughLine","line","roundedRect","rough39","shadedProcess","rough40","slopedRect","squareRect2","rough41","stadium","rough42","stateEnd","stateBorder","innerFill","circle2","rough43","stateStart","rough44","subroutine","l1","l2","el","rough45","taggedRect","tagWidth","tagHeight","tagPoints","rectNode","tagPath","tagNode","taggedRect2","rough46","taggedWaveEdgedRectangle","waveEdgeRectPath","waveEdgeRectNode","taggedWaveEdgeRectPath","taggedWaveEdgeRectNode","text","rough47","createCylinderPathD3","createOuterCylinderPathD3","createInnerCylinderPathD3","tiltedCylinder","rough48","trapezoid","rough49","trapezoidalPentagon","rough50","triangle","rough51","waveEdgedRectangle","widthDif","extraW","rough52","waveRectangle","baseWidth","baseHeight","aspectRatio","waveRectPath","waveRectNode","waveRect","rough53","windowPane","no","windowPane2","rough54","select5","erBox","entityNode","alias","themeVariables2","background","backgroundNode","PADDING","er","diagramPadding","TEXT_PADDING","entityPadding","attributes","minEntityWidth","shapeSvg2","textElement","nameBBox","addText","yOffset","yOffsets","maxTypeWidth","maxNameWidth","maxKeysWidth","maxCommentWidth","keysPresent","commentPresent","attribute","typeBBox","type","nameBBox2","name","keysBBox","keys","commentBBox","comment","pop","totalWidthSections","shapeBBox","difference","each","_","nodes","transform","translateX","translateY","regex","RegExp","translate","exec","parseFloat","roughRect","rowEven","rowOdd","yOffset2","entries","isEven","roughRect2","labelText","replaceAll","child","childNodes","textAlign","select7","rough55","select6","textHelper","GAP","class","annotationGroup","labelGroup","membersGroup","methodsGroup","annotationGroupHeight","labelGroupHeight","membersGroupHeight","annotations","annotation","addText2","annotationGroupBBox","labelGroupBBox","member","members","parseClassifier","methodsYOffset","method","methods","parentGroup","textEl","startsWith","substring","numberOfLines","textChild","preserveSpace","innerHTML","parseInt","classBox","classNode","renderExtraBox","hideEmptyMembersBox","rectBBox","newTranslateY","newTranslateX","_2","i2","nodes2","textAnchor","colorRegex","match","colorStyle","match2","rough56","select8","requirementBox","requirementNode","elementNode","isRequirementNode","typeHeight","addText3","accumulativeHeight","nameHeight","idHeight","requirementId","textHeight","riskHeight","risk","verifyMethod","typeHeight2","docRef","dividerLine","inputText","rough57","colorFromPriority","priority","kanbanItem","kanbanNode","orgWidth","labelElTitle","ticketUrl","link","ticket","kanban","ticketBaseUrl","bbox2","labelElAssigned","bboxAssigned","assigned","heightAdj","lineX","floor","shapesDefs","semanticName","shortName","aliases","internalAliases","handler","generateShapeMap","undocumentedShapes","flatMap","fromEntries","shapes2","isValidShape","nodeElems","insertNode","renderOptions","newEl","shapeHandler","target","securityLevel","linkTarget","tooltip","haveCallback","setNodeElem","clear2","positionNode","clusterNode"],"sources":["C:/Users/ASUS/Desktop/autochat/frontend/node_modules/mermaid/dist/chunks/mermaid.core/chunk-HRU6DDCH.mjs"],"sourcesContent":["import {\n  getSubGraphTitleMargins\n} from \"./chunk-K557N5IZ.mjs\";\nimport {\n  getIconSVG\n} from \"./chunk-H2D2JQ3I.mjs\";\nimport {\n  createText\n} from \"./chunk-C3MQ5ANM.mjs\";\nimport {\n  calculateTextWidth,\n  decodeEntities,\n  handleUndefinedAttr,\n  parseFontSize\n} from \"./chunk-O4NI6UNU.mjs\";\nimport {\n  __name,\n  common_default,\n  defaultConfig_default,\n  evaluate,\n  getConfig,\n  getConfig2,\n  hasKatex,\n  log,\n  parseGenericTypes,\n  renderKatex,\n  sanitizeText,\n  sanitizeText2\n} from \"./chunk-YTJNT7DU.mjs\";\n\n// src/rendering-util/rendering-elements/shapes/util.ts\nimport { select } from \"d3\";\nvar labelHelper = /* @__PURE__ */ __name(async (parent, node, _classes) => {\n  let cssClasses;\n  const useHtmlLabels = node.useHtmlLabels || evaluate(getConfig2()?.htmlLabels);\n  if (!_classes) {\n    cssClasses = \"node default\";\n  } else {\n    cssClasses = _classes;\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", handleUndefinedAttr(node.labelStyle));\n  let label;\n  if (node.label === void 0) {\n    label = \"\";\n  } else {\n    label = typeof node.label === \"string\" ? node.label : node.label[0];\n  }\n  const text2 = await createText(labelEl, sanitizeText(decodeEntities(label), getConfig2()), {\n    useHtmlLabels,\n    width: node.width || getConfig2().flowchart?.wrappingWidth,\n    // @ts-expect-error -- This is currently not used. Should this be `classes` instead?\n    cssClasses: \"markdown-node-label\",\n    style: node.labelStyle,\n    addSvgBackground: !!node.icon || !!node.img\n  });\n  let bbox = text2.getBBox();\n  const halfPadding = (node?.padding ?? 0) / 2;\n  if (useHtmlLabels) {\n    const div = text2.children[0];\n    const dv = select(text2);\n    const images = div.getElementsByTagName(\"img\");\n    if (images) {\n      const noImgText = label.replace(/<img[^>]*>/g, \"\").trim() === \"\";\n      await Promise.all(\n        [...images].map(\n          (img) => new Promise((res) => {\n            function setupImage() {\n              img.style.display = \"flex\";\n              img.style.flexDirection = \"column\";\n              if (noImgText) {\n                const bodyFontSize = getConfig2().fontSize ? getConfig2().fontSize : window.getComputedStyle(document.body).fontSize;\n                const enlargingFactor = 5;\n                const [parsedBodyFontSize = defaultConfig_default.fontSize] = parseFontSize(bodyFontSize);\n                const width = parsedBodyFontSize * enlargingFactor + \"px\";\n                img.style.minWidth = width;\n                img.style.maxWidth = width;\n              } else {\n                img.style.width = \"100%\";\n              }\n              res(img);\n            }\n            __name(setupImage, \"setupImage\");\n            setTimeout(() => {\n              if (img.complete) {\n                setupImage();\n              }\n            });\n            img.addEventListener(\"error\", setupImage);\n            img.addEventListener(\"load\", setupImage);\n          })\n        )\n      );\n    }\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  if (useHtmlLabels) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  } else {\n    labelEl.attr(\"transform\", \"translate(0, \" + -bbox.height / 2 + \")\");\n  }\n  if (node.centerLabel) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  }\n  labelEl.insert(\"rect\", \":first-child\");\n  return { shapeSvg, bbox, halfPadding, label: labelEl };\n}, \"labelHelper\");\nvar insertLabel = /* @__PURE__ */ __name(async (parent, label, options) => {\n  const useHtmlLabels = options.useHtmlLabels || evaluate(getConfig2()?.flowchart?.htmlLabels);\n  const labelEl = parent.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", options.labelStyle || \"\");\n  const text2 = await createText(labelEl, sanitizeText(decodeEntities(label), getConfig2()), {\n    useHtmlLabels,\n    width: options.width || getConfig2()?.flowchart?.wrappingWidth,\n    style: options.labelStyle,\n    addSvgBackground: !!options.icon || !!options.img\n  });\n  let bbox = text2.getBBox();\n  const halfPadding = options.padding / 2;\n  if (evaluate(getConfig2()?.flowchart?.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  if (useHtmlLabels) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  } else {\n    labelEl.attr(\"transform\", \"translate(0, \" + -bbox.height / 2 + \")\");\n  }\n  if (options.centerLabel) {\n    labelEl.attr(\"transform\", \"translate(\" + -bbox.width / 2 + \", \" + -bbox.height / 2 + \")\");\n  }\n  labelEl.insert(\"rect\", \":first-child\");\n  return { shapeSvg: parent, bbox, halfPadding, label: labelEl };\n}, \"insertLabel\");\nvar updateNodeBounds = /* @__PURE__ */ __name((node, element) => {\n  const bbox = element.node().getBBox();\n  node.width = bbox.width;\n  node.height = bbox.height;\n}, \"updateNodeBounds\");\nvar getNodeClasses = /* @__PURE__ */ __name((node, extra) => (node.look === \"handDrawn\" ? \"rough-node\" : \"node\") + \" \" + node.cssClasses + \" \" + (extra || \"\"), \"getNodeClasses\");\nfunction createPathFromPoints(points) {\n  const pointStrings = points.map((p, i) => `${i === 0 ? \"M\" : \"L\"}${p.x},${p.y}`);\n  pointStrings.push(\"Z\");\n  return pointStrings.join(\" \");\n}\n__name(createPathFromPoints, \"createPathFromPoints\");\nfunction generateFullSineWavePoints(x1, y1, x2, y2, amplitude, numCycles) {\n  const points = [];\n  const steps = 50;\n  const deltaX = x2 - x1;\n  const deltaY = y2 - y1;\n  const cycleLength = deltaX / numCycles;\n  const frequency = 2 * Math.PI / cycleLength;\n  const midY = y1 + deltaY / 2;\n  for (let i = 0; i <= steps; i++) {\n    const t = i / steps;\n    const x = x1 + t * deltaX;\n    const y = midY + amplitude * Math.sin(frequency * (x - x1));\n    points.push({ x, y });\n  }\n  return points;\n}\n__name(generateFullSineWavePoints, \"generateFullSineWavePoints\");\nfunction generateCirclePoints(centerX, centerY, radius, numPoints, startAngle, endAngle) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({ x: -x, y: -y });\n  }\n  return points;\n}\n__name(generateCirclePoints, \"generateCirclePoints\");\n\n// src/rendering-util/rendering-elements/clusters.js\nimport { select as select3 } from \"d3\";\nimport rough from \"roughjs\";\n\n// src/rendering-util/rendering-elements/intersect/intersect-rect.js\nvar intersectRect = /* @__PURE__ */ __name((node, point) => {\n  var x = node.x;\n  var y = node.y;\n  var dx = point.x - x;\n  var dy = point.y - y;\n  var w = node.width / 2;\n  var h = node.height / 2;\n  var sx, sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = dy === 0 ? 0 : h * dx / dy;\n    sy = h;\n  } else {\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = dx === 0 ? 0 : w * dy / dx;\n  }\n  return { x: x + sx, y: y + sy };\n}, \"intersectRect\");\nvar intersect_rect_default = intersectRect;\n\n// src/rendering-util/rendering-elements/createLabel.js\nimport { select as select2 } from \"d3\";\nfunction applyStyle(dom, styleFn) {\n  if (styleFn) {\n    dom.attr(\"style\", styleFn);\n  }\n}\n__name(applyStyle, \"applyStyle\");\nasync function addHtmlLabel(node) {\n  const fo = select2(document.createElementNS(\"http://www.w3.org/2000/svg\", \"foreignObject\"));\n  const div = fo.append(\"xhtml:div\");\n  let label = node.label;\n  if (node.label && hasKatex(node.label)) {\n    label = await renderKatex(node.label.replace(common_default.lineBreakRegex, \"\\n\"), getConfig2());\n  }\n  const labelClass = node.isNode ? \"nodeLabel\" : \"edgeLabel\";\n  div.html(\n    '<span class=\"' + labelClass + '\" ' + (node.labelStyle ? 'style=\"' + node.labelStyle + '\"' : \"\") + // codeql [js/html-constructed-from-input] : false positive\n    \">\" + label + \"</span>\"\n  );\n  applyStyle(div, node.labelStyle);\n  div.style(\"display\", \"inline-block\");\n  div.style(\"padding-right\", \"1px\");\n  div.style(\"white-space\", \"nowrap\");\n  div.attr(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  return fo.node();\n}\n__name(addHtmlLabel, \"addHtmlLabel\");\nvar createLabel = /* @__PURE__ */ __name(async (_vertexText, style, isTitle, isNode) => {\n  let vertexText = _vertexText || \"\";\n  if (typeof vertexText === \"object\") {\n    vertexText = vertexText[0];\n  }\n  if (evaluate(getConfig2().flowchart.htmlLabels)) {\n    vertexText = vertexText.replace(/\\\\n|\\n/g, \"<br />\");\n    log.info(\"vertexText\" + vertexText);\n    const node = {\n      isNode,\n      label: decodeEntities(vertexText).replace(\n        /fa[blrs]?:fa-[\\w-]+/g,\n        (s) => `<i class='${s.replace(\":\", \" \")}'></i>`\n      ),\n      labelStyle: style ? style.replace(\"fill:\", \"color:\") : style\n    };\n    let vertexNode = await addHtmlLabel(node);\n    return vertexNode;\n  } else {\n    const svgLabel = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    svgLabel.setAttribute(\"style\", style.replace(\"color:\", \"fill:\"));\n    let rows = [];\n    if (typeof vertexText === \"string\") {\n      rows = vertexText.split(/\\\\n|\\n|<br\\s*\\/?>/gi);\n    } else if (Array.isArray(vertexText)) {\n      rows = vertexText;\n    } else {\n      rows = [];\n    }\n    for (const row of rows) {\n      const tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n      tspan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n      tspan.setAttribute(\"dy\", \"1em\");\n      tspan.setAttribute(\"x\", \"0\");\n      if (isTitle) {\n        tspan.setAttribute(\"class\", \"title-row\");\n      } else {\n        tspan.setAttribute(\"class\", \"row\");\n      }\n      tspan.textContent = row.trim();\n      svgLabel.appendChild(tspan);\n    }\n    return svgLabel;\n  }\n}, \"createLabel\");\nvar createLabel_default = createLabel;\n\n// src/rendering-util/rendering-elements/shapes/roundedRectPath.ts\nvar createRoundedRectPathD = /* @__PURE__ */ __name((x, y, totalWidth, totalHeight, radius) => [\n  \"M\",\n  x + radius,\n  y,\n  // Move to the first point\n  \"H\",\n  x + totalWidth - radius,\n  // Draw horizontal line to the beginning of the right corner\n  \"A\",\n  radius,\n  radius,\n  0,\n  0,\n  1,\n  x + totalWidth,\n  y + radius,\n  // Draw arc to the right top corner\n  \"V\",\n  y + totalHeight - radius,\n  // Draw vertical line down to the beginning of the right bottom corner\n  \"A\",\n  radius,\n  radius,\n  0,\n  0,\n  1,\n  x + totalWidth - radius,\n  y + totalHeight,\n  // Draw arc to the right bottom corner\n  \"H\",\n  x + radius,\n  // Draw horizontal line to the beginning of the left bottom corner\n  \"A\",\n  radius,\n  radius,\n  0,\n  0,\n  1,\n  x,\n  y + totalHeight - radius,\n  // Draw arc to the left bottom corner\n  \"V\",\n  y + radius,\n  // Draw vertical line up to the beginning of the left top corner\n  \"A\",\n  radius,\n  radius,\n  0,\n  0,\n  1,\n  x + radius,\n  y,\n  // Draw arc to the left top corner\n  \"Z\"\n  // Close the path\n].join(\" \"), \"createRoundedRectPathD\");\n\n// src/rendering-util/rendering-elements/shapes/handDrawnShapeStyles.ts\nvar solidStateFill = /* @__PURE__ */ __name((color) => {\n  const { handDrawnSeed } = getConfig2();\n  return {\n    fill: color,\n    hachureAngle: 120,\n    // angle of hachure,\n    hachureGap: 4,\n    fillWeight: 2,\n    roughness: 0.7,\n    stroke: color,\n    seed: handDrawnSeed\n  };\n}, \"solidStateFill\");\nvar compileStyles = /* @__PURE__ */ __name((node) => {\n  const stylesMap = styles2Map([...node.cssCompiledStyles || [], ...node.cssStyles || []]);\n  return { stylesMap, stylesArray: [...stylesMap] };\n}, \"compileStyles\");\nvar styles2Map = /* @__PURE__ */ __name((styles) => {\n  const styleMap = /* @__PURE__ */ new Map();\n  styles.forEach((style) => {\n    const [key, value] = style.split(\":\");\n    styleMap.set(key.trim(), value?.trim());\n  });\n  return styleMap;\n}, \"styles2Map\");\nvar isLabelStyle = /* @__PURE__ */ __name((key) => {\n  return key === \"color\" || key === \"font-size\" || key === \"font-family\" || key === \"font-weight\" || key === \"font-style\" || key === \"text-decoration\" || key === \"text-align\" || key === \"text-transform\" || key === \"line-height\" || key === \"letter-spacing\" || key === \"word-spacing\" || key === \"text-shadow\" || key === \"text-overflow\" || key === \"white-space\" || key === \"word-wrap\" || key === \"word-break\" || key === \"overflow-wrap\" || key === \"hyphens\";\n}, \"isLabelStyle\");\nvar styles2String = /* @__PURE__ */ __name((node) => {\n  const { stylesArray } = compileStyles(node);\n  const labelStyles = [];\n  const nodeStyles = [];\n  const borderStyles = [];\n  const backgroundStyles = [];\n  stylesArray.forEach((style) => {\n    const key = style[0];\n    if (isLabelStyle(key)) {\n      labelStyles.push(style.join(\":\") + \" !important\");\n    } else {\n      nodeStyles.push(style.join(\":\") + \" !important\");\n      if (key.includes(\"stroke\")) {\n        borderStyles.push(style.join(\":\") + \" !important\");\n      }\n      if (key === \"fill\") {\n        backgroundStyles.push(style.join(\":\") + \" !important\");\n      }\n    }\n  });\n  return {\n    labelStyles: labelStyles.join(\";\"),\n    nodeStyles: nodeStyles.join(\";\"),\n    stylesArray,\n    borderStyles,\n    backgroundStyles\n  };\n}, \"styles2String\");\nvar userNodeOverrides = /* @__PURE__ */ __name((node, options) => {\n  const { themeVariables, handDrawnSeed } = getConfig2();\n  const { nodeBorder, mainBkg } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const result = Object.assign(\n    {\n      roughness: 0.7,\n      fill: stylesMap.get(\"fill\") || mainBkg,\n      fillStyle: \"hachure\",\n      // solid fill\n      fillWeight: 4,\n      hachureGap: 5.2,\n      stroke: stylesMap.get(\"stroke\") || nodeBorder,\n      seed: handDrawnSeed,\n      strokeWidth: stylesMap.get(\"stroke-width\")?.replace(\"px\", \"\") || 1.3,\n      fillLineDash: [0, 0]\n    },\n    options\n  );\n  return result;\n}, \"userNodeOverrides\");\n\n// src/rendering-util/rendering-elements/clusters.js\nvar rect = /* @__PURE__ */ __name(async (parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig2();\n  const { themeVariables, handDrawnSeed } = siteConfig;\n  const { clusterBkg, clusterBorder } = themeVariables;\n  const { labelStyles, nodeStyles, borderStyles, backgroundStyles } = styles2String(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster \" + node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label \");\n  const text2 = await createText(labelEl, node.label, {\n    style: node.labelStyle,\n    useHtmlLabels,\n    isNode: true\n  });\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  log.trace(\"Data \", node, JSON.stringify(node));\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const options = userNodeOverrides(node, {\n      roughness: 0.7,\n      fill: clusterBkg,\n      // fill: 'red',\n      stroke: clusterBorder,\n      fillWeight: 3,\n      seed: handDrawnSeed\n    });\n    const roughNode = rc.path(createRoundedRectPathD(x, y, width, height, 0), options);\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n    rect2.select(\"path:nth-child(2)\").attr(\"style\", borderStyles.join(\";\"));\n    rect2.select(\"path\").attr(\"style\", backgroundStyles.join(\";\").replace(\"fill\", \"stroke\"));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"style\", nodeStyles).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height);\n  }\n  const { subGraphTitleTopMargin } = getSubGraphTitleMargins(siteConfig);\n  labelEl.attr(\n    \"transform\",\n    // This puts the label on top of the box instead of inside it\n    `translate(${node.x - bbox.width / 2}, ${node.y - node.height / 2 + subGraphTitleTopMargin})`\n  );\n  if (labelStyles) {\n    const span = labelEl.select(\"span\");\n    if (span) {\n      span.attr(\"style\", labelStyles);\n    }\n  }\n  const rectBox = rect2.node().getBBox();\n  node.offsetX = 0;\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: bbox };\n}, \"rect\");\nvar noteGroup = /* @__PURE__ */ __name((parent, node) => {\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"note-cluster\").attr(\"id\", node.id);\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  rect2.attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", node.x - node.width / 2 - halfPadding).attr(\"y\", node.y - node.height / 2 - halfPadding).attr(\"width\", node.width + padding).attr(\"height\", node.height + padding).attr(\"fill\", \"none\");\n  const rectBox = rect2.node().getBBox();\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: { width: 0, height: 0 } };\n}, \"noteGroup\");\nvar roundedWithTitle = /* @__PURE__ */ __name(async (parent, node) => {\n  const siteConfig = getConfig2();\n  const { themeVariables, handDrawnSeed } = siteConfig;\n  const { altBackground, compositeBackground, compositeTitleBackground, nodeBorder } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.cssClasses).attr(\"id\", node.id).attr(\"data-id\", node.id).attr(\"data-look\", node.look);\n  const outerRectG = shapeSvg.insert(\"g\", \":first-child\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label\");\n  let innerRect = shapeSvg.append(\"rect\");\n  const text2 = label.node().appendChild(await createLabel_default(node.label, node.labelStyle, void 0, true));\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const padding = 0 * node.padding;\n  const halfPadding = padding / 2;\n  const width = (node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width) + padding;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height + padding;\n  const innerHeight = node.height + padding - bbox.height - 6;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  node.width = width;\n  const innerY = node.y - node.height / 2 - halfPadding + bbox.height + 2;\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const isAlt = node.cssClasses.includes(\"statediagram-cluster-alt\");\n    const rc = rough.svg(shapeSvg);\n    const roughOuterNode = node.rx || node.ry ? rc.path(createRoundedRectPathD(x, y, width, height, 10), {\n      roughness: 0.7,\n      fill: compositeTitleBackground,\n      fillStyle: \"solid\",\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    }) : rc.rectangle(x, y, width, height, { seed: handDrawnSeed });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n    const roughInnerNode = rc.rectangle(x, innerY, width, innerHeight, {\n      fill: isAlt ? altBackground : compositeBackground,\n      fillStyle: isAlt ? \"hachure\" : \"solid\",\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n    innerRect = shapeSvg.insert(() => roughInnerNode);\n  } else {\n    rect2 = outerRectG.insert(\"rect\", \":first-child\");\n    const outerRectClass = \"outer\";\n    rect2.attr(\"class\", outerRectClass).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height).attr(\"data-look\", node.look);\n    innerRect.attr(\"class\", \"inner\").attr(\"x\", x).attr(\"y\", innerY).attr(\"width\", width).attr(\"height\", innerHeight);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${node.x - bbox.width / 2}, ${y + 1 - (evaluate(siteConfig.flowchart.htmlLabels) ? 0 : 3)})`\n  );\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.offsetX = 0;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.labelBBox = bbox;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: bbox };\n}, \"roundedWithTitle\");\nvar kanbanSection = /* @__PURE__ */ __name(async (parent, node) => {\n  log.info(\"Creating subgraph rect for \", node.id, node);\n  const siteConfig = getConfig2();\n  const { themeVariables, handDrawnSeed } = siteConfig;\n  const { clusterBkg, clusterBorder } = themeVariables;\n  const { labelStyles, nodeStyles, borderStyles, backgroundStyles } = styles2String(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"cluster \" + node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const useHtmlLabels = evaluate(siteConfig.flowchart.htmlLabels);\n  const labelEl = shapeSvg.insert(\"g\").attr(\"class\", \"cluster-label \");\n  const text2 = await createText(labelEl, node.label, {\n    style: node.labelStyle,\n    useHtmlLabels,\n    isNode: true,\n    width: node.width\n  });\n  let bbox = text2.getBBox();\n  if (evaluate(siteConfig.flowchart.htmlLabels)) {\n    const div = text2.children[0];\n    const dv = select3(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  const width = node.width <= bbox.width + node.padding ? bbox.width + node.padding : node.width;\n  if (node.width <= bbox.width + node.padding) {\n    node.diff = (width - node.width) / 2 - node.padding;\n  } else {\n    node.diff = -node.padding;\n  }\n  const height = node.height;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  log.trace(\"Data \", node, JSON.stringify(node));\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const options = userNodeOverrides(node, {\n      roughness: 0.7,\n      fill: clusterBkg,\n      // fill: 'red',\n      stroke: clusterBorder,\n      fillWeight: 4,\n      seed: handDrawnSeed\n    });\n    const roughNode = rc.path(createRoundedRectPathD(x, y, width, height, node.rx), options);\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n    rect2.select(\"path:nth-child(2)\").attr(\"style\", borderStyles.join(\";\"));\n    rect2.select(\"path\").attr(\"style\", backgroundStyles.join(\";\").replace(\"fill\", \"stroke\"));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"style\", nodeStyles).attr(\"rx\", node.rx).attr(\"ry\", node.ry).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height);\n  }\n  const { subGraphTitleTopMargin } = getSubGraphTitleMargins(siteConfig);\n  labelEl.attr(\n    \"transform\",\n    // This puts the label on top of the box instead of inside it\n    `translate(${node.x - bbox.width / 2}, ${node.y - node.height / 2 + subGraphTitleTopMargin})`\n  );\n  if (labelStyles) {\n    const span = labelEl.select(\"span\");\n    if (span) {\n      span.attr(\"style\", labelStyles);\n    }\n  }\n  const rectBox = rect2.node().getBBox();\n  node.offsetX = 0;\n  node.width = rectBox.width;\n  node.height = rectBox.height;\n  node.offsetY = bbox.height - node.padding / 2;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: bbox };\n}, \"kanbanSection\");\nvar divider = /* @__PURE__ */ __name((parent, node) => {\n  const siteConfig = getConfig2();\n  const { themeVariables, handDrawnSeed } = siteConfig;\n  const { nodeBorder } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", node.cssClasses).attr(\"id\", node.id).attr(\"data-look\", node.look);\n  const outerRectG = shapeSvg.insert(\"g\", \":first-child\");\n  const padding = 0 * node.padding;\n  const width = node.width + padding;\n  node.diff = -node.padding;\n  const height = node.height + padding;\n  const x = node.x - width / 2;\n  const y = node.y - height / 2;\n  node.width = width;\n  let rect2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough.svg(shapeSvg);\n    const roughOuterNode = rc.rectangle(x, y, width, height, {\n      fill: \"lightgrey\",\n      roughness: 0.5,\n      strokeLineDash: [5],\n      stroke: nodeBorder,\n      seed: handDrawnSeed\n    });\n    rect2 = shapeSvg.insert(() => roughOuterNode, \":first-child\");\n  } else {\n    rect2 = outerRectG.insert(\"rect\", \":first-child\");\n    const outerRectClass = \"divider\";\n    rect2.attr(\"class\", outerRectClass).attr(\"x\", x).attr(\"y\", y).attr(\"width\", width).attr(\"height\", height).attr(\"data-look\", node.look);\n  }\n  const rectBox = rect2.node().getBBox();\n  node.height = rectBox.height;\n  node.offsetX = 0;\n  node.offsetY = 0;\n  node.intersect = function(point) {\n    return intersect_rect_default(node, point);\n  };\n  return { cluster: shapeSvg, labelBBox: {} };\n}, \"divider\");\nvar squareRect = rect;\nvar shapes = {\n  rect,\n  squareRect,\n  roundedWithTitle,\n  noteGroup,\n  divider,\n  kanbanSection\n};\nvar clusterElems = /* @__PURE__ */ new Map();\nvar insertCluster = /* @__PURE__ */ __name(async (elem, node) => {\n  const shape = node.shape || \"rect\";\n  const cluster = await shapes[shape](elem, node);\n  clusterElems.set(node.id, cluster);\n  return cluster;\n}, \"insertCluster\");\nvar clear = /* @__PURE__ */ __name(() => {\n  clusterElems = /* @__PURE__ */ new Map();\n}, \"clear\");\n\n// src/rendering-util/rendering-elements/intersect/intersect-node.js\nfunction intersectNode(node, point) {\n  return node.intersect(point);\n}\n__name(intersectNode, \"intersectNode\");\nvar intersect_node_default = intersectNode;\n\n// src/rendering-util/rendering-elements/intersect/intersect-ellipse.js\nfunction intersectEllipse(node, rx, ry, point) {\n  var cx = node.x;\n  var cy = node.y;\n  var px = cx - point.x;\n  var py = cy - point.y;\n  var det = Math.sqrt(rx * rx * py * py + ry * ry * px * px);\n  var dx = Math.abs(rx * ry * px / det);\n  if (point.x < cx) {\n    dx = -dx;\n  }\n  var dy = Math.abs(rx * ry * py / det);\n  if (point.y < cy) {\n    dy = -dy;\n  }\n  return { x: cx + dx, y: cy + dy };\n}\n__name(intersectEllipse, \"intersectEllipse\");\nvar intersect_ellipse_default = intersectEllipse;\n\n// src/rendering-util/rendering-elements/intersect/intersect-circle.js\nfunction intersectCircle(node, rx, point) {\n  return intersect_ellipse_default(node, rx, rx, point);\n}\n__name(intersectCircle, \"intersectCircle\");\nvar intersect_circle_default = intersectCircle;\n\n// src/rendering-util/rendering-elements/intersect/intersect-line.js\nfunction intersectLine(p1, p2, q1, q2) {\n  var a1, a2, b1, b2, c1, c2;\n  var r1, r2, r3, r4;\n  var denom, offset, num;\n  var x, y;\n  a1 = p2.y - p1.y;\n  b1 = p1.x - p2.x;\n  c1 = p2.x * p1.y - p1.x * p2.y;\n  r3 = a1 * q1.x + b1 * q1.y + c1;\n  r4 = a1 * q2.x + b1 * q2.y + c1;\n  if (r3 !== 0 && r4 !== 0 && sameSign(r3, r4)) {\n    return;\n  }\n  a2 = q2.y - q1.y;\n  b2 = q1.x - q2.x;\n  c2 = q2.x * q1.y - q1.x * q2.y;\n  r1 = a2 * p1.x + b2 * p1.y + c2;\n  r2 = a2 * p2.x + b2 * p2.y + c2;\n  if (r1 !== 0 && r2 !== 0 && sameSign(r1, r2)) {\n    return;\n  }\n  denom = a1 * b2 - a2 * b1;\n  if (denom === 0) {\n    return;\n  }\n  offset = Math.abs(denom / 2);\n  num = b1 * c2 - b2 * c1;\n  x = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n  num = a2 * c1 - a1 * c2;\n  y = num < 0 ? (num - offset) / denom : (num + offset) / denom;\n  return { x, y };\n}\n__name(intersectLine, \"intersectLine\");\nfunction sameSign(r1, r2) {\n  return r1 * r2 > 0;\n}\n__name(sameSign, \"sameSign\");\nvar intersect_line_default = intersectLine;\n\n// src/rendering-util/rendering-elements/intersect/intersect-polygon.js\nfunction intersectPolygon(node, polyPoints, point) {\n  let x1 = node.x;\n  let y1 = node.y;\n  let intersections = [];\n  let minX = Number.POSITIVE_INFINITY;\n  let minY = Number.POSITIVE_INFINITY;\n  if (typeof polyPoints.forEach === \"function\") {\n    polyPoints.forEach(function(entry) {\n      minX = Math.min(minX, entry.x);\n      minY = Math.min(minY, entry.y);\n    });\n  } else {\n    minX = Math.min(minX, polyPoints.x);\n    minY = Math.min(minY, polyPoints.y);\n  }\n  let left = x1 - node.width / 2 - minX;\n  let top = y1 - node.height / 2 - minY;\n  for (let i = 0; i < polyPoints.length; i++) {\n    let p1 = polyPoints[i];\n    let p2 = polyPoints[i < polyPoints.length - 1 ? i + 1 : 0];\n    let intersect = intersect_line_default(\n      node,\n      point,\n      { x: left + p1.x, y: top + p1.y },\n      { x: left + p2.x, y: top + p2.y }\n    );\n    if (intersect) {\n      intersections.push(intersect);\n    }\n  }\n  if (!intersections.length) {\n    return node;\n  }\n  if (intersections.length > 1) {\n    intersections.sort(function(p, q) {\n      let pdx = p.x - point.x;\n      let pdy = p.y - point.y;\n      let distp = Math.sqrt(pdx * pdx + pdy * pdy);\n      let qdx = q.x - point.x;\n      let qdy = q.y - point.y;\n      let distq = Math.sqrt(qdx * qdx + qdy * qdy);\n      return distp < distq ? -1 : distp === distq ? 0 : 1;\n    });\n  }\n  return intersections[0];\n}\n__name(intersectPolygon, \"intersectPolygon\");\nvar intersect_polygon_default = intersectPolygon;\n\n// src/rendering-util/rendering-elements/intersect/index.js\nvar intersect_default = {\n  node: intersect_node_default,\n  circle: intersect_circle_default,\n  ellipse: intersect_ellipse_default,\n  polygon: intersect_polygon_default,\n  rect: intersect_rect_default\n};\n\n// src/rendering-util/rendering-elements/shapes/anchor.ts\nimport rough2 from \"roughjs\";\nfunction anchor(parent, node) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const classes = getNodeClasses(node);\n  let cssClasses = classes;\n  if (!classes) {\n    cssClasses = \"anchor\";\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const radius = 1;\n  const { cssStyles } = node;\n  const rc = rough2.svg(shapeSvg);\n  const options = userNodeOverrides(node, { fill: \"black\", stroke: \"none\", fillStyle: \"solid\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n  }\n  const roughNode = rc.circle(0, 0, radius * 2, options);\n  const circleElem = shapeSvg.insert(() => roughNode, \":first-child\");\n  circleElem.attr(\"class\", \"anchor\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  updateNodeBounds(node, circleElem);\n  node.intersect = function(point) {\n    log.info(\"Circle intersect\", node, radius, point);\n    return intersect_default.circle(node, radius, point);\n  };\n  return shapeSvg;\n}\n__name(anchor, \"anchor\");\n\n// src/rendering-util/rendering-elements/shapes/bowTieRect.ts\nimport rough3 from \"roughjs\";\nfunction generateArcPoints(x1, y1, x2, y2, rx, ry, clockwise) {\n  const numPoints = 20;\n  const midX = (x1 + x2) / 2;\n  const midY = (y1 + y2) / 2;\n  const angle = Math.atan2(y2 - y1, x2 - x1);\n  const dx = (x2 - x1) / 2;\n  const dy = (y2 - y1) / 2;\n  const transformedX = dx / rx;\n  const transformedY = dy / ry;\n  const distance = Math.sqrt(transformedX ** 2 + transformedY ** 2);\n  if (distance > 1) {\n    throw new Error(\"The given radii are too small to create an arc between the points.\");\n  }\n  const scaledCenterDistance = Math.sqrt(1 - distance ** 2);\n  const centerX = midX + scaledCenterDistance * ry * Math.sin(angle) * (clockwise ? -1 : 1);\n  const centerY = midY - scaledCenterDistance * rx * Math.cos(angle) * (clockwise ? -1 : 1);\n  const startAngle = Math.atan2((y1 - centerY) / ry, (x1 - centerX) / rx);\n  const endAngle = Math.atan2((y2 - centerY) / ry, (x2 - centerX) / rx);\n  let angleRange = endAngle - startAngle;\n  if (clockwise && angleRange < 0) {\n    angleRange += 2 * Math.PI;\n  }\n  if (!clockwise && angleRange > 0) {\n    angleRange -= 2 * Math.PI;\n  }\n  const points = [];\n  for (let i = 0; i < numPoints; i++) {\n    const t = i / (numPoints - 1);\n    const angle2 = startAngle + t * angleRange;\n    const x = centerX + rx * Math.cos(angle2);\n    const y = centerY + ry * Math.sin(angle2);\n    points.push({ x, y });\n  }\n  return points;\n}\n__name(generateArcPoints, \"generateArcPoints\");\nasync function bowTieRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding + 20;\n  const h = bbox.height + node.padding;\n  const ry = h / 2;\n  const rx = ry / (2.5 + h / 50);\n  const { cssStyles } = node;\n  const points = [\n    { x: w / 2, y: -h / 2 },\n    { x: -w / 2, y: -h / 2 },\n    ...generateArcPoints(-w / 2, -h / 2, -w / 2, h / 2, rx, ry, false),\n    { x: w / 2, y: h / 2 },\n    ...generateArcPoints(w / 2, h / 2, w / 2, -h / 2, rx, ry, true)\n  ];\n  const rc = rough3.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const bowTieRectPath = createPathFromPoints(points);\n  const bowTieRectShapePath = rc.path(bowTieRectPath, options);\n  const bowTieRectShape = shapeSvg.insert(() => bowTieRectShapePath, \":first-child\");\n  bowTieRectShape.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    bowTieRectShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    bowTieRectShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  bowTieRectShape.attr(\"transform\", `translate(${rx / 2}, 0)`);\n  updateNodeBounds(node, bowTieRectShape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(bowTieRect, \"bowTieRect\");\n\n// src/rendering-util/rendering-elements/shapes/card.ts\nimport rough4 from \"roughjs\";\n\n// src/rendering-util/rendering-elements/shapes/insertPolygonShape.ts\nfunction insertPolygonShape(parent, w, h, points) {\n  return parent.insert(\"polygon\", \":first-child\").attr(\n    \"points\",\n    points.map(function(d) {\n      return d.x + \",\" + d.y;\n    }).join(\" \")\n  ).attr(\"class\", \"label-container\").attr(\"transform\", \"translate(\" + -w / 2 + \",\" + h / 2 + \")\");\n}\n__name(insertPolygonShape, \"insertPolygonShape\");\n\n// src/rendering-util/rendering-elements/shapes/card.ts\nasync function card(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + node.padding;\n  const padding = 12;\n  const w = bbox.width + node.padding + padding;\n  const left = 0;\n  const right = w;\n  const top = -h;\n  const bottom = 0;\n  const points = [\n    { x: left + padding, y: top },\n    { x: right, y: top },\n    { x: right, y: bottom },\n    { x: left, y: bottom },\n    { x: left, y: top + padding },\n    { x: left + padding, y: top }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough4.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(card, \"card\");\n\n// src/rendering-util/rendering-elements/shapes/choice.ts\nimport rough5 from \"roughjs\";\nfunction choice(parent, node) {\n  const { nodeStyles } = styles2String(node);\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const { cssStyles } = node;\n  const s = Math.max(28, node.width ?? 0);\n  const points = [\n    { x: 0, y: s / 2 },\n    { x: s / 2, y: 0 },\n    { x: 0, y: -s / 2 },\n    { x: -s / 2, y: 0 }\n  ];\n  const rc = rough5.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const choicePath = createPathFromPoints(points);\n  const roughNode = rc.path(choicePath, options);\n  const choiceShape = shapeSvg.insert(() => roughNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    choiceShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    choiceShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = 28;\n  node.height = 28;\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(choice, \"choice\");\n\n// src/rendering-util/rendering-elements/shapes/circle.ts\nimport rough6 from \"roughjs\";\nasync function circle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, halfPadding } = await labelHelper(parent, node, getNodeClasses(node));\n  const radius = bbox.width / 2 + halfPadding;\n  let circleElem;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough6.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.circle(0, 0, radius * 2, options);\n    circleElem = shapeSvg.insert(() => roughNode, \":first-child\");\n    circleElem.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    circleElem = shapeSvg.insert(\"circle\", \":first-child\").attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"r\", radius).attr(\"cx\", 0).attr(\"cy\", 0);\n  }\n  updateNodeBounds(node, circleElem);\n  node.intersect = function(point) {\n    log.info(\"Circle intersect\", node, radius, point);\n    return intersect_default.circle(node, radius, point);\n  };\n  return shapeSvg;\n}\n__name(circle, \"circle\");\n\n// src/rendering-util/rendering-elements/shapes/crossedCircle.ts\nimport rough7 from \"roughjs\";\nfunction createLine(r) {\n  const xAxis45 = Math.cos(Math.PI / 4);\n  const yAxis45 = Math.sin(Math.PI / 4);\n  const lineLength = r * 2;\n  const pointQ1 = { x: lineLength / 2 * xAxis45, y: lineLength / 2 * yAxis45 };\n  const pointQ2 = { x: -(lineLength / 2) * xAxis45, y: lineLength / 2 * yAxis45 };\n  const pointQ3 = { x: -(lineLength / 2) * xAxis45, y: -(lineLength / 2) * yAxis45 };\n  const pointQ4 = { x: lineLength / 2 * xAxis45, y: -(lineLength / 2) * yAxis45 };\n  return `M ${pointQ2.x},${pointQ2.y} L ${pointQ4.x},${pointQ4.y}\n                   M ${pointQ1.x},${pointQ1.y} L ${pointQ3.x},${pointQ3.y}`;\n}\n__name(createLine, \"createLine\");\nfunction crossedCircle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const radius = Math.max(30, node?.width ?? 0);\n  const { cssStyles } = node;\n  const rc = rough7.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const circleNode = rc.circle(0, 0, radius * 2, options);\n  const linePath = createLine(radius);\n  const lineNode = rc.path(linePath, options);\n  const crossedCircle2 = shapeSvg.insert(() => circleNode, \":first-child\");\n  crossedCircle2.insert(() => lineNode);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    crossedCircle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    crossedCircle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, crossedCircle2);\n  node.intersect = function(point) {\n    log.info(\"crossedCircle intersect\", node, { radius, point });\n    const pos = intersect_default.circle(node, radius, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(crossedCircle, \"crossedCircle\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraceLeft.ts\nimport rough8 from \"roughjs\";\nfunction generateCirclePoints2(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({ x: -x, y: -y });\n  }\n  return points;\n}\n__name(generateCirclePoints2, \"generateCirclePoints\");\nasync function curlyBraceLeft(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const { cssStyles } = node;\n  const points = [\n    ...generateCirclePoints2(w / 2, -h / 2, radius, 30, -90, 0),\n    { x: -w / 2 - radius, y: radius },\n    ...generateCirclePoints2(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints2(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: -w / 2 - radius, y: -h / 2 },\n    ...generateCirclePoints2(w / 2, h / 2, radius, 20, 0, 90)\n  ];\n  const rectPoints = [\n    { x: w / 2, y: -h / 2 - radius },\n    { x: -w / 2, y: -h / 2 - radius },\n    ...generateCirclePoints2(w / 2, -h / 2, radius, 20, -90, 0),\n    { x: -w / 2 - radius, y: -radius },\n    ...generateCirclePoints2(w / 2 + w * 0.1, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints2(w / 2 + w * 0.1, radius, radius, 20, -90, -180),\n    { x: -w / 2 - radius, y: h / 2 },\n    ...generateCirclePoints2(w / 2, h / 2, radius, 20, 0, 90),\n    { x: -w / 2, y: h / 2 + radius },\n    { x: w / 2, y: h / 2 + radius }\n  ];\n  const rc = rough8.svg(shapeSvg);\n  const options = userNodeOverrides(node, { fill: \"none\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const curlyBraceLeftPath = createPathFromPoints(points);\n  const newCurlyBracePath = curlyBraceLeftPath.replace(\"Z\", \"\");\n  const curlyBraceLeftNode = rc.path(newCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, { ...options });\n  const curlyBraceLeftShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBraceLeftShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBraceLeftShape.insert(() => curlyBraceLeftNode, \":first-child\");\n  curlyBraceLeftShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBraceLeftShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBraceLeftShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBraceLeftShape.attr(\"transform\", `translate(${radius}, 0)`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + radius - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, curlyBraceLeftShape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraceLeft, \"curlyBraceLeft\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraceRight.ts\nimport rough9 from \"roughjs\";\nfunction generateCirclePoints3(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({ x, y });\n  }\n  return points;\n}\n__name(generateCirclePoints3, \"generateCirclePoints\");\nasync function curlyBraceRight(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const { cssStyles } = node;\n  const points = [\n    ...generateCirclePoints3(w / 2, -h / 2, radius, 20, -90, 0),\n    { x: w / 2 + radius, y: -radius },\n    ...generateCirclePoints3(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints3(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: w / 2 + radius, y: h / 2 },\n    ...generateCirclePoints3(w / 2, h / 2, radius, 20, 0, 90)\n  ];\n  const rectPoints = [\n    { x: -w / 2, y: -h / 2 - radius },\n    { x: w / 2, y: -h / 2 - radius },\n    ...generateCirclePoints3(w / 2, -h / 2, radius, 20, -90, 0),\n    { x: w / 2 + radius, y: -radius },\n    ...generateCirclePoints3(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints3(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: w / 2 + radius, y: h / 2 },\n    ...generateCirclePoints3(w / 2, h / 2, radius, 20, 0, 90),\n    { x: w / 2, y: h / 2 + radius },\n    { x: -w / 2, y: h / 2 + radius }\n  ];\n  const rc = rough9.svg(shapeSvg);\n  const options = userNodeOverrides(node, { fill: \"none\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const curlyBraceRightPath = createPathFromPoints(points);\n  const newCurlyBracePath = curlyBraceRightPath.replace(\"Z\", \"\");\n  const curlyBraceRightNode = rc.path(newCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, { ...options });\n  const curlyBraceRightShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBraceRightShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBraceRightShape.insert(() => curlyBraceRightNode, \":first-child\");\n  curlyBraceRightShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBraceRightShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBraceRightShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBraceRightShape.attr(\"transform\", `translate(${-radius}, 0)`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, curlyBraceRightShape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraceRight, \"curlyBraceRight\");\n\n// src/rendering-util/rendering-elements/shapes/curlyBraces.ts\nimport rough10 from \"roughjs\";\nfunction generateCirclePoints4(centerX, centerY, radius, numPoints = 100, startAngle = 0, endAngle = 180) {\n  const points = [];\n  const startAngleRad = startAngle * Math.PI / 180;\n  const endAngleRad = endAngle * Math.PI / 180;\n  const angleRange = endAngleRad - startAngleRad;\n  const angleStep = angleRange / (numPoints - 1);\n  for (let i = 0; i < numPoints; i++) {\n    const angle = startAngleRad + i * angleStep;\n    const x = centerX + radius * Math.cos(angle);\n    const y = centerY + radius * Math.sin(angle);\n    points.push({ x: -x, y: -y });\n  }\n  return points;\n}\n__name(generateCirclePoints4, \"generateCirclePoints\");\nasync function curlyBraces(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = bbox.height + (node.padding ?? 0);\n  const radius = Math.max(5, h * 0.1);\n  const { cssStyles } = node;\n  const leftCurlyBracePoints = [\n    ...generateCirclePoints4(w / 2, -h / 2, radius, 30, -90, 0),\n    { x: -w / 2 - radius, y: radius },\n    ...generateCirclePoints4(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints4(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: -w / 2 - radius, y: -h / 2 },\n    ...generateCirclePoints4(w / 2, h / 2, radius, 20, 0, 90)\n  ];\n  const rightCurlyBracePoints = [\n    ...generateCirclePoints4(-w / 2 + radius + radius / 2, -h / 2, radius, 20, -90, -180),\n    { x: w / 2 - radius / 2, y: radius },\n    ...generateCirclePoints4(-w / 2 - radius / 2, -radius, radius, 20, 0, 90),\n    ...generateCirclePoints4(-w / 2 - radius / 2, radius, radius, 20, -90, 0),\n    { x: w / 2 - radius / 2, y: -radius },\n    ...generateCirclePoints4(-w / 2 + radius + radius / 2, h / 2, radius, 30, -180, -270)\n  ];\n  const rectPoints = [\n    { x: w / 2, y: -h / 2 - radius },\n    { x: -w / 2, y: -h / 2 - radius },\n    ...generateCirclePoints4(w / 2, -h / 2, radius, 20, -90, 0),\n    { x: -w / 2 - radius, y: -radius },\n    ...generateCirclePoints4(w / 2 + radius * 2, -radius, radius, 20, -180, -270),\n    ...generateCirclePoints4(w / 2 + radius * 2, radius, radius, 20, -90, -180),\n    { x: -w / 2 - radius, y: h / 2 },\n    ...generateCirclePoints4(w / 2, h / 2, radius, 20, 0, 90),\n    { x: -w / 2, y: h / 2 + radius },\n    { x: w / 2 - radius - radius / 2, y: h / 2 + radius },\n    ...generateCirclePoints4(-w / 2 + radius + radius / 2, -h / 2, radius, 20, -90, -180),\n    { x: w / 2 - radius / 2, y: radius },\n    ...generateCirclePoints4(-w / 2 - radius / 2, -radius, radius, 20, 0, 90),\n    ...generateCirclePoints4(-w / 2 - radius / 2, radius, radius, 20, -90, 0),\n    { x: w / 2 - radius / 2, y: -radius },\n    ...generateCirclePoints4(-w / 2 + radius + radius / 2, h / 2, radius, 30, -180, -270)\n  ];\n  const rc = rough10.svg(shapeSvg);\n  const options = userNodeOverrides(node, { fill: \"none\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const leftCurlyBracePath = createPathFromPoints(leftCurlyBracePoints);\n  const newLeftCurlyBracePath = leftCurlyBracePath.replace(\"Z\", \"\");\n  const leftCurlyBraceNode = rc.path(newLeftCurlyBracePath, options);\n  const rightCurlyBracePath = createPathFromPoints(rightCurlyBracePoints);\n  const newRightCurlyBracePath = rightCurlyBracePath.replace(\"Z\", \"\");\n  const rightCurlyBraceNode = rc.path(newRightCurlyBracePath, options);\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectShape = rc.path(rectPath, { ...options });\n  const curlyBracesShape = shapeSvg.insert(\"g\", \":first-child\");\n  curlyBracesShape.insert(() => rectShape, \":first-child\").attr(\"stroke-opacity\", 0);\n  curlyBracesShape.insert(() => leftCurlyBraceNode, \":first-child\");\n  curlyBracesShape.insert(() => rightCurlyBraceNode, \":first-child\");\n  curlyBracesShape.attr(\"class\", \"text\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    curlyBracesShape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    curlyBracesShape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  curlyBracesShape.attr(\"transform\", `translate(${radius - radius / 4}, 0)`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, curlyBracesShape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curlyBraces, \"curlyBraces\");\n\n// src/rendering-util/rendering-elements/shapes/curvedTrapezoid.ts\nimport rough11 from \"roughjs\";\nasync function curvedTrapezoid(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 80, minHeight = 20;\n  const w = Math.max(minWidth, (bbox.width + (node.padding ?? 0) * 2) * 1.25, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const radius = h / 2;\n  const { cssStyles } = node;\n  const rc = rough11.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const totalWidth = w, totalHeight = h;\n  const rw = totalWidth - radius;\n  const tw = totalHeight / 4;\n  const points = [\n    { x: rw, y: 0 },\n    { x: tw, y: 0 },\n    { x: 0, y: totalHeight / 2 },\n    { x: tw, y: totalHeight },\n    { x: rw, y: totalHeight },\n    ...generateCirclePoints(-rw, -totalHeight / 2, radius, 50, 270, 90)\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-w / 2}, ${-h / 2})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(curvedTrapezoid, \"curvedTrapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/cylinder.ts\nimport rough12 from \"roughjs\";\nvar createCylinderPathD = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [\n    `M${x},${y + ry}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `a${rx},${ry} 0,0,0 ${-width},0`,\n    `l0,${height}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `l0,${-height}`\n  ].join(\" \");\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [\n    `M${x},${y + ry}`,\n    `M${x + width},${y + ry}`,\n    `a${rx},${ry} 0,0,0 ${-width},0`,\n    `l0,${height}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `l0,${-height}`\n  ].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [`M${x - width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 ${width},0`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function cylinder(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + node.padding, node.width ?? 0);\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = Math.max(bbox.height + ry + node.padding, node.height ?? 0);\n  let cylinder2;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough12.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD(0, 0, w, h, rx, ry);\n    const innerPathData = createInnerCylinderPathD(0, ry, w, h, rx, ry);\n    const outerNode = rc.path(outerPathData, userNodeOverrides(node, {}));\n    const innerLine = rc.path(innerPathData, userNodeOverrides(node, { fill: \"none\" }));\n    cylinder2 = shapeSvg.insert(() => innerLine, \":first-child\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD(0, 0, w, h, rx, ry);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n  }\n  cylinder2.attr(\"label-offset-y\", ry);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${-(h / 2 + ry)})`);\n  updateNodeBounds(node, cylinder2);\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + (node.padding ?? 0) / 1.5 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  node.intersect = function(point) {\n    const pos = intersect_default.rect(node, point);\n    const x = pos.x - (node.x ?? 0);\n    if (rx != 0 && (Math.abs(x) < (node.width ?? 0) / 2 || Math.abs(x) == (node.width ?? 0) / 2 && Math.abs(pos.y - (node.y ?? 0)) > (node.height ?? 0) / 2 - ry)) {\n      let y = ry * ry * (1 - x * x / (rx * rx));\n      if (y > 0) {\n        y = Math.sqrt(y);\n      }\n      y = ry - y;\n      if (point.y - (node.y ?? 0) > 0) {\n        y = -y;\n      }\n      pos.y += y;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(cylinder, \"cylinder\");\n\n// src/rendering-util/rendering-elements/shapes/dividedRect.ts\nimport rough13 from \"roughjs\";\nasync function dividedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const rectOffset = h * 0.2;\n  const x = -w / 2;\n  const y = -h / 2 - rectOffset / 2;\n  const { cssStyles } = node;\n  const rc = rough13.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pts = [\n    { x, y: y + rectOffset },\n    { x: -x, y: y + rectOffset },\n    { x: -x, y: -y },\n    { x, y: -y },\n    { x, y },\n    { x: -x, y },\n    { x: -x, y: y + rectOffset }\n  ];\n  const poly = rc.polygon(\n    pts.map((p) => [p.x, p.y]),\n    options\n  );\n  const polygon = shapeSvg.insert(() => poly, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${x + (node.padding ?? 0) / 2 - (bbox.x - (bbox.left ?? 0))}, ${y + rectOffset + (node.padding ?? 0) / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.rect(node, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(dividedRectangle, \"dividedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/doubleCircle.ts\nimport rough14 from \"roughjs\";\nasync function doublecircle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, halfPadding } = await labelHelper(parent, node, getNodeClasses(node));\n  const gap = 5;\n  const outerRadius = bbox.width / 2 + halfPadding + gap;\n  const innerRadius = bbox.width / 2 + halfPadding;\n  let circleGroup;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough14.svg(shapeSvg);\n    const outerOptions = userNodeOverrides(node, { roughness: 0.2, strokeWidth: 2.5 });\n    const innerOptions = userNodeOverrides(node, { roughness: 0.2, strokeWidth: 1.5 });\n    const outerRoughNode = rc.circle(0, 0, outerRadius * 2, outerOptions);\n    const innerRoughNode = rc.circle(0, 0, innerRadius * 2, innerOptions);\n    circleGroup = shapeSvg.insert(\"g\", \":first-child\");\n    circleGroup.attr(\"class\", handleUndefinedAttr(node.cssClasses)).attr(\"style\", handleUndefinedAttr(cssStyles));\n    circleGroup.node()?.appendChild(outerRoughNode);\n    circleGroup.node()?.appendChild(innerRoughNode);\n  } else {\n    circleGroup = shapeSvg.insert(\"g\", \":first-child\");\n    const outerCircle = circleGroup.insert(\"circle\", \":first-child\");\n    const innerCircle = circleGroup.insert(\"circle\");\n    circleGroup.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles);\n    outerCircle.attr(\"class\", \"outer-circle\").attr(\"style\", nodeStyles).attr(\"r\", outerRadius).attr(\"cx\", 0).attr(\"cy\", 0);\n    innerCircle.attr(\"class\", \"inner-circle\").attr(\"style\", nodeStyles).attr(\"r\", innerRadius).attr(\"cx\", 0).attr(\"cy\", 0);\n  }\n  updateNodeBounds(node, circleGroup);\n  node.intersect = function(point) {\n    log.info(\"DoubleCircle intersect\", node, outerRadius, point);\n    return intersect_default.circle(node, outerRadius, point);\n  };\n  return shapeSvg;\n}\n__name(doublecircle, \"doublecircle\");\n\n// src/rendering-util/rendering-elements/shapes/filledCircle.ts\nimport rough15 from \"roughjs\";\nfunction filledCircle(parent, node, { config: { themeVariables } }) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const radius = 7;\n  const { cssStyles } = node;\n  const rc = rough15.svg(shapeSvg);\n  const { nodeBorder } = themeVariables;\n  const options = userNodeOverrides(node, { fillStyle: \"solid\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n  }\n  const circleNode = rc.circle(0, 0, radius * 2, options);\n  const filledCircle2 = shapeSvg.insert(() => circleNode, \":first-child\");\n  filledCircle2.selectAll(\"path\").attr(\"style\", `fill: ${nodeBorder} !important;`);\n  if (cssStyles && cssStyles.length > 0 && node.look !== \"handDrawn\") {\n    filledCircle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    filledCircle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, filledCircle2);\n  node.intersect = function(point) {\n    log.info(\"filledCircle intersect\", node, { radius, point });\n    const pos = intersect_default.circle(node, radius, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(filledCircle, \"filledCircle\");\n\n// src/rendering-util/rendering-elements/shapes/flippedTriangle.ts\nimport rough16 from \"roughjs\";\nasync function flippedTriangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + (node.padding ?? 0);\n  const h = w + bbox.height;\n  const tw = w + bbox.height;\n  const points = [\n    { x: 0, y: -h },\n    { x: tw, y: -h },\n    { x: tw / 2, y: 0 }\n  ];\n  const { cssStyles } = node;\n  const rc = rough16.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const flippedTriangle2 = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-h / 2}, ${h / 2})`);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    flippedTriangle2.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    flippedTriangle2.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, flippedTriangle2);\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${-h / 2 + (node.padding ?? 0) / 2 + (bbox.y - (bbox.top ?? 0))})`\n  );\n  node.intersect = function(point) {\n    log.info(\"Triangle intersect\", node, points, point);\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(flippedTriangle, \"flippedTriangle\");\n\n// src/rendering-util/rendering-elements/shapes/forkJoin.ts\nimport rough17 from \"roughjs\";\nfunction forkJoin(parent, node, { dir, config: { state: state2, themeVariables } }) {\n  const { nodeStyles } = styles2String(node);\n  node.label = \"\";\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const { cssStyles } = node;\n  let width = Math.max(70, node?.width ?? 0);\n  let height = Math.max(10, node?.height ?? 0);\n  if (dir === \"LR\") {\n    width = Math.max(10, node?.width ?? 0);\n    height = Math.max(70, node?.height ?? 0);\n  }\n  const x = -1 * width / 2;\n  const y = -1 * height / 2;\n  const rc = rough17.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    stroke: themeVariables.lineColor,\n    fill: themeVariables.lineColor\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughNode = rc.rectangle(x, y, width, height, options);\n  const shape = shapeSvg.insert(() => roughNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, shape);\n  const padding = state2?.padding ?? 0;\n  if (node.width && node.height) {\n    node.width += padding / 2 || 0;\n    node.height += padding / 2 || 0;\n  }\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(forkJoin, \"forkJoin\");\n\n// src/rendering-util/rendering-elements/shapes/halfRoundedRectangle.ts\nimport rough18 from \"roughjs\";\nasync function halfRoundedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const minWidth = 80, minHeight = 50;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(minWidth, bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const radius = h / 2;\n  const { cssStyles } = node;\n  const rc = rough18.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2, y: -h / 2 },\n    { x: w / 2 - radius, y: -h / 2 },\n    ...generateCirclePoints(-w / 2 + radius, 0, radius, 50, 90, 270),\n    { x: w / 2 - radius, y: h / 2 },\n    { x: -w / 2, y: h / 2 }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    log.info(\"Pill intersect\", node, { radius, point });\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(halfRoundedRectangle, \"halfRoundedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/hexagon.ts\nimport rough19 from \"roughjs\";\nvar createHexagonPathD = /* @__PURE__ */ __name((x, y, width, height, m) => {\n  return [\n    `M${x + m},${y}`,\n    `L${x + width - m},${y}`,\n    `L${x + width},${y - height / 2}`,\n    `L${x + width - m},${y - height}`,\n    `L${x + m},${y - height}`,\n    `L${x},${y - height / 2}`,\n    \"Z\"\n  ].join(\" \");\n}, \"createHexagonPathD\");\nasync function hexagon(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const f = 4;\n  const h = bbox.height + node.padding;\n  const m = h / f;\n  const w = bbox.width + 2 * m + node.padding;\n  const points = [\n    { x: m, y: 0 },\n    { x: w - m, y: 0 },\n    { x: w, y: -h / 2 },\n    { x: w - m, y: -h },\n    { x: m, y: -h },\n    { x: 0, y: -h / 2 }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough19.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createHexagonPathD(0, 0, w, h, m);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(hexagon, \"hexagon\");\n\n// src/rendering-util/rendering-elements/shapes/hourglass.ts\nimport rough20 from \"roughjs\";\nasync function hourglass(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const { shapeSvg } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(30, node?.width ?? 0);\n  const h = Math.max(30, node?.height ?? 0);\n  const { cssStyles } = node;\n  const rc = rough20.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: 0, y: h },\n    { x: w, y: h }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-w / 2}, ${-h / 2})`);\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    log.info(\"Pill intersect\", node, { points });\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(hourglass, \"hourglass\");\n\n// src/rendering-util/rendering-elements/shapes/icon.ts\nimport rough21 from \"roughjs\";\nasync function icon(parent, node, { config: { themeVariables, flowchart } }) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, \"icon-shape default\");\n  const topLabel = node.pos === \"t\";\n  const height = iconSize;\n  const width = iconSize;\n  const { nodeBorder } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough21.svg(shapeSvg);\n  const options = userNodeOverrides(node, { stroke: \"none\", fill: \"none\" });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const iconNode = rc.rectangle(x, y, width, height, options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\n      `<g>${await getIconSVG(node.icon, {\n        height: iconSize,\n        width: iconSize,\n        fallbackPrefix: \"\"\n      })}</g>`\n    );\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\n      \"transform\",\n      `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`\n    );\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding }\n      ];\n    } else {\n      points = [\n        { x: dx - width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2 / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + height }\n      ];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(icon, \"icon\");\n\n// src/rendering-util/rendering-elements/shapes/iconCircle.ts\nimport rough22 from \"roughjs\";\nasync function iconCircle(parent, node, { config: { themeVariables, flowchart } }) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, \"icon-shape default\");\n  const padding = 20;\n  const labelPadding = node.label ? 8 : 0;\n  const topLabel = node.pos === \"t\";\n  const { nodeBorder, mainBkg } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const rc = rough22.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconElem = shapeSvg.append(\"g\");\n  if (node.icon) {\n    iconElem.html(\n      `<g>${await getIconSVG(node.icon, {\n        height: iconSize,\n        width: iconSize,\n        fallbackPrefix: \"\"\n      })}</g>`\n    );\n  }\n  const iconBBox = iconElem.node().getBBox();\n  const iconWidth = iconBBox.width;\n  const iconHeight = iconBBox.height;\n  const iconX = iconBBox.x;\n  const iconY = iconBBox.y;\n  const diameter = Math.max(iconWidth, iconHeight) * Math.SQRT2 + padding * 2;\n  const iconNode = rc.circle(0, 0, diameter, options);\n  const outerWidth = Math.max(diameter, bbox.width);\n  const outerHeight = diameter + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  iconElem.attr(\n    \"transform\",\n    `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`\n  );\n  iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    const pos = intersect_default.rect(node, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconCircle, \"iconCircle\");\n\n// src/rendering-util/rendering-elements/shapes/iconRounded.ts\nimport rough23 from \"roughjs\";\nasync function iconRounded(parent, node, { config: { themeVariables, flowchart } }) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const { shapeSvg, bbox, halfPadding, label } = await labelHelper(\n    parent,\n    node,\n    \"icon-shape default\"\n  );\n  const topLabel = node.pos === \"t\";\n  const height = iconSize + halfPadding * 2;\n  const width = iconSize + halfPadding * 2;\n  const { nodeBorder, mainBkg } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough23.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconNode = rc.path(createRoundedRectPathD(x, y, width, height, 5), options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\").attr(\"class\", \"icon-shape2\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\n      `<g>${await getIconSVG(node.icon, {\n        height: iconSize,\n        width: iconSize,\n        fallbackPrefix: \"\"\n      })}</g>`\n    );\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\n      \"transform\",\n      `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`\n    );\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding }\n      ];\n    } else {\n      points = [\n        { x: dx - width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2 / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + height }\n      ];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconRounded, \"iconRounded\");\n\n// src/rendering-util/rendering-elements/shapes/iconSquare.ts\nimport rough24 from \"roughjs\";\nasync function iconSquare(parent, node, { config: { themeVariables, flowchart } }) {\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const assetHeight = node.assetHeight ?? 48;\n  const assetWidth = node.assetWidth ?? 48;\n  const iconSize = Math.max(assetHeight, assetWidth);\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.width = Math.max(iconSize, defaultWidth ?? 0);\n  const { shapeSvg, bbox, halfPadding, label } = await labelHelper(\n    parent,\n    node,\n    \"icon-shape default\"\n  );\n  const topLabel = node.pos === \"t\";\n  const height = iconSize + halfPadding * 2;\n  const width = iconSize + halfPadding * 2;\n  const { nodeBorder, mainBkg } = themeVariables;\n  const { stylesMap } = compileStyles(node);\n  const x = -width / 2;\n  const y = -height / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough24.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const fill = stylesMap.get(\"fill\");\n  options.stroke = fill ?? mainBkg;\n  const iconNode = rc.path(createRoundedRectPathD(x, y, width, height, 0.1), options);\n  const outerWidth = Math.max(width, bbox.width);\n  const outerHeight = height + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"transparent\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => iconNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.icon) {\n    const iconElem = shapeSvg.append(\"g\");\n    iconElem.html(\n      `<g>${await getIconSVG(node.icon, {\n        height: iconSize,\n        width: iconSize,\n        fallbackPrefix: \"\"\n      })}</g>`\n    );\n    const iconBBox = iconElem.node().getBBox();\n    const iconWidth = iconBBox.width;\n    const iconHeight = iconBBox.height;\n    const iconX = iconBBox.x;\n    const iconY = iconBBox.y;\n    iconElem.attr(\n      \"transform\",\n      `translate(${-iconWidth / 2 - iconX},${topLabel ? bbox.height / 2 + labelPadding / 2 - iconHeight / 2 - iconY : -bbox.height / 2 - labelPadding / 2 - iconHeight / 2 - iconY})`\n    );\n    iconElem.attr(\"style\", `color: ${stylesMap.get(\"stroke\") ?? nodeBorder};`);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -outerHeight / 2 : outerHeight / 2 - bbox.height})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding }\n      ];\n    } else {\n      points = [\n        { x: dx - width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx + bbox.width / 2 / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + height },\n        { x: dx - width / 2, y: dy - nodeHeight / 2 + height }\n      ];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(iconSquare, \"iconSquare\");\n\n// src/rendering-util/rendering-elements/shapes/imageSquare.ts\nimport rough25 from \"roughjs\";\nasync function imageSquare(parent, node, { config: { flowchart } }) {\n  const img = new Image();\n  img.src = node?.img ?? \"\";\n  await img.decode();\n  const imageNaturalWidth = Number(img.naturalWidth.toString().replace(\"px\", \"\"));\n  const imageNaturalHeight = Number(img.naturalHeight.toString().replace(\"px\", \"\"));\n  node.imageAspectRatio = imageNaturalWidth / imageNaturalHeight;\n  const { labelStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const defaultWidth = flowchart?.wrappingWidth;\n  node.defaultWidth = flowchart?.wrappingWidth;\n  const imageRawWidth = Math.max(\n    node.label ? defaultWidth ?? 0 : 0,\n    node?.assetWidth ?? imageNaturalWidth\n  );\n  const imageWidth = node.constraint === \"on\" ? node?.assetHeight ? node.assetHeight * node.imageAspectRatio : imageRawWidth : imageRawWidth;\n  const imageHeight = node.constraint === \"on\" ? imageWidth / node.imageAspectRatio : node?.assetHeight ?? imageNaturalHeight;\n  node.width = Math.max(imageWidth, defaultWidth ?? 0);\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, \"image-shape default\");\n  const topLabel = node.pos === \"t\";\n  const x = -imageWidth / 2;\n  const y = -imageHeight / 2;\n  const labelPadding = node.label ? 8 : 0;\n  const rc = rough25.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const imageNode = rc.rectangle(x, y, imageWidth, imageHeight, options);\n  const outerWidth = Math.max(imageWidth, bbox.width);\n  const outerHeight = imageHeight + bbox.height + labelPadding;\n  const outerNode = rc.rectangle(-outerWidth / 2, -outerHeight / 2, outerWidth, outerHeight, {\n    ...options,\n    fill: \"none\",\n    stroke: \"none\"\n  });\n  const iconShape = shapeSvg.insert(() => imageNode, \":first-child\");\n  const outerShape = shapeSvg.insert(() => outerNode);\n  if (node.img) {\n    const image = shapeSvg.append(\"image\");\n    image.attr(\"href\", node.img);\n    image.attr(\"width\", imageWidth);\n    image.attr(\"height\", imageHeight);\n    image.attr(\"preserveAspectRatio\", \"none\");\n    image.attr(\n      \"transform\",\n      `translate(${-imageWidth / 2},${topLabel ? outerHeight / 2 - imageHeight : -outerHeight / 2})`\n    );\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))},${topLabel ? -imageHeight / 2 - bbox.height / 2 - labelPadding / 2 : imageHeight / 2 - bbox.height / 2 + labelPadding / 2})`\n  );\n  iconShape.attr(\n    \"transform\",\n    `translate(${0},${topLabel ? bbox.height / 2 + labelPadding / 2 : -bbox.height / 2 - labelPadding / 2})`\n  );\n  updateNodeBounds(node, outerShape);\n  node.intersect = function(point) {\n    log.info(\"iconSquare intersect\", node, point);\n    if (!node.label) {\n      return intersect_default.rect(node, point);\n    }\n    const dx = node.x ?? 0;\n    const dy = node.y ?? 0;\n    const nodeHeight = node.height ?? 0;\n    let points = [];\n    if (topLabel) {\n      points = [\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + imageWidth / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx + imageWidth / 2, y: dy + nodeHeight / 2 },\n        { x: dx - imageWidth / 2, y: dy + nodeHeight / 2 },\n        { x: dx - imageWidth / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + bbox.height + labelPadding }\n      ];\n    } else {\n      points = [\n        { x: dx - imageWidth / 2, y: dy - nodeHeight / 2 },\n        { x: dx + imageWidth / 2, y: dy - nodeHeight / 2 },\n        { x: dx + imageWidth / 2, y: dy - nodeHeight / 2 + imageHeight },\n        { x: dx + bbox.width / 2, y: dy - nodeHeight / 2 + imageHeight },\n        { x: dx + bbox.width / 2 / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy + nodeHeight / 2 },\n        { x: dx - bbox.width / 2, y: dy - nodeHeight / 2 + imageHeight },\n        { x: dx - imageWidth / 2, y: dy - nodeHeight / 2 + imageHeight }\n      ];\n    }\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(imageSquare, \"imageSquare\");\n\n// src/rendering-util/rendering-elements/shapes/invertedTrapezoid.ts\nimport rough26 from \"roughjs\";\nasync function inv_trapezoid(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: w + 3 * h / 6, y: -h },\n    { x: -3 * h / 6, y: -h }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough26.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(inv_trapezoid, \"inv_trapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/drawRect.ts\nimport rough27 from \"roughjs\";\nasync function drawRect(parent, node, options) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + options.labelPaddingX * 2, node?.width || 0);\n  const totalHeight = Math.max(bbox.height + options.labelPaddingY * 2, node?.height || 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  let rect2;\n  let { rx, ry } = node;\n  const { cssStyles } = node;\n  if (options?.rx && options.ry) {\n    rx = options.rx;\n    ry = options.ry;\n  }\n  if (node.look === \"handDrawn\") {\n    const rc = rough27.svg(shapeSvg);\n    const options2 = userNodeOverrides(node, {});\n    const roughNode = rx || ry ? rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, rx || 0), options2) : rc.rectangle(x, y, totalWidth, totalHeight, options2);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"rx\", handleUndefinedAttr(rx)).attr(\"ry\", handleUndefinedAttr(ry)).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(drawRect, \"drawRect\");\n\n// src/rendering-util/rendering-elements/shapes/labelRect.ts\nasync function labelRect(parent, node) {\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, \"label\");\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  const totalWidth = 0.1;\n  const totalHeight = 0.1;\n  rect2.attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  shapeSvg.attr(\"class\", \"label edgeLabel\");\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(labelRect, \"labelRect\");\n\n// src/rendering-util/rendering-elements/shapes/leanLeft.ts\nimport rough28 from \"roughjs\";\nasync function lean_left(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const points = [\n    { x: 0, y: 0 },\n    { x: w + 3 * h / 6, y: 0 },\n    { x: w, y: -h },\n    { x: -(3 * h) / 6, y: -h }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough28.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(lean_left, \"lean_left\");\n\n// src/rendering-util/rendering-elements/shapes/leanRight.ts\nimport rough29 from \"roughjs\";\nasync function lean_right(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const points = [\n    { x: -3 * h / 6, y: 0 },\n    { x: w, y: 0 },\n    { x: w + 3 * h / 6, y: -h },\n    { x: 0, y: -h }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough29.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(lean_right, \"lean_right\");\n\n// src/rendering-util/rendering-elements/shapes/lightningBolt.ts\nimport rough30 from \"roughjs\";\nfunction lightningBolt(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.label = \"\";\n  node.labelStyle = labelStyles;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId ?? node.id);\n  const { cssStyles } = node;\n  const width = Math.max(35, node?.width ?? 0);\n  const height = Math.max(35, node?.height ?? 0);\n  const gap = 7;\n  const points = [\n    { x: width, y: 0 },\n    { x: 0, y: height + gap / 2 },\n    { x: width - 2 * gap, y: height + gap / 2 },\n    { x: 0, y: 2 * height },\n    { x: width, y: height - gap / 2 },\n    { x: 2 * gap, y: height - gap / 2 }\n  ];\n  const rc = rough30.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const linePath = createPathFromPoints(points);\n  const lineNode = rc.path(linePath, options);\n  const lightningBolt2 = shapeSvg.insert(() => lineNode, \":first-child\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    lightningBolt2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    lightningBolt2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  lightningBolt2.attr(\"transform\", `translate(-${width / 2},${-height})`);\n  updateNodeBounds(node, lightningBolt2);\n  node.intersect = function(point) {\n    log.info(\"lightningBolt intersect\", node, point);\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(lightningBolt, \"lightningBolt\");\n\n// src/rendering-util/rendering-elements/shapes/linedCylinder.ts\nimport rough31 from \"roughjs\";\nvar createCylinderPathD2 = /* @__PURE__ */ __name((x, y, width, height, rx, ry, outerOffset) => {\n  return [\n    `M${x},${y + ry}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `a${rx},${ry} 0,0,0 ${-width},0`,\n    `l0,${height}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `l0,${-height}`,\n    `M${x},${y + ry + outerOffset}`,\n    `a${rx},${ry} 0,0,0 ${width},0`\n  ].join(\" \");\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD2 = /* @__PURE__ */ __name((x, y, width, height, rx, ry, outerOffset) => {\n  return [\n    `M${x},${y + ry}`,\n    `M${x + width},${y + ry}`,\n    `a${rx},${ry} 0,0,0 ${-width},0`,\n    `l0,${height}`,\n    `a${rx},${ry} 0,0,0 ${width},0`,\n    `l0,${-height}`,\n    `M${x},${y + ry + outerOffset}`,\n    `a${rx},${ry} 0,0,0 ${width},0`\n  ].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD2 = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [`M${x - width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 ${width},0`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function linedCylinder(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node.width ?? 0);\n  const rx = w / 2;\n  const ry = rx / (2.5 + w / 50);\n  const h = Math.max(bbox.height + ry + (node.padding ?? 0), node.height ?? 0);\n  const outerOffset = h * 0.1;\n  let cylinder2;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough31.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD2(0, 0, w, h, rx, ry, outerOffset);\n    const innerPathData = createInnerCylinderPathD2(0, ry, w, h, rx, ry);\n    const options = userNodeOverrides(node, {});\n    const outerNode = rc.path(outerPathData, options);\n    const innerLine = rc.path(innerPathData, options);\n    const innerLineEl = shapeSvg.insert(() => innerLine, \":first-child\");\n    innerLineEl.attr(\"class\", \"line\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD2(0, 0, w, h, rx, ry, outerOffset);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n  }\n  cylinder2.attr(\"label-offset-y\", ry);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${-(h / 2 + ry)})`);\n  updateNodeBounds(node, cylinder2);\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + ry - (bbox.y - (bbox.top ?? 0))})`\n  );\n  node.intersect = function(point) {\n    const pos = intersect_default.rect(node, point);\n    const x = pos.x - (node.x ?? 0);\n    if (rx != 0 && (Math.abs(x) < (node.width ?? 0) / 2 || Math.abs(x) == (node.width ?? 0) / 2 && Math.abs(pos.y - (node.y ?? 0)) > (node.height ?? 0) / 2 - ry)) {\n      let y = ry * ry * (1 - x * x / (rx * rx));\n      if (y > 0) {\n        y = Math.sqrt(y);\n      }\n      y = ry - y;\n      if (point.y - (node.y ?? 0) > 0) {\n        y = -y;\n      }\n      pos.y += y;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(linedCylinder, \"linedCylinder\");\n\n// src/rendering-util/rendering-elements/shapes/linedWaveEdgedRect.ts\nimport rough32 from \"roughjs\";\nasync function linedWaveEdgedRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const finalH = h + waveAmplitude;\n  const { cssStyles } = node;\n  const rc = rough32.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 - w / 2 * 0.1, y: -finalH / 2 },\n    { x: -w / 2 - w / 2 * 0.1, y: finalH / 2 },\n    ...generateFullSineWavePoints(\n      -w / 2 - w / 2 * 0.1,\n      finalH / 2,\n      w / 2 + w / 2 * 0.1,\n      finalH / 2,\n      waveAmplitude,\n      0.8\n    ),\n    { x: w / 2 + w / 2 * 0.1, y: -finalH / 2 },\n    { x: -w / 2 - w / 2 * 0.1, y: -finalH / 2 },\n    { x: -w / 2, y: -finalH / 2 },\n    { x: -w / 2, y: finalH / 2 * 1.1 },\n    { x: -w / 2, y: -finalH / 2 }\n  ];\n  const poly = rc.polygon(\n    points.map((p) => [p.x, p.y]),\n    options\n  );\n  const waveEdgeRect = shapeSvg.insert(() => poly, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) + w / 2 * 0.1 / 2 - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(linedWaveEdgedRect, \"linedWaveEdgedRect\");\n\n// src/rendering-util/rendering-elements/shapes/multiRect.ts\nimport rough33 from \"roughjs\";\nasync function multiRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const rectOffset = 5;\n  const x = -w / 2;\n  const y = -h / 2;\n  const { cssStyles } = node;\n  const rc = rough33.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const outerPathPoints = [\n    { x: x - rectOffset, y: y + rectOffset },\n    { x: x - rectOffset, y: y + h + rectOffset },\n    { x: x + w - rectOffset, y: y + h + rectOffset },\n    { x: x + w - rectOffset, y: y + h },\n    { x: x + w, y: y + h },\n    { x: x + w, y: y + h - rectOffset },\n    { x: x + w + rectOffset, y: y + h - rectOffset },\n    { x: x + w + rectOffset, y: y - rectOffset },\n    { x: x + rectOffset, y: y - rectOffset },\n    { x: x + rectOffset, y },\n    { x, y },\n    { x, y: y + rectOffset }\n  ];\n  const innerPathPoints = [\n    { x, y: y + rectOffset },\n    { x: x + w - rectOffset, y: y + rectOffset },\n    { x: x + w - rectOffset, y: y + h },\n    { x: x + w, y: y + h },\n    { x: x + w, y },\n    { x, y }\n  ];\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const outerPath = createPathFromPoints(outerPathPoints);\n  const outerNode = rc.path(outerPath, options);\n  const innerPath = createPathFromPoints(innerPathPoints);\n  const innerNode = rc.path(innerPath, { ...options, fill: \"none\" });\n  const multiRect2 = shapeSvg.insert(() => innerNode, \":first-child\");\n  multiRect2.insert(() => outerNode, \":first-child\");\n  multiRect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    multiRect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    multiRect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - rectOffset - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, multiRect2);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(multiRect, \"multiRect\");\n\n// src/rendering-util/rendering-elements/shapes/multiWaveEdgedRectangle.ts\nimport rough34 from \"roughjs\";\nasync function multiWaveEdgedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const finalH = h + waveAmplitude;\n  const x = -w / 2;\n  const y = -finalH / 2;\n  const rectOffset = 5;\n  const { cssStyles } = node;\n  const wavePoints = generateFullSineWavePoints(\n    x - rectOffset,\n    y + finalH + rectOffset,\n    x + w - rectOffset,\n    y + finalH + rectOffset,\n    waveAmplitude,\n    0.8\n  );\n  const lastWavePoint = wavePoints?.[wavePoints.length - 1];\n  const outerPathPoints = [\n    { x: x - rectOffset, y: y + rectOffset },\n    { x: x - rectOffset, y: y + finalH + rectOffset },\n    ...wavePoints,\n    { x: x + w - rectOffset, y: lastWavePoint.y - rectOffset },\n    { x: x + w, y: lastWavePoint.y - rectOffset },\n    { x: x + w, y: lastWavePoint.y - 2 * rectOffset },\n    { x: x + w + rectOffset, y: lastWavePoint.y - 2 * rectOffset },\n    { x: x + w + rectOffset, y: y - rectOffset },\n    { x: x + rectOffset, y: y - rectOffset },\n    { x: x + rectOffset, y },\n    { x, y },\n    { x, y: y + rectOffset }\n  ];\n  const innerPathPoints = [\n    { x, y: y + rectOffset },\n    { x: x + w - rectOffset, y: y + rectOffset },\n    { x: x + w - rectOffset, y: lastWavePoint.y - rectOffset },\n    { x: x + w, y: lastWavePoint.y - rectOffset },\n    { x: x + w, y },\n    { x, y }\n  ];\n  const rc = rough34.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const outerPath = createPathFromPoints(outerPathPoints);\n  const outerNode = rc.path(outerPath, options);\n  const innerPath = createPathFromPoints(innerPathPoints);\n  const innerNode = rc.path(innerPath, options);\n  const shape = shapeSvg.insert(() => outerNode, \":first-child\");\n  shape.insert(() => innerNode);\n  shape.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    shape.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  shape.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - rectOffset - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, shape);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(multiWaveEdgedRectangle, \"multiWaveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/note.ts\nimport rough35 from \"roughjs\";\nasync function note(parent, node, { config: { themeVariables } }) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const useHtmlLabels = node.useHtmlLabels || getConfig().flowchart?.htmlLabels !== false;\n  if (!useHtmlLabels) {\n    node.centerLabel = true;\n  }\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const totalHeight = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const { cssStyles } = node;\n  const rc = rough35.svg(shapeSvg);\n  const options = userNodeOverrides(node, {\n    fill: themeVariables.noteBkgColor,\n    stroke: themeVariables.noteBorderColor\n  });\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const noteShapeNode = rc.rectangle(x, y, totalWidth, totalHeight, options);\n  const rect2 = shapeSvg.insert(() => noteShapeNode, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(note, \"note\");\n\n// src/rendering-util/rendering-elements/shapes/question.ts\nimport rough36 from \"roughjs\";\nvar createDecisionBoxPathD = /* @__PURE__ */ __name((x, y, size) => {\n  return [\n    `M${x + size / 2},${y}`,\n    `L${x + size},${y - size / 2}`,\n    `L${x + size / 2},${y - size}`,\n    `L${x},${y - size / 2}`,\n    \"Z\"\n  ].join(\" \");\n}, \"createDecisionBoxPathD\");\nasync function question(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const s = w + h;\n  const points = [\n    { x: s / 2, y: 0 },\n    { x: s, y: -s / 2 },\n    { x: s / 2, y: -s },\n    { x: 0, y: -s / 2 }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough36.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createDecisionBoxPathD(0, 0, s);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-s / 2}, ${s / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, s, s, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    log.debug(\n      \"APA12 Intersect called SPLIT\\npoint:\",\n      point,\n      \"\\nnode:\\n\",\n      node,\n      \"\\nres:\",\n      intersect_default.polygon(node, points, point)\n    );\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(question, \"question\");\n\n// src/rendering-util/rendering-elements/shapes/rectLeftInvArrow.ts\nimport rough37 from \"roughjs\";\nasync function rect_left_inv_arrow(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0), node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0), node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const notch = y / 2;\n  const points = [\n    { x: x + notch, y },\n    { x, y: 0 },\n    { x: x + notch, y: -y },\n    { x: -x, y: -y },\n    { x: -x, y }\n  ];\n  const { cssStyles } = node;\n  const rc = rough37.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => roughNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(${-notch / 2},0)`);\n  label.attr(\n    \"transform\",\n    `translate(${-notch / 2 - bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(rect_left_inv_arrow, \"rect_left_inv_arrow\");\n\n// src/rendering-util/rendering-elements/shapes/rectWithTitle.ts\nimport { select as select4 } from \"d3\";\nimport rough38 from \"roughjs\";\nasync function rectWithTitle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  let classes;\n  if (!node.cssClasses) {\n    classes = \"node default\";\n  } else {\n    classes = \"node \" + node.cssClasses;\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", classes).attr(\"id\", node.domId || node.id);\n  const g = shapeSvg.insert(\"g\");\n  const label = shapeSvg.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", nodeStyles);\n  const description = node.description;\n  const title = node.label;\n  const text2 = label.node().appendChild(await createLabel_default(title, node.labelStyle, true, true));\n  let bbox = { width: 0, height: 0 };\n  if (evaluate(getConfig2()?.flowchart?.htmlLabels)) {\n    const div2 = text2.children[0];\n    const dv2 = select4(text2);\n    bbox = div2.getBoundingClientRect();\n    dv2.attr(\"width\", bbox.width);\n    dv2.attr(\"height\", bbox.height);\n  }\n  log.info(\"Text 2\", description);\n  const textRows = description || [];\n  const titleBox = text2.getBBox();\n  const descr = label.node().appendChild(\n    await createLabel_default(\n      textRows.join ? textRows.join(\"<br/>\") : textRows,\n      node.labelStyle,\n      true,\n      true\n    )\n  );\n  const div = descr.children[0];\n  const dv = select4(descr);\n  bbox = div.getBoundingClientRect();\n  dv.attr(\"width\", bbox.width);\n  dv.attr(\"height\", bbox.height);\n  const halfPadding = (node.padding || 0) / 2;\n  select4(descr).attr(\n    \"transform\",\n    \"translate( \" + (bbox.width > titleBox.width ? 0 : (titleBox.width - bbox.width) / 2) + \", \" + (titleBox.height + halfPadding + 5) + \")\"\n  );\n  select4(text2).attr(\n    \"transform\",\n    \"translate( \" + (bbox.width < titleBox.width ? 0 : -(titleBox.width - bbox.width) / 2) + \", 0)\"\n  );\n  bbox = label.node().getBBox();\n  label.attr(\n    \"transform\",\n    \"translate(\" + -bbox.width / 2 + \", \" + (-bbox.height / 2 - halfPadding + 3) + \")\"\n  );\n  const totalWidth = bbox.width + (node.padding || 0);\n  const totalHeight = bbox.height + (node.padding || 0);\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  let rect2;\n  let innerLine;\n  if (node.look === \"handDrawn\") {\n    const rc = rough38.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.path(\n      createRoundedRectPathD(x, y, totalWidth, totalHeight, node.rx || 0),\n      options\n    );\n    const roughLine = rc.line(\n      -bbox.width / 2 - halfPadding,\n      -bbox.height / 2 - halfPadding + titleBox.height + halfPadding,\n      bbox.width / 2 + halfPadding,\n      -bbox.height / 2 - halfPadding + titleBox.height + halfPadding,\n      options\n    );\n    innerLine = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughLine;\n    }, \":first-child\");\n    rect2 = shapeSvg.insert(() => {\n      log.debug(\"Rough node insert CXC\", roughNode);\n      return roughNode;\n    }, \":first-child\");\n  } else {\n    rect2 = g.insert(\"rect\", \":first-child\");\n    innerLine = g.insert(\"line\");\n    rect2.attr(\"class\", \"outer title-state\").attr(\"style\", nodeStyles).attr(\"x\", -bbox.width / 2 - halfPadding).attr(\"y\", -bbox.height / 2 - halfPadding).attr(\"width\", bbox.width + (node.padding || 0)).attr(\"height\", bbox.height + (node.padding || 0));\n    innerLine.attr(\"class\", \"divider\").attr(\"x1\", -bbox.width / 2 - halfPadding).attr(\"x2\", bbox.width / 2 + halfPadding).attr(\"y1\", -bbox.height / 2 - halfPadding + titleBox.height + halfPadding).attr(\"y2\", -bbox.height / 2 - halfPadding + titleBox.height + halfPadding);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(rectWithTitle, \"rectWithTitle\");\n\n// src/rendering-util/rendering-elements/shapes/roundedRect.ts\nasync function roundedRect(parent, node) {\n  const options = {\n    rx: 5,\n    ry: 5,\n    classes: \"\",\n    labelPaddingX: (node?.padding || 0) * 1,\n    labelPaddingY: (node?.padding || 0) * 1\n  };\n  return drawRect(parent, node, options);\n}\n__name(roundedRect, \"roundedRect\");\n\n// src/rendering-util/rendering-elements/shapes/shadedProcess.ts\nimport rough39 from \"roughjs\";\nasync function shadedProcess(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const halfPadding = node?.padding ?? 0;\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  const { cssStyles } = node;\n  const rc = rough39.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x, y },\n    { x: x + w + 8, y },\n    { x: x + w + 8, y: y + h },\n    { x: x - 8, y: y + h },\n    { x: x - 8, y },\n    { x, y },\n    { x, y: y + h }\n  ];\n  const roughNode = rc.polygon(\n    points.map((p) => [p.x, p.y]),\n    options\n  );\n  const rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  if (cssStyles && node.look !== \"handDrawn\") {\n    rect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + 4 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(shadedProcess, \"shadedProcess\");\n\n// src/rendering-util/rendering-elements/shapes/slopedRect.ts\nimport rough40 from \"roughjs\";\nasync function slopedRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const { cssStyles } = node;\n  const rc = rough40.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x, y },\n    { x, y: y + h },\n    { x: x + w, y: y + h },\n    { x: x + w, y: y - h / 2 }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  polygon.attr(\"transform\", `translate(0, ${h / 4})`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))}, ${-h / 4 + (node.padding ?? 0) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(slopedRect, \"slopedRect\");\n\n// src/rendering-util/rendering-elements/shapes/squareRect.ts\nasync function squareRect2(parent, node) {\n  const options = {\n    rx: 0,\n    ry: 0,\n    classes: \"\",\n    labelPaddingX: (node?.padding || 0) * 2,\n    labelPaddingY: (node?.padding || 0) * 1\n  };\n  return drawRect(parent, node, options);\n}\n__name(squareRect2, \"squareRect\");\n\n// src/rendering-util/rendering-elements/shapes/stadium.ts\nimport rough41 from \"roughjs\";\nasync function stadium(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const h = bbox.height + node.padding;\n  const w = bbox.width + h / 4 + node.padding;\n  let rect2;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough41.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createRoundedRectPathD(-w / 2, -h / 2, w, h, h / 2);\n    const roughNode = rc.path(pathData, options);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles).attr(\"rx\", h / 2).attr(\"ry\", h / 2).attr(\"x\", -w / 2).attr(\"y\", -h / 2).attr(\"width\", w).attr(\"height\", h);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(stadium, \"stadium\");\n\n// src/rendering-util/rendering-elements/shapes/state.ts\nasync function state(parent, node) {\n  const options = {\n    rx: 5,\n    ry: 5,\n    classes: \"flowchart-node\"\n  };\n  return drawRect(parent, node, options);\n}\n__name(state, \"state\");\n\n// src/rendering-util/rendering-elements/shapes/stateEnd.ts\nimport rough42 from \"roughjs\";\nfunction stateEnd(parent, node, { config: { themeVariables } }) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { cssStyles } = node;\n  const { lineColor, stateBorder, nodeBorder } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"node default\").attr(\"id\", node.domId || node.id);\n  const rc = rough42.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughNode = rc.circle(0, 0, 14, {\n    ...options,\n    stroke: lineColor,\n    strokeWidth: 2\n  });\n  const innerFill = stateBorder ?? nodeBorder;\n  const roughInnerNode = rc.circle(0, 0, 5, {\n    ...options,\n    fill: innerFill,\n    stroke: innerFill,\n    strokeWidth: 2,\n    fillStyle: \"solid\"\n  });\n  const circle2 = shapeSvg.insert(() => roughNode, \":first-child\");\n  circle2.insert(() => roughInnerNode);\n  if (cssStyles) {\n    circle2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles) {\n    circle2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, circle2);\n  node.intersect = function(point) {\n    return intersect_default.circle(node, 7, point);\n  };\n  return shapeSvg;\n}\n__name(stateEnd, \"stateEnd\");\n\n// src/rendering-util/rendering-elements/shapes/stateStart.ts\nimport rough43 from \"roughjs\";\nfunction stateStart(parent, node, { config: { themeVariables } }) {\n  const { lineColor } = themeVariables;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", \"node default\").attr(\"id\", node.domId || node.id);\n  let circle2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough43.svg(shapeSvg);\n    const roughNode = rc.circle(0, 0, 14, solidStateFill(lineColor));\n    circle2 = shapeSvg.insert(() => roughNode);\n    circle2.attr(\"class\", \"state-start\").attr(\"r\", 7).attr(\"width\", 14).attr(\"height\", 14);\n  } else {\n    circle2 = shapeSvg.insert(\"circle\", \":first-child\");\n    circle2.attr(\"class\", \"state-start\").attr(\"r\", 7).attr(\"width\", 14).attr(\"height\", 14);\n  }\n  updateNodeBounds(node, circle2);\n  node.intersect = function(point) {\n    return intersect_default.circle(node, 7, point);\n  };\n  return shapeSvg;\n}\n__name(stateStart, \"stateStart\");\n\n// src/rendering-util/rendering-elements/shapes/subroutine.ts\nimport rough44 from \"roughjs\";\nasync function subroutine(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const halfPadding = (node?.padding || 0) / 2;\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const x = -bbox.width / 2 - halfPadding;\n  const y = -bbox.height / 2 - halfPadding;\n  const points = [\n    { x: 0, y: 0 },\n    { x: w, y: 0 },\n    { x: w, y: -h },\n    { x: 0, y: -h },\n    { x: 0, y: 0 },\n    { x: -8, y: 0 },\n    { x: w + 8, y: 0 },\n    { x: w + 8, y: -h },\n    { x: -8, y: -h },\n    { x: -8, y: 0 }\n  ];\n  if (node.look === \"handDrawn\") {\n    const rc = rough44.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const roughNode = rc.rectangle(x - 8, y, w + 16, h, options);\n    const l1 = rc.line(x, y, x, y + h, options);\n    const l2 = rc.line(x + w, y, x + w, y + h, options);\n    shapeSvg.insert(() => l1, \":first-child\");\n    shapeSvg.insert(() => l2, \":first-child\");\n    const rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    const { cssStyles } = node;\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles));\n    updateNodeBounds(node, rect2);\n  } else {\n    const el = insertPolygonShape(shapeSvg, w, h, points);\n    if (nodeStyles) {\n      el.attr(\"style\", nodeStyles);\n    }\n    updateNodeBounds(node, el);\n  }\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(subroutine, \"subroutine\");\n\n// src/rendering-util/rendering-elements/shapes/taggedRect.ts\nimport rough45 from \"roughjs\";\nasync function taggedRect(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  const tagWidth = 0.2 * h;\n  const tagHeight = 0.2 * h;\n  const { cssStyles } = node;\n  const rc = rough45.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const rectPoints = [\n    { x: x - tagWidth / 2, y },\n    { x: x + w + tagWidth / 2, y },\n    { x: x + w + tagWidth / 2, y: y + h },\n    { x: x - tagWidth / 2, y: y + h }\n  ];\n  const tagPoints = [\n    { x: x + w - tagWidth / 2, y: y + h },\n    { x: x + w + tagWidth / 2, y: y + h },\n    { x: x + w + tagWidth / 2, y: y + h - tagHeight }\n  ];\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const rectPath = createPathFromPoints(rectPoints);\n  const rectNode = rc.path(rectPath, options);\n  const tagPath = createPathFromPoints(tagPoints);\n  const tagNode = rc.path(tagPath, { ...options, fillStyle: \"solid\" });\n  const taggedRect2 = shapeSvg.insert(() => tagNode, \":first-child\");\n  taggedRect2.insert(() => rectNode, \":first-child\");\n  taggedRect2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    taggedRect2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    taggedRect2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, taggedRect2);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, rectPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(taggedRect, \"taggedRect\");\n\n// src/rendering-util/rendering-elements/shapes/taggedWaveEdgedRectangle.ts\nimport rough46 from \"roughjs\";\nasync function taggedWaveEdgedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 4;\n  const tagWidth = 0.2 * w;\n  const tagHeight = 0.2 * h;\n  const finalH = h + waveAmplitude;\n  const { cssStyles } = node;\n  const rc = rough46.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 - w / 2 * 0.1, y: finalH / 2 },\n    ...generateFullSineWavePoints(\n      -w / 2 - w / 2 * 0.1,\n      finalH / 2,\n      w / 2 + w / 2 * 0.1,\n      finalH / 2,\n      waveAmplitude,\n      0.8\n    ),\n    { x: w / 2 + w / 2 * 0.1, y: -finalH / 2 },\n    { x: -w / 2 - w / 2 * 0.1, y: -finalH / 2 }\n  ];\n  const x = -w / 2 + w / 2 * 0.1;\n  const y = -finalH / 2 - tagHeight * 0.4;\n  const tagPoints = [\n    { x: x + w - tagWidth, y: (y + h) * 1.4 },\n    { x: x + w, y: y + h - tagHeight },\n    { x: x + w, y: (y + h) * 0.9 },\n    ...generateFullSineWavePoints(\n      x + w,\n      (y + h) * 1.3,\n      x + w - tagWidth,\n      (y + h) * 1.5,\n      -h * 0.03,\n      0.5\n    )\n  ];\n  const waveEdgeRectPath = createPathFromPoints(points);\n  const waveEdgeRectNode = rc.path(waveEdgeRectPath, options);\n  const taggedWaveEdgeRectPath = createPathFromPoints(tagPoints);\n  const taggedWaveEdgeRectNode = rc.path(taggedWaveEdgeRectPath, {\n    ...options,\n    fillStyle: \"solid\"\n  });\n  const waveEdgeRect = shapeSvg.insert(() => taggedWaveEdgeRectNode, \":first-child\");\n  waveEdgeRect.insert(() => waveEdgeRectNode, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(taggedWaveEdgedRectangle, \"taggedWaveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/text.ts\nasync function text(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const totalWidth = Math.max(bbox.width + node.padding, node?.width || 0);\n  const totalHeight = Math.max(bbox.height + node.padding, node?.height || 0);\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n  rect2.attr(\"class\", \"text\").attr(\"style\", nodeStyles).attr(\"rx\", 0).attr(\"ry\", 0).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(text, \"text\");\n\n// src/rendering-util/rendering-elements/shapes/tiltedCylinder.ts\nimport rough47 from \"roughjs\";\nvar createCylinderPathD3 = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return `M${x},${y}\n    a${rx},${ry} 0,0,1 ${0},${-height}\n    l${width},${0}\n    a${rx},${ry} 0,0,1 ${0},${height}\n    M${width},${-height}\n    a${rx},${ry} 0,0,0 ${0},${height}\n    l${-width},${0}`;\n}, \"createCylinderPathD\");\nvar createOuterCylinderPathD3 = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [\n    `M${x},${y}`,\n    `M${x + width},${y}`,\n    `a${rx},${ry} 0,0,0 ${0},${-height}`,\n    `l${-width},0`,\n    `a${rx},${ry} 0,0,0 ${0},${height}`,\n    `l${width},0`\n  ].join(\" \");\n}, \"createOuterCylinderPathD\");\nvar createInnerCylinderPathD3 = /* @__PURE__ */ __name((x, y, width, height, rx, ry) => {\n  return [`M${x + width / 2},${-height / 2}`, `a${rx},${ry} 0,0,0 0,${height}`].join(\" \");\n}, \"createInnerCylinderPathD\");\nasync function tiltedCylinder(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label, halfPadding } = await labelHelper(\n    parent,\n    node,\n    getNodeClasses(node)\n  );\n  const labelPadding = node.look === \"neo\" ? halfPadding * 2 : halfPadding;\n  const h = bbox.height + labelPadding;\n  const ry = h / 2;\n  const rx = ry / (2.5 + h / 50);\n  const w = bbox.width + rx + labelPadding;\n  const { cssStyles } = node;\n  let cylinder2;\n  if (node.look === \"handDrawn\") {\n    const rc = rough47.svg(shapeSvg);\n    const outerPathData = createOuterCylinderPathD3(0, 0, w, h, rx, ry);\n    const innerPathData = createInnerCylinderPathD3(0, 0, w, h, rx, ry);\n    const outerNode = rc.path(outerPathData, userNodeOverrides(node, {}));\n    const innerLine = rc.path(innerPathData, userNodeOverrides(node, { fill: \"none\" }));\n    cylinder2 = shapeSvg.insert(() => innerLine, \":first-child\");\n    cylinder2 = shapeSvg.insert(() => outerNode, \":first-child\");\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.attr(\"style\", cssStyles);\n    }\n  } else {\n    const pathData = createCylinderPathD3(0, 0, w, h, rx, ry);\n    cylinder2 = shapeSvg.insert(\"path\", \":first-child\").attr(\"d\", pathData).attr(\"class\", \"basic label-container\").attr(\"style\", handleUndefinedAttr(cssStyles)).attr(\"style\", nodeStyles);\n    cylinder2.attr(\"class\", \"basic label-container\");\n    if (cssStyles) {\n      cylinder2.selectAll(\"path\").attr(\"style\", cssStyles);\n    }\n    if (nodeStyles) {\n      cylinder2.selectAll(\"path\").attr(\"style\", nodeStyles);\n    }\n  }\n  cylinder2.attr(\"label-offset-x\", rx);\n  cylinder2.attr(\"transform\", `translate(${-w / 2}, ${h / 2} )`);\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) - rx - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, cylinder2);\n  node.intersect = function(point) {\n    const pos = intersect_default.rect(node, point);\n    const y = pos.y - (node.y ?? 0);\n    if (ry != 0 && (Math.abs(y) < (node.height ?? 0) / 2 || Math.abs(y) == (node.height ?? 0) / 2 && Math.abs(pos.x - (node.x ?? 0)) > (node.width ?? 0) / 2 - rx)) {\n      let x = rx * rx * (1 - y * y / (ry * ry));\n      if (x != 0) {\n        x = Math.sqrt(Math.abs(x));\n      }\n      x = rx - x;\n      if (point.x - (node.x ?? 0) > 0) {\n        x = -x;\n      }\n      pos.x += x;\n    }\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(tiltedCylinder, \"tiltedCylinder\");\n\n// src/rendering-util/rendering-elements/shapes/trapezoid.ts\nimport rough48 from \"roughjs\";\nasync function trapezoid(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = bbox.width + node.padding;\n  const h = bbox.height + node.padding;\n  const points = [\n    { x: -3 * h / 6, y: 0 },\n    { x: w + 3 * h / 6, y: 0 },\n    { x: w, y: -h },\n    { x: 0, y: -h }\n  ];\n  let polygon;\n  const { cssStyles } = node;\n  if (node.look === \"handDrawn\") {\n    const rc = rough48.svg(shapeSvg);\n    const options = userNodeOverrides(node, {});\n    const pathData = createPathFromPoints(points);\n    const roughNode = rc.path(pathData, options);\n    polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-w / 2}, ${h / 2})`);\n    if (cssStyles) {\n      polygon.attr(\"style\", cssStyles);\n    }\n  } else {\n    polygon = insertPolygonShape(shapeSvg, w, h, points);\n  }\n  if (nodeStyles) {\n    polygon.attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(trapezoid, \"trapezoid\");\n\n// src/rendering-util/rendering-elements/shapes/trapezoidalPentagon.ts\nimport rough49 from \"roughjs\";\nasync function trapezoidalPentagon(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 60, minHeight = 20;\n  const w = Math.max(minWidth, bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(minHeight, bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const { cssStyles } = node;\n  const rc = rough49.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 * 0.8, y: -h / 2 },\n    { x: w / 2 * 0.8, y: -h / 2 },\n    { x: w / 2, y: -h / 2 * 0.6 },\n    { x: w / 2, y: h / 2 },\n    { x: -w / 2, y: h / 2 },\n    { x: -w / 2, y: -h / 2 * 0.6 }\n  ];\n  const pathData = createPathFromPoints(points);\n  const shapeNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => shapeNode, \":first-child\");\n  polygon.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, polygon);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(trapezoidalPentagon, \"trapezoidalPentagon\");\n\n// src/rendering-util/rendering-elements/shapes/triangle.ts\nimport rough50 from \"roughjs\";\nasync function triangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const useHtmlLabels = evaluate(getConfig2().flowchart?.htmlLabels);\n  const w = bbox.width + (node.padding ?? 0);\n  const h = w + bbox.height;\n  const tw = w + bbox.height;\n  const points = [\n    { x: 0, y: 0 },\n    { x: tw, y: 0 },\n    { x: tw / 2, y: -h }\n  ];\n  const { cssStyles } = node;\n  const rc = rough50.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const pathData = createPathFromPoints(points);\n  const roughNode = rc.path(pathData, options);\n  const polygon = shapeSvg.insert(() => roughNode, \":first-child\").attr(\"transform\", `translate(${-h / 2}, ${h / 2})`);\n  if (cssStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    polygon.selectChildren(\"path\").attr(\"style\", nodeStyles);\n  }\n  node.width = w;\n  node.height = h;\n  updateNodeBounds(node, polygon);\n  label.attr(\n    \"transform\",\n    `translate(${-bbox.width / 2 - (bbox.x - (bbox.left ?? 0))}, ${h / 2 - (bbox.height + (node.padding ?? 0) / (useHtmlLabels ? 2 : 1) - (bbox.y - (bbox.top ?? 0)))})`\n  );\n  node.intersect = function(point) {\n    log.info(\"Triangle intersect\", node, points, point);\n    return intersect_default.polygon(node, points, point);\n  };\n  return shapeSvg;\n}\n__name(triangle, \"triangle\");\n\n// src/rendering-util/rendering-elements/shapes/waveEdgedRectangle.ts\nimport rough51 from \"roughjs\";\nasync function waveEdgedRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const waveAmplitude = h / 8;\n  const finalH = h + waveAmplitude;\n  const { cssStyles } = node;\n  const minWidth = 70;\n  const widthDif = minWidth - w;\n  const extraW = widthDif > 0 ? widthDif / 2 : 0;\n  const rc = rough51.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2 - extraW, y: finalH / 2 },\n    ...generateFullSineWavePoints(\n      -w / 2 - extraW,\n      finalH / 2,\n      w / 2 + extraW,\n      finalH / 2,\n      waveAmplitude,\n      0.8\n    ),\n    { x: w / 2 + extraW, y: -finalH / 2 },\n    { x: -w / 2 - extraW, y: -finalH / 2 }\n  ];\n  const waveEdgeRectPath = createPathFromPoints(points);\n  const waveEdgeRectNode = rc.path(waveEdgeRectPath, options);\n  const waveEdgeRect = shapeSvg.insert(() => waveEdgeRectNode, \":first-child\");\n  waveEdgeRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveEdgeRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  waveEdgeRect.attr(\"transform\", `translate(0,${-waveAmplitude / 2})`);\n  label.attr(\n    \"transform\",\n    `translate(${-w / 2 + (node.padding ?? 0) - (bbox.x - (bbox.left ?? 0))},${-h / 2 + (node.padding ?? 0) - waveAmplitude - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, waveEdgeRect);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(waveEdgedRectangle, \"waveEdgedRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/waveRectangle.ts\nimport rough52 from \"roughjs\";\nasync function waveRectangle(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox } = await labelHelper(parent, node, getNodeClasses(node));\n  const minWidth = 100;\n  const minHeight = 50;\n  const baseWidth = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const baseHeight = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const aspectRatio = baseWidth / baseHeight;\n  let w = baseWidth;\n  let h = baseHeight;\n  if (w > h * aspectRatio) {\n    h = w / aspectRatio;\n  } else {\n    w = h * aspectRatio;\n  }\n  w = Math.max(w, minWidth);\n  h = Math.max(h, minHeight);\n  const waveAmplitude = Math.min(h * 0.2, h / 4);\n  const finalH = h + waveAmplitude * 2;\n  const { cssStyles } = node;\n  const rc = rough52.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const points = [\n    { x: -w / 2, y: finalH / 2 },\n    ...generateFullSineWavePoints(-w / 2, finalH / 2, w / 2, finalH / 2, waveAmplitude, 1),\n    { x: w / 2, y: -finalH / 2 },\n    ...generateFullSineWavePoints(w / 2, -finalH / 2, -w / 2, -finalH / 2, waveAmplitude, -1)\n  ];\n  const waveRectPath = createPathFromPoints(points);\n  const waveRectNode = rc.path(waveRectPath, options);\n  const waveRect = shapeSvg.insert(() => waveRectNode, \":first-child\");\n  waveRect.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    waveRect.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    waveRect.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, waveRect);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, points, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(waveRectangle, \"waveRectangle\");\n\n// src/rendering-util/rendering-elements/shapes/windowPane.ts\nimport rough53 from \"roughjs\";\nasync function windowPane(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const { shapeSvg, bbox, label } = await labelHelper(parent, node, getNodeClasses(node));\n  const w = Math.max(bbox.width + (node.padding ?? 0) * 2, node?.width ?? 0);\n  const h = Math.max(bbox.height + (node.padding ?? 0) * 2, node?.height ?? 0);\n  const rectOffset = 5;\n  const x = -w / 2;\n  const y = -h / 2;\n  const { cssStyles } = node;\n  const rc = rough53.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  const outerPathPoints = [\n    { x: x - rectOffset, y: y - rectOffset },\n    { x: x - rectOffset, y: y + h },\n    { x: x + w, y: y + h },\n    { x: x + w, y: y - rectOffset }\n  ];\n  const path = `M${x - rectOffset},${y - rectOffset} L${x + w},${y - rectOffset} L${x + w},${y + h} L${x - rectOffset},${y + h} L${x - rectOffset},${y - rectOffset}\n                M${x - rectOffset},${y} L${x + w},${y}\n                M${x},${y - rectOffset} L${x},${y + h}`;\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const no = rc.path(path, options);\n  const windowPane2 = shapeSvg.insert(() => no, \":first-child\");\n  windowPane2.attr(\"transform\", `translate(${rectOffset / 2}, ${rectOffset / 2})`);\n  windowPane2.attr(\"class\", \"basic label-container\");\n  if (cssStyles && node.look !== \"handDrawn\") {\n    windowPane2.selectAll(\"path\").attr(\"style\", cssStyles);\n  }\n  if (nodeStyles && node.look !== \"handDrawn\") {\n    windowPane2.selectAll(\"path\").attr(\"style\", nodeStyles);\n  }\n  label.attr(\n    \"transform\",\n    `translate(${-(bbox.width / 2) + rectOffset / 2 - (bbox.x - (bbox.left ?? 0))}, ${-(bbox.height / 2) + rectOffset / 2 - (bbox.y - (bbox.top ?? 0))})`\n  );\n  updateNodeBounds(node, windowPane2);\n  node.intersect = function(point) {\n    const pos = intersect_default.polygon(node, outerPathPoints, point);\n    return pos;\n  };\n  return shapeSvg;\n}\n__name(windowPane, \"windowPane\");\n\n// src/rendering-util/rendering-elements/shapes/erBox.ts\nimport rough54 from \"roughjs\";\nimport { select as select5 } from \"d3\";\nasync function erBox(parent, node) {\n  const entityNode = node;\n  if (entityNode.alias) {\n    node.label = entityNode.alias;\n  }\n  if (node.look === \"handDrawn\") {\n    const { themeVariables: themeVariables2 } = getConfig();\n    const { background } = themeVariables2;\n    const backgroundNode = {\n      ...node,\n      id: node.id + \"-background\",\n      look: \"default\",\n      cssStyles: [\"stroke: none\", `fill: ${background}`]\n    };\n    await erBox(parent, backgroundNode);\n  }\n  const config = getConfig();\n  node.useHtmlLabels = config.htmlLabels;\n  let PADDING = config.er?.diagramPadding ?? 10;\n  let TEXT_PADDING = config.er?.entityPadding ?? 6;\n  const { cssStyles } = node;\n  const { labelStyles } = styles2String(node);\n  if (entityNode.attributes.length === 0 && node.label) {\n    const options2 = {\n      rx: 0,\n      ry: 0,\n      labelPaddingX: PADDING,\n      labelPaddingY: PADDING * 1.5,\n      classes: \"\"\n    };\n    if (calculateTextWidth(node.label, config) + options2.labelPaddingX * 2 < config.er.minEntityWidth) {\n      node.width = config.er.minEntityWidth;\n    }\n    const shapeSvg2 = await drawRect(parent, node, options2);\n    if (!evaluate(config.htmlLabels)) {\n      const textElement = shapeSvg2.select(\"text\");\n      const bbox = textElement.node()?.getBBox();\n      textElement.attr(\"transform\", `translate(${-bbox.width / 2}, 0)`);\n    }\n    return shapeSvg2;\n  }\n  if (!config.htmlLabels) {\n    PADDING *= 1.25;\n    TEXT_PADDING *= 1.25;\n  }\n  let cssClasses = getNodeClasses(node);\n  if (!cssClasses) {\n    cssClasses = \"node default\";\n  }\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", cssClasses).attr(\"id\", node.domId || node.id);\n  const nameBBox = await addText(shapeSvg, node.label ?? \"\", config, 0, 0, [\"name\"], labelStyles);\n  nameBBox.height += TEXT_PADDING;\n  let yOffset = 0;\n  const yOffsets = [];\n  let maxTypeWidth = 0;\n  let maxNameWidth = 0;\n  let maxKeysWidth = 0;\n  let maxCommentWidth = 0;\n  let keysPresent = true;\n  let commentPresent = true;\n  for (const attribute of entityNode.attributes) {\n    const typeBBox = await addText(\n      shapeSvg,\n      attribute.type,\n      config,\n      0,\n      yOffset,\n      [\"attribute-type\"],\n      labelStyles\n    );\n    maxTypeWidth = Math.max(maxTypeWidth, typeBBox.width + PADDING);\n    const nameBBox2 = await addText(\n      shapeSvg,\n      attribute.name,\n      config,\n      0,\n      yOffset,\n      [\"attribute-name\"],\n      labelStyles\n    );\n    maxNameWidth = Math.max(maxNameWidth, nameBBox2.width + PADDING);\n    const keysBBox = await addText(\n      shapeSvg,\n      attribute.keys.join(),\n      config,\n      0,\n      yOffset,\n      [\"attribute-keys\"],\n      labelStyles\n    );\n    maxKeysWidth = Math.max(maxKeysWidth, keysBBox.width + PADDING);\n    const commentBBox = await addText(\n      shapeSvg,\n      attribute.comment,\n      config,\n      0,\n      yOffset,\n      [\"attribute-comment\"],\n      labelStyles\n    );\n    maxCommentWidth = Math.max(maxCommentWidth, commentBBox.width + PADDING);\n    yOffset += Math.max(typeBBox.height, nameBBox2.height, keysBBox.height, commentBBox.height) + TEXT_PADDING;\n    yOffsets.push(yOffset);\n  }\n  yOffsets.pop();\n  let totalWidthSections = 4;\n  if (maxKeysWidth <= PADDING) {\n    keysPresent = false;\n    maxKeysWidth = 0;\n    totalWidthSections--;\n  }\n  if (maxCommentWidth <= PADDING) {\n    commentPresent = false;\n    maxCommentWidth = 0;\n    totalWidthSections--;\n  }\n  const shapeBBox = shapeSvg.node().getBBox();\n  if (nameBBox.width + PADDING * 2 - (maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth) > 0) {\n    const difference = nameBBox.width + PADDING * 2 - (maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth);\n    maxTypeWidth += difference / totalWidthSections;\n    maxNameWidth += difference / totalWidthSections;\n    if (maxKeysWidth > 0) {\n      maxKeysWidth += difference / totalWidthSections;\n    }\n    if (maxCommentWidth > 0) {\n      maxCommentWidth += difference / totalWidthSections;\n    }\n  }\n  const maxWidth = maxTypeWidth + maxNameWidth + maxKeysWidth + maxCommentWidth;\n  const rc = rough54.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const w = Math.max(shapeBBox.width + PADDING * 2, node?.width || 0, maxWidth);\n  const h = Math.max(shapeBBox.height + (yOffsets[0] || yOffset) + TEXT_PADDING, node?.height || 0);\n  const x = -w / 2;\n  const y = -h / 2;\n  shapeSvg.selectAll(\"g:not(:first-child)\").each((_, i, nodes) => {\n    const text2 = select5(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateX = 0;\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateX = parseFloat(translate[1]);\n        translateY = parseFloat(translate[2]);\n        if (text2.attr(\"class\").includes(\"attribute-name\")) {\n          translateX += maxTypeWidth;\n        } else if (text2.attr(\"class\").includes(\"attribute-keys\")) {\n          translateX += maxTypeWidth + maxNameWidth;\n        } else if (text2.attr(\"class\").includes(\"attribute-comment\")) {\n          translateX += maxTypeWidth + maxNameWidth + maxKeysWidth;\n        }\n      }\n    }\n    text2.attr(\n      \"transform\",\n      `translate(${x + PADDING / 2 + translateX}, ${translateY + y + nameBBox.height + TEXT_PADDING / 2})`\n    );\n  });\n  shapeSvg.select(\".name\").attr(\"transform\", \"translate(\" + -nameBBox.width / 2 + \", \" + (y + TEXT_PADDING / 2) + \")\");\n  const roughRect = rc.rectangle(x, y, w, h, options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\").attr(\"style\", cssStyles.join(\"\"));\n  const { themeVariables } = getConfig();\n  const { rowEven, rowOdd, nodeBorder } = themeVariables;\n  yOffsets.push(0);\n  for (const [i, yOffset2] of yOffsets.entries()) {\n    if (i === 0 && yOffsets.length > 1) {\n      continue;\n    }\n    const isEven = i % 2 === 0 && yOffset2 !== 0;\n    const roughRect2 = rc.rectangle(x, nameBBox.height + y + yOffset2, w, nameBBox.height, {\n      ...options,\n      fill: isEven ? rowEven : rowOdd,\n      stroke: nodeBorder\n    });\n    shapeSvg.insert(() => roughRect2, \"g.label\").attr(\"style\", cssStyles.join(\"\")).attr(\"class\", `row-rect-${i % 2 === 0 ? \"even\" : \"odd\"}`);\n  }\n  let roughLine = rc.line(x, nameBBox.height + y, w + x, nameBBox.height + y, options);\n  shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  roughLine = rc.line(maxTypeWidth + x, nameBBox.height + y, maxTypeWidth + x, h + y, options);\n  shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  if (keysPresent) {\n    roughLine = rc.line(\n      maxTypeWidth + maxNameWidth + x,\n      nameBBox.height + y,\n      maxTypeWidth + maxNameWidth + x,\n      h + y,\n      options\n    );\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  if (commentPresent) {\n    roughLine = rc.line(\n      maxTypeWidth + maxNameWidth + maxKeysWidth + x,\n      nameBBox.height + y,\n      maxTypeWidth + maxNameWidth + maxKeysWidth + x,\n      h + y,\n      options\n    );\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  for (const yOffset2 of yOffsets) {\n    roughLine = rc.line(\n      x,\n      nameBBox.height + y + yOffset2,\n      w + x,\n      nameBBox.height + y + yOffset2,\n      options\n    );\n    shapeSvg.insert(() => roughLine).attr(\"class\", \"divider\");\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(erBox, \"erBox\");\nasync function addText(shapeSvg, labelText, config, translateX = 0, translateY = 0, classes = [], style = \"\") {\n  const label = shapeSvg.insert(\"g\").attr(\"class\", `label ${classes.join(\" \")}`).attr(\"transform\", `translate(${translateX}, ${translateY})`).attr(\"style\", style);\n  if (labelText !== parseGenericTypes(labelText)) {\n    labelText = parseGenericTypes(labelText);\n    labelText = labelText.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n  }\n  const text2 = label.node().appendChild(\n    await createText(\n      label,\n      labelText,\n      {\n        width: calculateTextWidth(labelText, config) + 100,\n        style,\n        useHtmlLabels: config.htmlLabels\n      },\n      config\n    )\n  );\n  if (labelText.includes(\"&lt;\") || labelText.includes(\"&gt;\")) {\n    let child = text2.children[0];\n    child.textContent = child.textContent.replaceAll(\"&lt;\", \"<\").replaceAll(\"&gt;\", \">\");\n    while (child.childNodes[0]) {\n      child = child.childNodes[0];\n      child.textContent = child.textContent.replaceAll(\"&lt;\", \"<\").replaceAll(\"&gt;\", \">\");\n    }\n  }\n  let bbox = text2.getBBox();\n  if (evaluate(config.htmlLabels)) {\n    const div = text2.children[0];\n    div.style.textAlign = \"start\";\n    const dv = select5(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  return bbox;\n}\n__name(addText, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/classBox.ts\nimport { select as select7 } from \"d3\";\nimport rough55 from \"roughjs\";\n\n// src/diagrams/class/shapeUtil.ts\nimport { select as select6 } from \"d3\";\nasync function textHelper(parent, node, config, useHtmlLabels, GAP = config.class.padding ?? 12) {\n  const TEXT_PADDING = !useHtmlLabels ? 3 : 0;\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", getNodeClasses(node)).attr(\"id\", node.domId || node.id);\n  let annotationGroup = null;\n  let labelGroup = null;\n  let membersGroup = null;\n  let methodsGroup = null;\n  let annotationGroupHeight = 0;\n  let labelGroupHeight = 0;\n  let membersGroupHeight = 0;\n  annotationGroup = shapeSvg.insert(\"g\").attr(\"class\", \"annotation-group text\");\n  if (node.annotations.length > 0) {\n    const annotation = node.annotations[0];\n    await addText2(annotationGroup, { text: `\\xAB${annotation}\\xBB` }, 0);\n    const annotationGroupBBox = annotationGroup.node().getBBox();\n    annotationGroupHeight = annotationGroupBBox.height;\n  }\n  labelGroup = shapeSvg.insert(\"g\").attr(\"class\", \"label-group text\");\n  await addText2(labelGroup, node, 0, [\"font-weight: bolder\"]);\n  const labelGroupBBox = labelGroup.node().getBBox();\n  labelGroupHeight = labelGroupBBox.height;\n  membersGroup = shapeSvg.insert(\"g\").attr(\"class\", \"members-group text\");\n  let yOffset = 0;\n  for (const member of node.members) {\n    const height = await addText2(membersGroup, member, yOffset, [member.parseClassifier()]);\n    yOffset += height + TEXT_PADDING;\n  }\n  membersGroupHeight = membersGroup.node().getBBox().height;\n  if (membersGroupHeight <= 0) {\n    membersGroupHeight = GAP / 2;\n  }\n  methodsGroup = shapeSvg.insert(\"g\").attr(\"class\", \"methods-group text\");\n  let methodsYOffset = 0;\n  for (const method of node.methods) {\n    const height = await addText2(methodsGroup, method, methodsYOffset, [method.parseClassifier()]);\n    methodsYOffset += height + TEXT_PADDING;\n  }\n  let bbox = shapeSvg.node().getBBox();\n  if (annotationGroup !== null) {\n    const annotationGroupBBox = annotationGroup.node().getBBox();\n    annotationGroup.attr(\"transform\", `translate(${-annotationGroupBBox.width / 2})`);\n  }\n  labelGroup.attr(\"transform\", `translate(${-labelGroupBBox.width / 2}, ${annotationGroupHeight})`);\n  bbox = shapeSvg.node().getBBox();\n  membersGroup.attr(\n    \"transform\",\n    `translate(${0}, ${annotationGroupHeight + labelGroupHeight + GAP * 2})`\n  );\n  bbox = shapeSvg.node().getBBox();\n  methodsGroup.attr(\n    \"transform\",\n    `translate(${0}, ${annotationGroupHeight + labelGroupHeight + (membersGroupHeight ? membersGroupHeight + GAP * 4 : GAP * 2)})`\n  );\n  bbox = shapeSvg.node().getBBox();\n  return { shapeSvg, bbox };\n}\n__name(textHelper, \"textHelper\");\nasync function addText2(parentGroup, node, yOffset, styles = []) {\n  const textEl = parentGroup.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", styles.join(\"; \"));\n  const config = getConfig();\n  let useHtmlLabels = \"useHtmlLabels\" in node ? node.useHtmlLabels : evaluate(config.htmlLabels) ?? true;\n  let textContent = \"\";\n  if (\"text\" in node) {\n    textContent = node.text;\n  } else {\n    textContent = node.label;\n  }\n  if (!useHtmlLabels && textContent.startsWith(\"\\\\\")) {\n    textContent = textContent.substring(1);\n  }\n  if (hasKatex(textContent)) {\n    useHtmlLabels = true;\n  }\n  const text2 = await createText(\n    textEl,\n    sanitizeText2(decodeEntities(textContent)),\n    {\n      width: calculateTextWidth(textContent, config) + 50,\n      // Add room for error when splitting text into multiple lines\n      classes: \"markdown-node-label\",\n      useHtmlLabels\n    },\n    config\n  );\n  let bbox;\n  let numberOfLines = 1;\n  if (!useHtmlLabels) {\n    if (styles.includes(\"font-weight: bolder\")) {\n      select6(text2).selectAll(\"tspan\").attr(\"font-weight\", \"\");\n    }\n    numberOfLines = text2.children.length;\n    const textChild = text2.children[0];\n    if (text2.textContent === \"\" || text2.textContent.includes(\"&gt\")) {\n      textChild.textContent = textContent[0] + textContent.substring(1).replaceAll(\"&gt;\", \">\").replaceAll(\"&lt;\", \"<\").trim();\n      const preserveSpace = textContent[1] === \" \";\n      if (preserveSpace) {\n        textChild.textContent = textChild.textContent[0] + \" \" + textChild.textContent.substring(1);\n      }\n    }\n    if (textChild.textContent === \"undefined\") {\n      textChild.textContent = \"\";\n    }\n    bbox = text2.getBBox();\n  } else {\n    const div = text2.children[0];\n    const dv = select6(text2);\n    numberOfLines = div.innerHTML.split(\"<br>\").length;\n    if (div.innerHTML.includes(\"</math>\")) {\n      numberOfLines += div.innerHTML.split(\"<mrow>\").length - 1;\n    }\n    const images = div.getElementsByTagName(\"img\");\n    if (images) {\n      const noImgText = textContent.replace(/<img[^>]*>/g, \"\").trim() === \"\";\n      await Promise.all(\n        [...images].map(\n          (img) => new Promise((res) => {\n            function setupImage() {\n              img.style.display = \"flex\";\n              img.style.flexDirection = \"column\";\n              if (noImgText) {\n                const bodyFontSize = config.fontSize?.toString() ?? window.getComputedStyle(document.body).fontSize;\n                const enlargingFactor = 5;\n                const width = parseInt(bodyFontSize, 10) * enlargingFactor + \"px\";\n                img.style.minWidth = width;\n                img.style.maxWidth = width;\n              } else {\n                img.style.width = \"100%\";\n              }\n              res(img);\n            }\n            __name(setupImage, \"setupImage\");\n            setTimeout(() => {\n              if (img.complete) {\n                setupImage();\n              }\n            });\n            img.addEventListener(\"error\", setupImage);\n            img.addEventListener(\"load\", setupImage);\n          })\n        )\n      );\n    }\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  textEl.attr(\"transform\", \"translate(0,\" + (-bbox.height / (2 * numberOfLines) + yOffset) + \")\");\n  return bbox.height;\n}\n__name(addText2, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/classBox.ts\nasync function classBox(parent, node) {\n  const config = getConfig2();\n  const PADDING = config.class.padding ?? 12;\n  const GAP = PADDING;\n  const useHtmlLabels = node.useHtmlLabels ?? evaluate(config.htmlLabels) ?? true;\n  const classNode = node;\n  classNode.annotations = classNode.annotations ?? [];\n  classNode.members = classNode.members ?? [];\n  classNode.methods = classNode.methods ?? [];\n  const { shapeSvg, bbox } = await textHelper(parent, node, config, useHtmlLabels, GAP);\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  node.cssStyles = classNode.styles || \"\";\n  const styles = classNode.styles?.join(\";\") || nodeStyles || \"\";\n  if (!node.cssStyles) {\n    node.cssStyles = styles.replaceAll(\"!important\", \"\").split(\";\");\n  }\n  const renderExtraBox = classNode.members.length === 0 && classNode.methods.length === 0 && !config.class?.hideEmptyMembersBox;\n  const rc = rough55.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const w = bbox.width;\n  let h = bbox.height;\n  if (classNode.members.length === 0 && classNode.methods.length === 0) {\n    h += GAP;\n  } else if (classNode.members.length > 0 && classNode.methods.length === 0) {\n    h += GAP * 2;\n  }\n  const x = -w / 2;\n  const y = -h / 2;\n  const roughRect = rc.rectangle(\n    x - PADDING,\n    y - PADDING - (renderExtraBox ? PADDING : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING / 2 : 0),\n    w + 2 * PADDING,\n    h + 2 * PADDING + (renderExtraBox ? PADDING * 2 : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING : 0),\n    options\n  );\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\");\n  const rectBBox = rect2.node().getBBox();\n  shapeSvg.selectAll(\".text\").each((_, i, nodes) => {\n    const text2 = select7(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateY = parseFloat(translate[2]);\n      }\n    }\n    let newTranslateY = translateY + y + PADDING - (renderExtraBox ? PADDING : classNode.members.length === 0 && classNode.methods.length === 0 ? -PADDING / 2 : 0);\n    if (!useHtmlLabels) {\n      newTranslateY -= 4;\n    }\n    let newTranslateX = x;\n    if (text2.attr(\"class\").includes(\"label-group\") || text2.attr(\"class\").includes(\"annotation-group\")) {\n      newTranslateX = -text2.node()?.getBBox().width / 2 || 0;\n      shapeSvg.selectAll(\"text\").each(function(_2, i2, nodes2) {\n        if (window.getComputedStyle(nodes2[i2]).textAnchor === \"middle\") {\n          newTranslateX = 0;\n        }\n      });\n    }\n    text2.attr(\"transform\", `translate(${newTranslateX}, ${newTranslateY})`);\n  });\n  const annotationGroupHeight = shapeSvg.select(\".annotation-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  const labelGroupHeight = shapeSvg.select(\".label-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  const membersGroupHeight = shapeSvg.select(\".members-group\").node().getBBox().height - (renderExtraBox ? PADDING / 2 : 0) || 0;\n  if (classNode.members.length > 0 || classNode.methods.length > 0 || renderExtraBox) {\n    const roughLine = rc.line(\n      rectBBox.x,\n      annotationGroupHeight + labelGroupHeight + y + PADDING,\n      rectBBox.x + rectBBox.width,\n      annotationGroupHeight + labelGroupHeight + y + PADDING,\n      options\n    );\n    const line = shapeSvg.insert(() => roughLine);\n    line.attr(\"class\", \"divider\").attr(\"style\", styles);\n  }\n  if (renderExtraBox || classNode.members.length > 0 || classNode.methods.length > 0) {\n    const roughLine = rc.line(\n      rectBBox.x,\n      annotationGroupHeight + labelGroupHeight + membersGroupHeight + y + GAP * 2 + PADDING,\n      rectBBox.x + rectBBox.width,\n      annotationGroupHeight + labelGroupHeight + membersGroupHeight + y + PADDING + GAP * 2,\n      options\n    );\n    const line = shapeSvg.insert(() => roughLine);\n    line.attr(\"class\", \"divider\").attr(\"style\", styles);\n  }\n  if (classNode.look !== \"handDrawn\") {\n    shapeSvg.selectAll(\"path\").attr(\"style\", styles);\n  }\n  rect2.select(\":nth-child(2)\").attr(\"style\", styles);\n  shapeSvg.selectAll(\".divider\").select(\"path\").attr(\"style\", styles);\n  if (node.labelStyle) {\n    shapeSvg.selectAll(\"span\").attr(\"style\", node.labelStyle);\n  } else {\n    shapeSvg.selectAll(\"span\").attr(\"style\", styles);\n  }\n  if (!useHtmlLabels) {\n    const colorRegex = RegExp(/color\\s*:\\s*([^;]*)/);\n    const match = colorRegex.exec(styles);\n    if (match) {\n      const colorStyle = match[0].replace(\"color\", \"fill\");\n      shapeSvg.selectAll(\"tspan\").attr(\"style\", colorStyle);\n    } else if (labelStyles) {\n      const match2 = colorRegex.exec(labelStyles);\n      if (match2) {\n        const colorStyle = match2[0].replace(\"color\", \"fill\");\n        shapeSvg.selectAll(\"tspan\").attr(\"style\", colorStyle);\n      }\n    }\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(classBox, \"classBox\");\n\n// src/rendering-util/rendering-elements/shapes/requirementBox.ts\nimport rough56 from \"roughjs\";\nimport { select as select8 } from \"d3\";\nasync function requirementBox(parent, node) {\n  const { labelStyles, nodeStyles } = styles2String(node);\n  node.labelStyle = labelStyles;\n  const requirementNode = node;\n  const elementNode = node;\n  const padding = 20;\n  const gap = 20;\n  const isRequirementNode = \"verifyMethod\" in node;\n  const classes = getNodeClasses(node);\n  const shapeSvg = parent.insert(\"g\").attr(\"class\", classes).attr(\"id\", node.domId ?? node.id);\n  let typeHeight;\n  if (isRequirementNode) {\n    typeHeight = await addText3(\n      shapeSvg,\n      `&lt;&lt;${requirementNode.type}&gt;&gt;`,\n      0,\n      node.labelStyle\n    );\n  } else {\n    typeHeight = await addText3(shapeSvg, \"&lt;&lt;Element&gt;&gt;\", 0, node.labelStyle);\n  }\n  let accumulativeHeight = typeHeight;\n  const nameHeight = await addText3(\n    shapeSvg,\n    requirementNode.name,\n    accumulativeHeight,\n    node.labelStyle + \"; font-weight: bold;\"\n  );\n  accumulativeHeight += nameHeight + gap;\n  if (isRequirementNode) {\n    const idHeight = await addText3(\n      shapeSvg,\n      `${requirementNode.requirementId ? `Id: ${requirementNode.requirementId}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n    accumulativeHeight += idHeight;\n    const textHeight = await addText3(\n      shapeSvg,\n      `${requirementNode.text ? `Text: ${requirementNode.text}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n    accumulativeHeight += textHeight;\n    const riskHeight = await addText3(\n      shapeSvg,\n      `${requirementNode.risk ? `Risk: ${requirementNode.risk}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n    accumulativeHeight += riskHeight;\n    await addText3(\n      shapeSvg,\n      `${requirementNode.verifyMethod ? `Verification: ${requirementNode.verifyMethod}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n  } else {\n    const typeHeight2 = await addText3(\n      shapeSvg,\n      `${elementNode.type ? `Type: ${elementNode.type}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n    accumulativeHeight += typeHeight2;\n    await addText3(\n      shapeSvg,\n      `${elementNode.docRef ? `Doc Ref: ${elementNode.docRef}` : \"\"}`,\n      accumulativeHeight,\n      node.labelStyle\n    );\n  }\n  const totalWidth = (shapeSvg.node()?.getBBox().width ?? 200) + padding;\n  const totalHeight = (shapeSvg.node()?.getBBox().height ?? 200) + padding;\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  const rc = rough56.svg(shapeSvg);\n  const options = userNodeOverrides(node, {});\n  if (node.look !== \"handDrawn\") {\n    options.roughness = 0;\n    options.fillStyle = \"solid\";\n  }\n  const roughRect = rc.rectangle(x, y, totalWidth, totalHeight, options);\n  const rect2 = shapeSvg.insert(() => roughRect, \":first-child\");\n  rect2.attr(\"class\", \"basic label-container\").attr(\"style\", nodeStyles);\n  shapeSvg.selectAll(\".label\").each((_, i, nodes) => {\n    const text2 = select8(nodes[i]);\n    const transform = text2.attr(\"transform\");\n    let translateX = 0;\n    let translateY = 0;\n    if (transform) {\n      const regex = RegExp(/translate\\(([^,]+),([^)]+)\\)/);\n      const translate = regex.exec(transform);\n      if (translate) {\n        translateX = parseFloat(translate[1]);\n        translateY = parseFloat(translate[2]);\n      }\n    }\n    const newTranslateY = translateY - totalHeight / 2;\n    let newTranslateX = x + padding / 2;\n    if (i === 0 || i === 1) {\n      newTranslateX = translateX;\n    }\n    text2.attr(\"transform\", `translate(${newTranslateX}, ${newTranslateY + padding})`);\n  });\n  if (accumulativeHeight > typeHeight + nameHeight + gap) {\n    const roughLine = rc.line(\n      x,\n      y + typeHeight + nameHeight + gap,\n      x + totalWidth,\n      y + typeHeight + nameHeight + gap,\n      options\n    );\n    const dividerLine = shapeSvg.insert(() => roughLine);\n    dividerLine.attr(\"style\", nodeStyles);\n  }\n  updateNodeBounds(node, rect2);\n  node.intersect = function(point) {\n    return intersect_default.rect(node, point);\n  };\n  return shapeSvg;\n}\n__name(requirementBox, \"requirementBox\");\nasync function addText3(parentGroup, inputText, yOffset, style = \"\") {\n  if (inputText === \"\") {\n    return 0;\n  }\n  const textEl = parentGroup.insert(\"g\").attr(\"class\", \"label\").attr(\"style\", style);\n  const config = getConfig2();\n  const useHtmlLabels = config.htmlLabels ?? true;\n  const text2 = await createText(\n    textEl,\n    sanitizeText2(decodeEntities(inputText)),\n    {\n      width: calculateTextWidth(inputText, config) + 50,\n      // Add room for error when splitting text into multiple lines\n      classes: \"markdown-node-label\",\n      useHtmlLabels,\n      style\n    },\n    config\n  );\n  let bbox;\n  if (!useHtmlLabels) {\n    const textChild = text2.children[0];\n    for (const child of textChild.children) {\n      child.textContent = child.textContent.replaceAll(\"&gt;\", \">\").replaceAll(\"&lt;\", \"<\");\n      if (style) {\n        child.setAttribute(\"style\", style);\n      }\n    }\n    bbox = text2.getBBox();\n    bbox.height += 6;\n  } else {\n    const div = text2.children[0];\n    const dv = select8(text2);\n    bbox = div.getBoundingClientRect();\n    dv.attr(\"width\", bbox.width);\n    dv.attr(\"height\", bbox.height);\n  }\n  textEl.attr(\"transform\", `translate(${-bbox.width / 2},${-bbox.height / 2 + yOffset})`);\n  return bbox.height;\n}\n__name(addText3, \"addText\");\n\n// src/rendering-util/rendering-elements/shapes/kanbanItem.ts\nimport rough57 from \"roughjs\";\nvar colorFromPriority = /* @__PURE__ */ __name((priority) => {\n  switch (priority) {\n    case \"Very High\":\n      return \"red\";\n    case \"High\":\n      return \"orange\";\n    case \"Medium\":\n      return null;\n    // no stroke\n    case \"Low\":\n      return \"blue\";\n    case \"Very Low\":\n      return \"lightblue\";\n  }\n}, \"colorFromPriority\");\nasync function kanbanItem(parent, kanbanNode, { config }) {\n  const { labelStyles, nodeStyles } = styles2String(kanbanNode);\n  kanbanNode.labelStyle = labelStyles || \"\";\n  const labelPaddingX = 10;\n  const orgWidth = kanbanNode.width;\n  kanbanNode.width = (kanbanNode.width ?? 200) - 10;\n  const {\n    shapeSvg,\n    bbox,\n    label: labelElTitle\n  } = await labelHelper(parent, kanbanNode, getNodeClasses(kanbanNode));\n  const padding = kanbanNode.padding || 10;\n  let ticketUrl = \"\";\n  let link;\n  if (\"ticket\" in kanbanNode && kanbanNode.ticket && config?.kanban?.ticketBaseUrl) {\n    ticketUrl = config?.kanban?.ticketBaseUrl.replace(\"#TICKET#\", kanbanNode.ticket);\n    link = shapeSvg.insert(\"svg:a\", \":first-child\").attr(\"class\", \"kanban-ticket-link\").attr(\"xlink:href\", ticketUrl).attr(\"target\", \"_blank\");\n  }\n  const options = {\n    useHtmlLabels: kanbanNode.useHtmlLabels,\n    labelStyle: kanbanNode.labelStyle || \"\",\n    width: kanbanNode.width,\n    img: kanbanNode.img,\n    padding: kanbanNode.padding || 8,\n    centerLabel: false\n  };\n  let labelEl, bbox2;\n  if (link) {\n    ({ label: labelEl, bbox: bbox2 } = await insertLabel(\n      link,\n      \"ticket\" in kanbanNode && kanbanNode.ticket || \"\",\n      options\n    ));\n  } else {\n    ({ label: labelEl, bbox: bbox2 } = await insertLabel(\n      shapeSvg,\n      \"ticket\" in kanbanNode && kanbanNode.ticket || \"\",\n      options\n    ));\n  }\n  const { label: labelElAssigned, bbox: bboxAssigned } = await insertLabel(\n    shapeSvg,\n    \"assigned\" in kanbanNode && kanbanNode.assigned || \"\",\n    options\n  );\n  kanbanNode.width = orgWidth;\n  const labelPaddingY = 10;\n  const totalWidth = kanbanNode?.width || 0;\n  const heightAdj = Math.max(bbox2.height, bboxAssigned.height) / 2;\n  const totalHeight = Math.max(bbox.height + labelPaddingY * 2, kanbanNode?.height || 0) + heightAdj;\n  const x = -totalWidth / 2;\n  const y = -totalHeight / 2;\n  labelElTitle.attr(\n    \"transform\",\n    \"translate(\" + (padding - totalWidth / 2) + \", \" + (-heightAdj - bbox.height / 2) + \")\"\n  );\n  labelEl.attr(\n    \"transform\",\n    \"translate(\" + (padding - totalWidth / 2) + \", \" + (-heightAdj + bbox.height / 2) + \")\"\n  );\n  labelElAssigned.attr(\n    \"transform\",\n    \"translate(\" + (padding + totalWidth / 2 - bboxAssigned.width - 2 * labelPaddingX) + \", \" + (-heightAdj + bbox.height / 2) + \")\"\n  );\n  let rect2;\n  const { rx, ry } = kanbanNode;\n  const { cssStyles } = kanbanNode;\n  if (kanbanNode.look === \"handDrawn\") {\n    const rc = rough57.svg(shapeSvg);\n    const options2 = userNodeOverrides(kanbanNode, {});\n    const roughNode = rx || ry ? rc.path(createRoundedRectPathD(x, y, totalWidth, totalHeight, rx || 0), options2) : rc.rectangle(x, y, totalWidth, totalHeight, options2);\n    rect2 = shapeSvg.insert(() => roughNode, \":first-child\");\n    rect2.attr(\"class\", \"basic label-container\").attr(\"style\", cssStyles ? cssStyles : null);\n  } else {\n    rect2 = shapeSvg.insert(\"rect\", \":first-child\");\n    rect2.attr(\"class\", \"basic label-container __APA__\").attr(\"style\", nodeStyles).attr(\"rx\", rx ?? 5).attr(\"ry\", ry ?? 5).attr(\"x\", x).attr(\"y\", y).attr(\"width\", totalWidth).attr(\"height\", totalHeight);\n    const priority = \"priority\" in kanbanNode && kanbanNode.priority;\n    if (priority) {\n      const line = shapeSvg.append(\"line\");\n      const lineX = x + 2;\n      const y1 = y + Math.floor((rx ?? 0) / 2);\n      const y2 = y + totalHeight - Math.floor((rx ?? 0) / 2);\n      line.attr(\"x1\", lineX).attr(\"y1\", y1).attr(\"x2\", lineX).attr(\"y2\", y2).attr(\"stroke-width\", \"4\").attr(\"stroke\", colorFromPriority(priority));\n    }\n  }\n  updateNodeBounds(kanbanNode, rect2);\n  kanbanNode.height = totalHeight;\n  kanbanNode.intersect = function(point) {\n    return intersect_default.rect(kanbanNode, point);\n  };\n  return shapeSvg;\n}\n__name(kanbanItem, \"kanbanItem\");\n\n// src/rendering-util/rendering-elements/shapes.ts\nvar shapesDefs = [\n  {\n    semanticName: \"Process\",\n    name: \"Rectangle\",\n    shortName: \"rect\",\n    description: \"Standard process shape\",\n    aliases: [\"proc\", \"process\", \"rectangle\"],\n    internalAliases: [\"squareRect\"],\n    handler: squareRect2\n  },\n  {\n    semanticName: \"Event\",\n    name: \"Rounded Rectangle\",\n    shortName: \"rounded\",\n    description: \"Represents an event\",\n    aliases: [\"event\"],\n    internalAliases: [\"roundedRect\"],\n    handler: roundedRect\n  },\n  {\n    semanticName: \"Terminal Point\",\n    name: \"Stadium\",\n    shortName: \"stadium\",\n    description: \"Terminal point\",\n    aliases: [\"terminal\", \"pill\"],\n    handler: stadium\n  },\n  {\n    semanticName: \"Subprocess\",\n    name: \"Framed Rectangle\",\n    shortName: \"fr-rect\",\n    description: \"Subprocess\",\n    aliases: [\"subprocess\", \"subproc\", \"framed-rectangle\", \"subroutine\"],\n    handler: subroutine\n  },\n  {\n    semanticName: \"Database\",\n    name: \"Cylinder\",\n    shortName: \"cyl\",\n    description: \"Database storage\",\n    aliases: [\"db\", \"database\", \"cylinder\"],\n    handler: cylinder\n  },\n  {\n    semanticName: \"Start\",\n    name: \"Circle\",\n    shortName: \"circle\",\n    description: \"Starting point\",\n    aliases: [\"circ\"],\n    handler: circle\n  },\n  {\n    semanticName: \"Decision\",\n    name: \"Diamond\",\n    shortName: \"diam\",\n    description: \"Decision-making step\",\n    aliases: [\"decision\", \"diamond\", \"question\"],\n    handler: question\n  },\n  {\n    semanticName: \"Prepare Conditional\",\n    name: \"Hexagon\",\n    shortName: \"hex\",\n    description: \"Preparation or condition step\",\n    aliases: [\"hexagon\", \"prepare\"],\n    handler: hexagon\n  },\n  {\n    semanticName: \"Data Input/Output\",\n    name: \"Lean Right\",\n    shortName: \"lean-r\",\n    description: \"Represents input or output\",\n    aliases: [\"lean-right\", \"in-out\"],\n    internalAliases: [\"lean_right\"],\n    handler: lean_right\n  },\n  {\n    semanticName: \"Data Input/Output\",\n    name: \"Lean Left\",\n    shortName: \"lean-l\",\n    description: \"Represents output or input\",\n    aliases: [\"lean-left\", \"out-in\"],\n    internalAliases: [\"lean_left\"],\n    handler: lean_left\n  },\n  {\n    semanticName: \"Priority Action\",\n    name: \"Trapezoid Base Bottom\",\n    shortName: \"trap-b\",\n    description: \"Priority action\",\n    aliases: [\"priority\", \"trapezoid-bottom\", \"trapezoid\"],\n    handler: trapezoid\n  },\n  {\n    semanticName: \"Manual Operation\",\n    name: \"Trapezoid Base Top\",\n    shortName: \"trap-t\",\n    description: \"Represents a manual task\",\n    aliases: [\"manual\", \"trapezoid-top\", \"inv-trapezoid\"],\n    internalAliases: [\"inv_trapezoid\"],\n    handler: inv_trapezoid\n  },\n  {\n    semanticName: \"Stop\",\n    name: \"Double Circle\",\n    shortName: \"dbl-circ\",\n    description: \"Represents a stop point\",\n    aliases: [\"double-circle\"],\n    internalAliases: [\"doublecircle\"],\n    handler: doublecircle\n  },\n  {\n    semanticName: \"Text Block\",\n    name: \"Text Block\",\n    shortName: \"text\",\n    description: \"Text block\",\n    handler: text\n  },\n  {\n    semanticName: \"Card\",\n    name: \"Notched Rectangle\",\n    shortName: \"notch-rect\",\n    description: \"Represents a card\",\n    aliases: [\"card\", \"notched-rectangle\"],\n    handler: card\n  },\n  {\n    semanticName: \"Lined/Shaded Process\",\n    name: \"Lined Rectangle\",\n    shortName: \"lin-rect\",\n    description: \"Lined process shape\",\n    aliases: [\"lined-rectangle\", \"lined-process\", \"lin-proc\", \"shaded-process\"],\n    handler: shadedProcess\n  },\n  {\n    semanticName: \"Start\",\n    name: \"Small Circle\",\n    shortName: \"sm-circ\",\n    description: \"Small starting point\",\n    aliases: [\"start\", \"small-circle\"],\n    internalAliases: [\"stateStart\"],\n    handler: stateStart\n  },\n  {\n    semanticName: \"Stop\",\n    name: \"Framed Circle\",\n    shortName: \"fr-circ\",\n    description: \"Stop point\",\n    aliases: [\"stop\", \"framed-circle\"],\n    internalAliases: [\"stateEnd\"],\n    handler: stateEnd\n  },\n  {\n    semanticName: \"Fork/Join\",\n    name: \"Filled Rectangle\",\n    shortName: \"fork\",\n    description: \"Fork or join in process flow\",\n    aliases: [\"join\"],\n    internalAliases: [\"forkJoin\"],\n    handler: forkJoin\n  },\n  {\n    semanticName: \"Collate\",\n    name: \"Hourglass\",\n    shortName: \"hourglass\",\n    description: \"Represents a collate operation\",\n    aliases: [\"hourglass\", \"collate\"],\n    handler: hourglass\n  },\n  {\n    semanticName: \"Comment\",\n    name: \"Curly Brace\",\n    shortName: \"brace\",\n    description: \"Adds a comment\",\n    aliases: [\"comment\", \"brace-l\"],\n    handler: curlyBraceLeft\n  },\n  {\n    semanticName: \"Comment Right\",\n    name: \"Curly Brace\",\n    shortName: \"brace-r\",\n    description: \"Adds a comment\",\n    handler: curlyBraceRight\n  },\n  {\n    semanticName: \"Comment with braces on both sides\",\n    name: \"Curly Braces\",\n    shortName: \"braces\",\n    description: \"Adds a comment\",\n    handler: curlyBraces\n  },\n  {\n    semanticName: \"Com Link\",\n    name: \"Lightning Bolt\",\n    shortName: \"bolt\",\n    description: \"Communication link\",\n    aliases: [\"com-link\", \"lightning-bolt\"],\n    handler: lightningBolt\n  },\n  {\n    semanticName: \"Document\",\n    name: \"Document\",\n    shortName: \"doc\",\n    description: \"Represents a document\",\n    aliases: [\"doc\", \"document\"],\n    handler: waveEdgedRectangle\n  },\n  {\n    semanticName: \"Delay\",\n    name: \"Half-Rounded Rectangle\",\n    shortName: \"delay\",\n    description: \"Represents a delay\",\n    aliases: [\"half-rounded-rectangle\"],\n    handler: halfRoundedRectangle\n  },\n  {\n    semanticName: \"Direct Access Storage\",\n    name: \"Horizontal Cylinder\",\n    shortName: \"h-cyl\",\n    description: \"Direct access storage\",\n    aliases: [\"das\", \"horizontal-cylinder\"],\n    handler: tiltedCylinder\n  },\n  {\n    semanticName: \"Disk Storage\",\n    name: \"Lined Cylinder\",\n    shortName: \"lin-cyl\",\n    description: \"Disk storage\",\n    aliases: [\"disk\", \"lined-cylinder\"],\n    handler: linedCylinder\n  },\n  {\n    semanticName: \"Display\",\n    name: \"Curved Trapezoid\",\n    shortName: \"curv-trap\",\n    description: \"Represents a display\",\n    aliases: [\"curved-trapezoid\", \"display\"],\n    handler: curvedTrapezoid\n  },\n  {\n    semanticName: \"Divided Process\",\n    name: \"Divided Rectangle\",\n    shortName: \"div-rect\",\n    description: \"Divided process shape\",\n    aliases: [\"div-proc\", \"divided-rectangle\", \"divided-process\"],\n    handler: dividedRectangle\n  },\n  {\n    semanticName: \"Extract\",\n    name: \"Triangle\",\n    shortName: \"tri\",\n    description: \"Extraction process\",\n    aliases: [\"extract\", \"triangle\"],\n    handler: triangle\n  },\n  {\n    semanticName: \"Internal Storage\",\n    name: \"Window Pane\",\n    shortName: \"win-pane\",\n    description: \"Internal storage\",\n    aliases: [\"internal-storage\", \"window-pane\"],\n    handler: windowPane\n  },\n  {\n    semanticName: \"Junction\",\n    name: \"Filled Circle\",\n    shortName: \"f-circ\",\n    description: \"Junction point\",\n    aliases: [\"junction\", \"filled-circle\"],\n    handler: filledCircle\n  },\n  {\n    semanticName: \"Loop Limit\",\n    name: \"Trapezoidal Pentagon\",\n    shortName: \"notch-pent\",\n    description: \"Loop limit step\",\n    aliases: [\"loop-limit\", \"notched-pentagon\"],\n    handler: trapezoidalPentagon\n  },\n  {\n    semanticName: \"Manual File\",\n    name: \"Flipped Triangle\",\n    shortName: \"flip-tri\",\n    description: \"Manual file operation\",\n    aliases: [\"manual-file\", \"flipped-triangle\"],\n    handler: flippedTriangle\n  },\n  {\n    semanticName: \"Manual Input\",\n    name: \"Sloped Rectangle\",\n    shortName: \"sl-rect\",\n    description: \"Manual input step\",\n    aliases: [\"manual-input\", \"sloped-rectangle\"],\n    handler: slopedRect\n  },\n  {\n    semanticName: \"Multi-Document\",\n    name: \"Stacked Document\",\n    shortName: \"docs\",\n    description: \"Multiple documents\",\n    aliases: [\"documents\", \"st-doc\", \"stacked-document\"],\n    handler: multiWaveEdgedRectangle\n  },\n  {\n    semanticName: \"Multi-Process\",\n    name: \"Stacked Rectangle\",\n    shortName: \"st-rect\",\n    description: \"Multiple processes\",\n    aliases: [\"procs\", \"processes\", \"stacked-rectangle\"],\n    handler: multiRect\n  },\n  {\n    semanticName: \"Stored Data\",\n    name: \"Bow Tie Rectangle\",\n    shortName: \"bow-rect\",\n    description: \"Stored data\",\n    aliases: [\"stored-data\", \"bow-tie-rectangle\"],\n    handler: bowTieRect\n  },\n  {\n    semanticName: \"Summary\",\n    name: \"Crossed Circle\",\n    shortName: \"cross-circ\",\n    description: \"Summary\",\n    aliases: [\"summary\", \"crossed-circle\"],\n    handler: crossedCircle\n  },\n  {\n    semanticName: \"Tagged Document\",\n    name: \"Tagged Document\",\n    shortName: \"tag-doc\",\n    description: \"Tagged document\",\n    aliases: [\"tag-doc\", \"tagged-document\"],\n    handler: taggedWaveEdgedRectangle\n  },\n  {\n    semanticName: \"Tagged Process\",\n    name: \"Tagged Rectangle\",\n    shortName: \"tag-rect\",\n    description: \"Tagged process\",\n    aliases: [\"tagged-rectangle\", \"tag-proc\", \"tagged-process\"],\n    handler: taggedRect\n  },\n  {\n    semanticName: \"Paper Tape\",\n    name: \"Flag\",\n    shortName: \"flag\",\n    description: \"Paper tape\",\n    aliases: [\"paper-tape\"],\n    handler: waveRectangle\n  },\n  {\n    semanticName: \"Odd\",\n    name: \"Odd\",\n    shortName: \"odd\",\n    description: \"Odd shape\",\n    internalAliases: [\"rect_left_inv_arrow\"],\n    handler: rect_left_inv_arrow\n  },\n  {\n    semanticName: \"Lined Document\",\n    name: \"Lined Document\",\n    shortName: \"lin-doc\",\n    description: \"Lined document\",\n    aliases: [\"lined-document\"],\n    handler: linedWaveEdgedRect\n  }\n];\nvar generateShapeMap = /* @__PURE__ */ __name(() => {\n  const undocumentedShapes = {\n    // States\n    state,\n    choice,\n    note,\n    // Rectangles\n    rectWithTitle,\n    labelRect,\n    // Icons\n    iconSquare,\n    iconCircle,\n    icon,\n    iconRounded,\n    imageSquare,\n    anchor,\n    // Kanban diagram\n    kanbanItem,\n    // class diagram\n    classBox,\n    // er diagram\n    erBox,\n    // Requirement diagram\n    requirementBox\n  };\n  const entries = [\n    ...Object.entries(undocumentedShapes),\n    ...shapesDefs.flatMap((shape) => {\n      const aliases = [\n        shape.shortName,\n        ...\"aliases\" in shape ? shape.aliases : [],\n        ...\"internalAliases\" in shape ? shape.internalAliases : []\n      ];\n      return aliases.map((alias) => [alias, shape.handler]);\n    })\n  ];\n  return Object.fromEntries(entries);\n}, \"generateShapeMap\");\nvar shapes2 = generateShapeMap();\nfunction isValidShape(shape) {\n  return shape in shapes2;\n}\n__name(isValidShape, \"isValidShape\");\n\n// src/rendering-util/rendering-elements/nodes.ts\nvar nodeElems = /* @__PURE__ */ new Map();\nasync function insertNode(elem, node, renderOptions) {\n  let newEl;\n  let el;\n  if (node.shape === \"rect\") {\n    if (node.rx && node.ry) {\n      node.shape = \"roundedRect\";\n    } else {\n      node.shape = \"squareRect\";\n    }\n  }\n  const shapeHandler = node.shape ? shapes2[node.shape] : void 0;\n  if (!shapeHandler) {\n    throw new Error(`No such shape: ${node.shape}. Please check your syntax.`);\n  }\n  if (node.link) {\n    let target;\n    if (renderOptions.config.securityLevel === \"sandbox\") {\n      target = \"_top\";\n    } else if (node.linkTarget) {\n      target = node.linkTarget || \"_blank\";\n    }\n    newEl = elem.insert(\"svg:a\").attr(\"xlink:href\", node.link).attr(\"target\", target ?? null);\n    el = await shapeHandler(newEl, node, renderOptions);\n  } else {\n    el = await shapeHandler(elem, node, renderOptions);\n    newEl = el;\n  }\n  if (node.tooltip) {\n    el.attr(\"title\", node.tooltip);\n  }\n  nodeElems.set(node.id, newEl);\n  if (node.haveCallback) {\n    newEl.attr(\"class\", newEl.attr(\"class\") + \" clickable\");\n  }\n  return newEl;\n}\n__name(insertNode, \"insertNode\");\nvar setNodeElem = /* @__PURE__ */ __name((elem, node) => {\n  nodeElems.set(node.id, elem);\n}, \"setNodeElem\");\nvar clear2 = /* @__PURE__ */ __name(() => {\n  nodeElems.clear();\n}, \"clear\");\nvar positionNode = /* @__PURE__ */ __name((node) => {\n  const el = nodeElems.get(node.id);\n  log.trace(\n    \"Transforming node\",\n    node.diff,\n    node,\n    \"translate(\" + (node.x - node.width / 2 - 5) + \", \" + node.width / 2 + \")\"\n  );\n  const padding = 8;\n  const diff = node.diff || 0;\n  if (node.clusterNode) {\n    el.attr(\n      \"transform\",\n      \"translate(\" + (node.x + diff - node.width / 2) + \", \" + (node.y - node.height / 2 - padding) + \")\"\n    );\n  } else {\n    el.attr(\"transform\", \"translate(\" + node.x + \", \" + node.y + \")\");\n  }\n  return diff;\n}, \"positionNode\");\n\nexport {\n  labelHelper,\n  updateNodeBounds,\n  isLabelStyle,\n  createLabel_default,\n  isValidShape,\n  insertCluster,\n  clear,\n  insertNode,\n  setNodeElem,\n  clear2,\n  positionNode\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}